{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///cornerstone.min.js","webpack:///webpack/bootstrap adda4191952c3649184c","webpack:///./enabledElements.js","webpack:///./internal/now.js","webpack:///./triggerEvent.js","webpack:///./updateImage.js","webpack:///./internal/drawImage.js","webpack:///./internal/getDefaultViewport.js","webpack:///./colors/index.js","webpack:///./setToPixelCoordinateSystem.js","webpack:///./rendering/renderColorImage.js","webpack:///./internal/generateLut.js","webpack:///./internal/getTransform.js","webpack:///./rendering/saveLastRendered.js","webpack:///./rendering/doesImageNeedToBeRendered.js","webpack:///./webgl/index.js","webpack:///./events.js","webpack:///./rendering/renderGrayscaleImage.js","webpack:///./internal/requestAnimationFrame.js","webpack:///./internal/storedPixelDataToCanvasImageData.js","webpack:///./internal/storedColorPixelDataToCanvasImageData.js","webpack:///./internal/storedPixelDataToCanvasImageDataColorLUT.js","webpack:///./internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js","webpack:///./internal/calculateTransform.js","webpack:///./rendering/renderLabelMapImage.js","webpack:///./rendering/initializeRenderCanvas.js","webpack:///./rendering/renderPseudoColorImage.js","webpack:///./layers.js","webpack:///./internal/getModalityLUT.js","webpack:///./colors/colormap.js","webpack:///./colors/lookupTable.js","webpack:///./internal/storedPixelDataToCanvasImageDataRGBA.js","webpack:///./internal/transform.js","webpack:///./rendering/getLut.js","webpack:///./webgl/textureCache.js","webpack:///./externalModules.js","webpack:///./webgl/createProgramFromString.js","webpack:///./rendering/renderWebImage.js","webpack:///./applyTransform.js","webpack:///./resize.js","webpack:///./fitToWindow.js","webpack:///./getStoredPixels.js","webpack:///./imageCache.js","webpack:///./pixelDataToFalseColorData.js","webpack:///./index.js","webpack:///./internal/getVOILut.js","webpack:///./internal/index.js","webpack:///./rendering/lutMatches.js","webpack:///./internal/storedRGBAPixelDataToCanvasImageData.js","webpack:///./webgl/renderer.js","webpack:///./webgl/shaders/index.js","webpack:///./webgl/shaders/int16.js","webpack:///./webgl/shaders/int8.js","webpack:///./webgl/shaders/rgb.js","webpack:///./webgl/shaders/uint16.js","webpack:///./webgl/shaders/uint8.js","webpack:///./webgl/vertexShader.js","webpack:///./canvasToPixel.js","webpack:///./disable.js","webpack:///./displayImage.js","webpack:///./internal/guid.js","webpack:///./draw.js","webpack:///./drawInvalidated.js","webpack:///./enable.js","webpack:///./internal/drawImageSync.js","webpack:///./internal/drawCompositeImage.js","webpack:///./enabledElementData.js","webpack:///./getDefaultViewportForImage.js","webpack:///./getImage.js","webpack:///./getPixels.js","webpack:///./getViewport.js","webpack:///./imageLoader.js","webpack:///./invalidate.js","webpack:///./invalidateImageId.js","webpack:///./pageToPixel.js","webpack:///./pixelToCanvas.js","webpack:///./reset.js","webpack:///./setViewport.js","webpack:///./rendering/index.js","webpack:///./metaData.js","webpack:///./falseColorMapping.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","getEnabledElement","element","undefined","Error","enabledElements","length","addEnabledElement","enabledElement","push","getEnabledElementsByImageId","imageId","ees","forEach","image","getEnabledElements","value","default","window","performance","now","Date","triggerEvent","el","type","detail","arguments","event","CustomEvent","toLocaleLowerCase","document","createEvent","initCustomEvent","_externalModules","external","$","trigger","dispatchEvent","invalidated","_enabledElements","layers","_drawImage2","_drawImage","obj","needsRedraw","invalid","canvas","scale","translation","x","y","voi","windowWidth","windowCenter","invert","pixelReplication","rotation","hflip","vflip","modalityLUT","voiLUT","colormap","labelmap","verticalScale","offsetHeight","rows","horizontalScale","offsetWidth","columns","Math","min","Boolean","_colormap","_lookupTable","_lookupTable2","getColormap","getColormapsList","LookupTable","context","transform","_calculateTransform2","setTransform","_calculateTransform","_interopRequireDefault","getLut","viewport","cachedLut","lutArray","_generateLut2","getRenderCanvas","renderingTools","renderCanvas","createElement","getCanvas","_doesImageNeedToBeRendered2","width","height","_initializeRenderCanvas2","start","_now2","colorLut","stats","lastLutGenerateTime","renderCanvasData","renderCanvasContext","rgba","_storedRGBAPixelDataToCanvasImageData2","data","_storedColorPixelDataToCanvasImageData2","putImageData","lastPutImageDataTime","renderColorImage","getContext","fillStyle","fillRect","imageSmoothingEnabled","mozImageSmoothingEnabled","_setToPixelCoordinateSystem2","options","renderer","toLowerCase","_index2","render","drawImage","_saveLastRendered2","addColorLayer","layer","_now","_generateLut","_storedColorPixelDataToCanvasImageData","_storedRGBAPixelDataToCanvasImageData","_setToPixelCoordinateSystem","_index","_doesImageNeedToBeRendered","_initializeRenderCanvas","_saveLastRendered","maxPixelValue","minPixelValue","offset","Uint8ClampedArray","lut","mlutfn","_getModalityLUT2","slope","intercept","vlutfn","_getVOILut2","storedValue","_getModalityLUT","_getVOILut","lastRenderedImageId","lastRenderedViewport","_renderer","_createProgramFromString","_createProgramFromString2","_textureCache","_textureCache2","mod","createProgramFromString","initRenderer","isWebGLAvailable","textureCache","isWebGLInitialized","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","writable","key","protoProps","staticProps","EventTarget","listeners","callback","stack","splice","defaultPrevented","events","renderGrayscaleImage","canvasData","getImageData","_getLut2","_storedPixelDataToCanvasImageData2","addGrayscaleLayer","_storedPixelDataToCanvasImageData","_storedPixelDataToCanvasImageDataRGBA","_getLut","requestFrame","setTimeout","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","canvasImageDataData","pixelData","getPixelData","lastGetPixelDataTime","numPixels","canvasImageDataIndex","storedPixelDataIndex","Int16Array","Uint16Array","lastStoredPixelDataToCanvasImageDataTime","storedPixelDataToCanvasImageDataColorLUT","clut","Table","storedPixelDataToCanvasImageDataPseudocolorLUT","grayscaleLut","grayscale","_transform","Transform","translate","angle","rotate","PI","widthScale","heightScale","rowPixelSpacing","columnPixelSpacing","xScale","yScale","colormapId","getId","createLookupTable","_storedPixelDataToCanvasImageDataColorLUT2","renderLabelMapImage","addLabelMapLayer","_storedPixelDataToCanvasImageDataColorLUT","console","log","canvasContext","setNumberOfColors","_storedPixelDataToCanvasImageDataPseudocolorLUT2","renderPseudoColorImage","addPseudoColorLayer","_storedPixelDataToCanvasImageDataPseudocolorLUT","eventName","layerId","eventData","_triggerEvent2","rescaleImage","baseLayer","targetLayer","baseImage","targetImage","colRelative","viewportRatio","addLayer","_guid2","_getDefaultViewport2","assign","syncViewports","newLayer","setActiveLayer","removeLayer","index","findIndex","activeLayerId","getLayer","find","getLayers","getVisibleLayers","filter","visible","opacity","_updateImage2","setLayerImage","getActiveLayer","defaultViewport","_guid","_getDefaultViewport","_updateImage","_triggerEvent","generateLinearModalityLUT","storedPixelValue","generateNonLinearModalityLUT","minValue","maxValue","maxValueMapped","firstValueMapped","linspace","a","b","increment","vector","getRank","array","elem","left","right","mid","floor","midElem","searchSorted","inputArray","values","indexes","len","sort","makeMappingArray","N","gamma","y0","y1","xLinSpace","pow","xLinSpaceIndexes","colorPercent","colorDelta","createLinearSegmentedColormap","segmentedData","redLut","red","greenLut","green","blueLut","blue","round","colormaps","keys","colormapsData","id","aName","bName","colormapData","colors","numColors","getColorSchemeName","setColorSchemeName","getNumberOfColors","COLOR_TRANSPARENT","getColor","isValidIndex","getColorRepeating","setColor","addColor","insertColor","removeColor","clearColors","buildLookupTable","setNumberOfTableValues","setTableValue","hotIron","numOfColors","pet","hotMetalBlue","pet20Step","gray","jet","hsv","hot","cool","spring","summer","autumn","winter","bone","copper","spectral","coolwarm","blues","HSVToRGB","hue","sat","val","rgb","hueCase","frac","lx","ly","lz","linearIndexLookupMain","v","dIndex","Range","MaxIndex","BELOW_RANGE_COLOR_INDEX","ABOVE_RANGE_COLOR_INDEX","Shift","Scale","NumberOfColors","Ramp","TableRange","HueRange","SaturationRange","ValueRange","AlphaRange","NaNColor","BelowRangeColor","UseBelowRangeColor","AboveRangeColor","UseAboveRangeColor","InputRange","number","ramp","end","scalar","mapValue","force","maxIndex","hinc","sinc","vinc","ainc","alpha","c_rgba","cos","sqrt","buildSpecialColors","numberOfColors","belowRangeColorIndex","aboveRangeColorIndex","nanColorIndex","getIndex","Number","MAX_VALUE","isNaN","Array","slice","pixelValue","reset","matrix","m11","m12","m21","m22","dx","dy","m0","m1","m2","m3","m4","m5","rad","sin","sx","sy","px","py","_lutMatches2","_lutMatches","getCacheInfo","maximumSizeInBytes","cacheSizeInBytes","numberOfImagesCached","cachedImages","purgeCacheIfNecessary","compare","timeStamp","lastCachedImage","sizeInBytes","imageCache","pop","_events2","cacheInfo","setMaximumSizeBytes","numBytes","toFixed","putImageTexture","imageTexture","cachedImage","getImageTexture","removeImageTexture","indexOf","purgeCache","removedCachedImage","_events","compileShader","gl","shaderSource","shaderType","shader","createShader","getShaderParameter","COMPILE_STATUS","isContextLost","infoLog","getShaderInfoLog","error","createProgram","vertexShader","fragmentShader","program","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","vertexShaderSrc","fragShaderSrc","VERTEX_SHADER","FRAGMENT_SHADER","renderWebImage","getImage","_renderColorImage","applyTransform","time","_viewport$translation","cssTranslateX","cssTranslateY","vflipDegrees","hflipDegrees","flipX","flipY","style","timeEnd","fitViewportToWindow","_fitToWindow2","_fitToWindow","getImageSize","imageSize","storedPixels","row","column","spIndex","removeImagePromise","putImagePromise","imagePromise","imageCacheDict","loaded","sharedCacheKey","then","eventDetails","action","getImagePromise","reject","decache","changeImageIdCacheSize","newCacheSize","cacheEntry","cacheSizeDifference","lookupTable","color","falseColor","origPixelData","storedColorPixelData","Uint8Array","sp","mapped","build","_requestAnimationFrame","_renderLabelMapImage","_renderPseudoColorImage","_renderGrayscaleImage","_renderWebImage","_canvasToPixel","_disable","_displayImage","_draw","_drawInvalidated","_enable","_enabledElementData","getElementData","removeElementData","_layers","_getDefaultViewportForImage","_getImage","_getPixels","_getStoredPixels","_getViewport","_imageLoader","loadImage","loadAndCacheImage","registerImageLoader","registerUnknownImageLoader","_invalidate","_invalidateImageId","_pageToPixel","_pixelToCanvas","_reset","_resize","_setViewport","_pixelDataToFalseColorData","_imageCache","_metaData","_index3","_index4","_falseColorMapping","convertImageToFalseColorImage","convertToFalseColorImage","restoreImage","_toConsumableArray","arr","isArray","arr2","from","generateLinearVOILUT","modalityLutValue","generateNonLinearVOILUT","bitsPerEntry","max","apply","toString","shift","_requestAnimationFrame2","_storedPixelDataToCanvasImageDataRGBA2","_getTransform","_getTransform2","generateLut","getDefaultViewport","storedPixelDataToCanvasImageData","storedPixelDataToCanvasImageDataRGBA","storedColorPixelDataToCanvasImageData","getTransform","calculateTransform","initShaders","shaders","attributes","uniforms","vert","_vertexShader","frag","texCoordLocation","getAttribLocation","enableVertexAttribArray","positionLocation","resolutionLocation","getUniformLocation","initWebGL","initBuffers","updateRectangle","bufferData","ARRAY_BUFFER","Float32Array","STATIC_DRAW","handleLostContext","preventDefault","warn","handleRestoredContext","preserveDrawingBuffer","removeEventListener","addEventListener","getImageDataType","datatype","getShaderProgram","generateTexture","TEXTURE_FORMAT","uint8","LUMINANCE","int8","LUMINANCE_ALPHA","uint16","int16","RGB","TEXTURE_BYTES","imageDataType","format","texture","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","pixelStorei","UNPACK_ALIGNMENT","imageData","dataUtilities","storedPixelDataToImageData","texImage2D","UNSIGNED_BYTE","positionBuffer","createBuffer","bindBuffer","texCoordBuffer","renderQuad","parameters","clearColor","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","useProgram","vertexAttribPointer","FLOAT","uniformLocation","uniform","uniform1i","uniform1f","uniform2f","activeTexture","TEXTURE0","drawArrays","TRIANGLE_STRIP","u_resolution","wc","ww","failIfMajorPerformanceCaveat","WebGLRenderingContext","e","_int","_int2","_rgb","_uint","_uint2","abs","int16Shader","int16DataUtilities","int8Shader","int8DataUtilities","numStoredPixels","numOutputPixels","storedPixelData","rgbShader","rgbDataUtilities","uint16Shader","uint16DataUtilities","uint8Shader","uint8DataUtilities","pt","transformPoint","removeChild","oldImage","attrname","frameRate","lastImageTimeStamp","newImageEventData","_applyTransform2","_applyTransform","s4","random","substring","ee","hasImageOrLayers","draw","timestamp","_drawImageSync2","position","top","appendChild","_resize2","_drawImageSync","lastRenderTime","imageWasRendered","_drawCompositeImage2","renderTimeInMs","_drawCompositeImage","getViewportRatio","baseLayerId","targetLayerId","originalViewportScale","activeLayer","renderLayers","save","isInvalid","useAlphaChannel","globalAlpha","_layer$image","restore","allLayers","visibleLayers","resynced","lastSyncViewportsState","dataType","_getStoredPixels2","map","loadImageFromImageLoader","colonIndex","scheme","loader","imageLoaders","unknownImageLoader","imageLoader","oldImageLoader","pageX","pageY","rect","getBoundingClientRect","clientX","pageXOffset","clientY","pageYOffset","MIN_WINDOW_WIDTH","MIN_VIEWPORT_SCALE","background","colorImage","grayscaleImage","webImage","addProvider","provider","priority","providers","removeProvider","getMetaData","result","getPixelValues","MIN_VALUE","pixel","getRestoreImageMethod","ensuresColormap","setTableRange","_pixelDataToFalseColorData2","pixelValues"],"mappings":";CAAA,SAAAA,EAAAC,GACA,gBAAAC,UAAA,gBAAAC,QACAA,OAAAD,QAAAD,IACA,kBAAAG,gBAAAC,IACAD,OAAA,sBAAAH,GACA,gBAAAC,SACAA,QAAA,oBAAAD,IAEAD,EAAA,YAAAC,KACCK,KAAA,WACD,MCCgB,UAAUC,GCP1B,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAP,OAGA,IAAAC,GAAAO,EAAAD,IACAE,EAAAF,EACAG,GAAA,EACAV,WAUA,OANAK,GAAAE,GAAAI,KAAAV,EAAAD,QAAAC,IAAAD,QAAAM,GAGAL,EAAAS,GAAA,EAGAT,EAAAD,QAvBA,GAAAQ,KA4DA,OAhCAF,GAAAM,EAAAP,EAGAC,EAAAO,EAAAL,EAGAF,EAAAQ,EAAA,SAAAd,EAAAe,EAAAC,GACAV,EAAAW,EAAAjB,EAAAe,IACAG,OAAAC,eAAAnB,EAAAe,GACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,KAMAV,EAAAiB,EAAA,SAAAtB,GACA,GAAAe,GAAAf,KAAAuB,WACA,WAA2B,MAAAvB,GAAA,SAC3B,WAAiC,MAAAA,GAEjC,OADAK,GAAAQ,EAAAE,EAAA,IAAAA,GACAA,GAIAV,EAAAW,EAAA,SAAAQ,EAAAC,GAAsD,MAAAR,QAAAS,UAAAC,eAAAjB,KAAAc,EAAAC,IAGtDpB,EAAAuB,EAAA,GAGAvB,IAAAwB,EAAA,MDiBM,SAAU7B,EAAQD,EAASM,GAEjC,YEoDO,SAASyB,GAAmBC,GACjC,OAAgBC,KAAZD,EACF,KAAM,IAAIE,OAAM,6DAElB,KAAK,GAAIzB,GAAI,EAAGA,EAAI0B,EAAgBC,OAAQ3B,IAC1C,GAAI0B,EAAgB1B,GAAGuB,UAAYA,EACjC,MAAOG,GAAgB1B,EAI3B,MAAM,IAAIyB,OAAM,uBASX,QAASG,GAAmBC,GACjC,OAAuBL,KAAnBK,EACF,KAAM,IAAIJ,OAAM,kEAGlBC,GAAgBI,KAAKD,GAShB,QAASE,GAA6BC,GAC3C,GAAMC,KAQN,OANAP,GAAgBQ,QAAQ,SAAUL,GAC5BA,EAAeM,OAASN,EAAeM,MAAMH,UAAYA,GAC3DC,EAAIH,KAAKD,KAINI,EAQF,QAASG,KACd,MAAOV,GFpGTjB,OAAOC,eAAenB,EAAS,cAC7B8C,OAAO,IAET9C,EE8CgB+B,oBF7ChB/B,EEgEgBqC,oBF/DhBrC,EE6EgBwC,8BF5EhBxC,EE6FgB6C,oBAtLhB,IAAMV,OFqRA,SAAUlC,EAAQD,EAASM,GAEjC,YAGAY,QAAOC,eAAenB,EAAS,cAC7B8C,OAAO,IAGT9C,EAAQ+C,QGzRO,WACb,MAAIC,QAAOC,YACFA,YAAYC,MAGdC,KAAKD,QH8RR,SAAUjD,EAAQD,EAASM,GAEjC,YIhSe,SAAS8C,GAAcC,EAAIC,GAAqB,GAAfC,GAAeC,UAAApB,OAAA,OAAAH,KAAAuB,UAAA,GAAAA,UAAA,GAAN,KACnDC,QAG8B,mBAAvBT,QAAOU,YAChBD,EAAQ,GAAIC,aAAYJ,EAAKK,qBAAuBJ,YAEpDE,EAAQG,SAASC,YAAY,eAC7BJ,EAAMK,gBAAgBR,EAAKK,qBAAqB,GAAM,EAAMJ,IAI9DQ,EAAAC,SAASC,EAAEZ,GAAIa,QAAQZ,EAAMC,GAC7BF,EAAGc,cAAcV,GJsRnBvC,OAAOC,eAAenB,EAAS,cAC7B8C,OAAO,IAET9C,EAAQ+C,QItSgBK,CAVxB,IAAAW,GAAAzD,EAAA,KJgVM,SAAUL,EAAQD,EAASM,GAEjC,YAGAY,QAAOC,eAAenB,EAAS,cAC7B8C,OAAO,IAGT9C,EAAQ+C,QK/UO,SAAUf,GAA8B,GAArBoC,GAAqBZ,UAAApB,OAAA,OAAAH,KAAAuB,UAAA,IAAAA,UAAA,GAC/ClB,GAAiB,EAAA+B,EAAAtC,mBAAkBC,EAEzC,QAA6BC,KAAzBK,EAAeM,QAAwBN,EAAegC,OAAOlC,OAC/D,KAAM,IAAIF,OAAM,+CAGlB,EAAAqC,EAAAxB,SAAUT,EAAgB8B,GAjB5B,IAAAC,GAAA/D,EAAA,GACAkE,EAAAlE,EAAA,GLwWIiE,EAEJ,SAAgCE,GAAO,MAAOA,IAAOA,EAAIjD,WAAaiD,GAAQ1B,QAAS0B,IAF9CD,IAMnC,SAAUvE,EAAQD,EAASM,GAEjC,YAGAY,QAAOC,eAAenB,EAAS,cAC7B8C,OAAO,IAGT9C,EAAQ+C,QMjXO,SAAUT,GAAqC,GAArB8B,GAAqBZ,UAAApB,OAAA,OAAAH,KAAAuB,UAAA,IAAAA,UAAA,EAC5DlB,GAAeoC,aAAc,EACzBN,IACF9B,EAAeqC,SAAU,KNyXvB,SAAU1E,EAAQD,EAASM,GAEjC,YAGAY,QAAOC,eAAenB,EAAS,cAC7B8C,OAAO,IAGT9C,EAAQ+C,QOvYO,SAAUT,GAAgB,GAC/BsC,GAA2BtC,EAA3BsC,OAAQhC,EAAmBN,EAAnBM,MAAOZ,EAAYM,EAAZN,OAEvB,QAAeC,KAAX2C,EACF,KAAM,IAAI1C,OAAM,6DAGlB,QAAcD,KAAVW,EACF,OACEiC,MAAO,EACPC,aACEC,EAAG,EACHC,EAAG,GAELC,KACEC,gBAAajD,GACbkD,iBAAclD,IAEhBmD,QAAQ,EACRC,kBAAkB,EAClBC,SAAU,EACVC,OAAO,EACPC,OAAO,EACPC,gBAAaxD,GACbyD,WAAQzD,GACR0D,aAAU1D,GACV2D,UAAU,EAKd,IAAMC,GAAgB7D,EAAQ8D,aAAelD,EAAMmD,KAC7CC,EAAkBhE,EAAQiE,YAAcrD,EAAMsD,OAGpD,QACErB,MAHYsB,KAAKC,IAAIJ,EAAiBH,GAItCf,aACEC,EAAG,EACHC,EAAG,GAELC,KACEC,YAAatC,EAAMsC,YACnBC,aAAcvC,EAAMuC,cAEtBC,OAAQxC,EAAMwC,OACdC,kBAAkB,EAClBC,SAAU,EACVC,OAAO,EACPC,OAAO,EACPC,YAAa7C,EAAM6C,YACnBC,OAAQ9C,EAAM8C,OACdC,SAAU/C,EAAM+C,SAChBC,SAAUS,QAAQzD,EAAMgD,aPgZtB,SAAU3F,EAAQD,EAASM,GAEjC,YAGAY,QAAOC,eAAenB,EAAS,cAC7B8C,OAAO,GQhdT,IAAAwD,GAAAhG,EAAA,IACAiG,EAAAjG,EAAA,IRsdIkG,EAEJ,SAAgC/B,GAAO,MAAOA,IAAOA,EAAIjD,WAAaiD,GAAQ1B,QAAS0B,IAF5C8B,EAI3CvG,GAAQ+C,SQvdN0D,0BACAC,oCACAC,wBR6dI,SAAU1G,EAAQD,EAASM,GAEjC,YAGAY,QAAOC,eAAenB,EAAS,cAC7B8C,OAAO,IAGT9C,EAAQ+C,QS7dO,SAAUT,EAAgBsE,EAAS/B,GAChD,OAAuB5C,KAAnBK,EACF,KAAM,IAAIJ,OAAM,6EAElB,QAAgBD,KAAZ2E,EACF,KAAM,IAAI1E,OAAM,sEAGlB,IAAM2E,IAAY,EAAAC,EAAA/D,SAAmBT,EAAgBuC,EAErD+B,GAAQG,aAAaF,EAAUjG,EAAE,GAAIiG,EAAUjG,EAAE,GAAIiG,EAAUjG,EAAE,GAAIiG,EAAUjG,EAAE,GAAIiG,EAAUjG,EAAE,GAAIiG,EAAUjG,EAAE,IApBnH,IAAAoG,GAAA1G,EAAA,ITsfIwG,EAEJ,SAAgCrC,GAAO,MAAOA,IAAOA,EAAIjD,WAAaiD,GAAQ1B,QAAS0B,IAFrCuC,IAM5C,SAAU/G,EAAQD,EAASM,GAEjC,YA6CA,SAAS2G,GAAuBxC,GAAO,MAAOA,IAAOA,EAAIjD,WAAaiD,GAAQ1B,QAAS0B,GUniBvF,QAASyC,GAAQtE,EAAOuE,GAEtB,WAAwBlF,KAApBW,EAAMwE,WACJxE,EAAMwE,UAAUjC,eAAiBgC,EAASlC,IAAIE,cAC9CvC,EAAMwE,UAAUlC,cAAgBiC,EAASlC,IAAIC,aAC7CtC,EAAMwE,UAAUhC,SAAW+B,EAAS/B,OACjCxC,EAAMwE,UAAUC,WAIzB,EAAAC,EAAAvE,SAAYH,EAAOuE,EAASlC,IAAIC,YAAaiC,EAASlC,IAAIE,aAAcgC,EAAS/B,QACjFxC,EAAMwE,UAAUlC,YAAciC,EAASlC,IAAIC,YAC3CtC,EAAMwE,UAAUjC,aAAegC,EAASlC,IAAIE,aAC5CvC,EAAMwE,UAAUhC,OAAS+B,EAAS/B,OAE3BxC,EAAMwE,UAAUC,UAGzB,QAASE,GAAiBjF,EAAgBM,EAAOwB,GAC1C9B,EAAekF,eAAeC,eACjCnF,EAAekF,eAAeC,aAAe7D,SAAS8D,cAAc,UAGtE,IAAMD,GAAenF,EAAekF,eAAeC,YAInD,IAAgD,MAA5CnF,EAAe6E,SAASlC,IAAIC,aACmB,MAA7C5C,EAAe6E,SAASlC,IAAIE,eACO,IAAnC7C,EAAe6E,SAAS/B,QACxBxC,EAAM+E,WACN/E,EAAM+E,YAEV,MAAO/E,GAAM+E,WAIf,KAAyD,KAArD,EAAAC,EAAA7E,SAA0BT,EAAgBM,KAAoC,IAAhBwB,EAChE,MAAOqD,EAMLA,GAAaI,QAAUjF,EAAMiF,OAASJ,EAAaK,SAAWlF,EAAMkF,SACtE,EAAAC,EAAAhF,SAAuBT,EAAgBM,EAIzC,IAAIoF,IAAQ,EAAAC,EAAAlF,WACNmF,EAAWhB,EAAOtE,EAAON,EAAe6E,SAE9CvE,GAAMuF,MAAQvF,EAAMuF,UACpBvF,EAAMuF,MAAMC,qBAAsB,EAAAH,EAAAlF,WAAQiF,CAE1C,IAAMK,GAAmB/F,EAAekF,eAAea,iBACjDC,EAAsBhG,EAAekF,eAAec,mBAc1D,OAVI1F,GAAM2F,MACR,EAAAC,EAAAzF,SAAqCH,EAAOsF,EAAUG,EAAiBI,OAEvE,EAAAC,EAAA3F,SAAsCH,EAAOsF,EAAUG,EAAiBI,MAG1ET,GAAQ,EAAAC,EAAAlF,WACRuF,EAAoBK,aAAaN,EAAkB,EAAG,GACtDzF,EAAMuF,MAAMS,sBAAuB,EAAAX,EAAAlF,WAAQiF,EAEpCP,EAUF,QAASoB,GAAkBvG,EAAgB8B,GAChD,OAAuBnC,KAAnBK,EACF,KAAM,IAAIJ,OAAM,mEAGlB,IAAMU,GAAQN,EAAeM,KAE7B,QAAcX,KAAVW,EACF,KAAM,IAAIV,OAAM,gEAIlB,IAAM0E,GAAUtE,EAAesC,OAAOkE,WAAW,KAEjDlC,GAAQG,aAAa,EAAG,EAAG,EAAG,EAAG,EAAG,GAGpCH,EAAQmC,UAAY,QACpBnC,EAAQoC,SAAS,EAAG,EAAG1G,EAAesC,OAAOiD,MAAOvF,EAAesC,OAAOkD,QAG1ElB,EAAQqC,uBAAyB3G,EAAe6E,SAAS9B,iBACzDuB,EAAQsC,yBAA2BtC,EAAQqC,uBAG3C,EAAAE,EAAApG,SAA2BT,EAAgBsE,EAE3C,IAAIa,SAMFA,GAJEnF,EAAe8G,SAAW9G,EAAe8G,QAAQC,UACD,UAAlD/G,EAAe8G,QAAQC,SAASC,cAGjBC,EAAAxG,QAAMsG,SAASG,OAAOlH,GAItBiF,EAAgBjF,EAAgBM,EAAOwB,GAGxDwC,EAAQ6C,UAAUhC,EAAc,EAAG,EAAG7E,EAAMiF,MAAOjF,EAAMkF,OAAQ,EAAG,EAAGlF,EAAMiF,MAAOjF,EAAMkF,QAE1FxF,EAAekF,gBAAiB,EAAAkC,EAAA3G,SAAiBT,GAG5C,QAASqH,GAAeC,EAAOxF,GACpC,OAAcnC,KAAV2H,EACF,KAAM,IAAI1H,OAAM,uDAGlB,IAAMU,GAAQgH,EAAMhH,KAEpB,QAAcX,KAAVW,EACF,KAAM,IAAIV,OAAM,6DAIlBU,GAAM2F,MAAO,EACbqB,EAAMhF,OAAS2C,EAAgBqC,EAAOhH,EAAOwB,EAE7C,IAAMwC,GAAUgD,EAAMhF,OAAOkE,WAAW,KAGxClC,GAAQqC,uBAAyBW,EAAMzC,SAAS9B,iBAChDuB,EAAQsC,yBAA2BtC,EAAQqC,sBAE3CW,EAAMpC,gBAAiB,EAAAkC,EAAA3G,SAAiB6G,GVuW1C1I,OAAOC,eAAenB,EAAS,cAC7B8C,OAAO,IAET9C,EU5agB6I,mBV6ahB7I,EUhYgB2J,eAvIhB,IAAAE,GAAAvJ,EAAA,GV2gBI2H,EAAQhB,EAAuB4C,GU1gBnCC,EAAAxJ,EAAA,GV8gBIgH,EAAgBL,EAAuB6C,GU7gB3CC,EAAAzJ,EAAA,IVihBIoI,EAA0CzB,EAAuB8C,GUhhBrEC,EAAA1J,EAAA,IVohBIkI,EAAyCvB,EAAuB+C,GUnhBpEC,EAAA3J,EAAA,GVuhBI6I,EAA+BlC,EAAuBgD,GUthB1DC,EAAA5J,EAAA,IV0hBIiJ,EAAUtC,EAAuBiD,GUzhBrCC,EAAA7J,EAAA,IV6hBIsH,EAA8BX,EAAuBkD,GU5hBzDC,EAAA9J,EAAA,IVgiBIyH,EAA2Bd,EAAuBmD,GU/hBtDC,EAAA/J,EAAA,IVmiBIoJ,EAAqBzC,EAAuBoD,IAqJ1C,SAAUpK,EAAQD,EAASM,GAEjC,YA4CA,SAAS2G,GAAuBxC,GAAO,MAAOA,IAAOA,EAAIjD,WAAaiD,GAAQ1B,QAAS0B,GAzCvFvD,OAAOC,eAAenB,EAAS,cAC7B8C,OAAO,IAGT9C,EAAQ+C,QW5rBO,SAAUH,EAAOsC,EAAaC,EAAcC,EAAQK,EAAaC,GAC9E,GAAM4E,GAAgB1H,EAAM0H,cACtBC,EAAgB3H,EAAM2H,cACtBC,EAASrE,KAAKC,IAAImE,EAAe,EAEvC,QAAwBtI,KAApBW,EAAMwE,UAAyB,CACjC,GAAMhF,GAASkI,EAAgBE,EAAS,CAExC5H,GAAMwE,aACNxE,EAAMwE,UAAUC,SAAW,GAAIoD,mBAAkBrI,GAGnD,GAAMsI,GAAM9H,EAAMwE,UAAUC,SACtBsD,GAAS,EAAAC,EAAA7H,SAAeH,EAAMiI,MAAOjI,EAAMkI,UAAWrF,GACtDsF,GAAS,EAAAC,EAAAjI,SAAUmC,EAAaC,EAAcO,EAEpD,KAAe,IAAXN,EACF,IAAK,GAAI6F,GAAcV,EAAeU,GAAeX,EAAeW,IAClEP,EAAIO,GAAgBT,GAAW,IAAMO,EAAOJ,EAAOM,QAGrD,KAAK,GAAIA,GAAcV,EAAeU,GAAeX,EAAeW,IAClEP,EAAIO,GAAgBT,GAAWO,EAAOJ,EAAOM,GAIjD,OAAOP,GA1CT,IAAAQ,GAAA5K,EAAA,IX2uBIsK,EAAmB3D,EAAuBiE,GW1uB9CC,EAAA7K,EAAA,IX8uBI0K,EAAc/D,EAAuBkE,IAMnC,SAAUlL,EAAQD,EAASM,GAEjC,YAGAY,QAAOC,eAAenB,EAAS,cAC7B8C,OAAO,IAGT9C,EAAQ+C,QY5vBO,SAAUT,GAGvB,OAAO,EAAAwE,EAAA/D,SAAmBT,GAL5B,IAAA0E,GAAA1G,EAAA,IZswBIwG,EAEJ,SAAgCrC,GAAO,MAAOA,IAAOA,EAAIjD,WAAaiD,GAAQ1B,QAAS0B,IAFrCuC,IAM5C,SAAU/G,EAAQD,EAASM,GAEjC,YAGAY,QAAOC,eAAenB,EAAS,cAC7B8C,OAAO,IAGT9C,EAAQ+C,QarxBO,SAAUT,GACvB,GAAMG,GAAUH,EAAeM,MAAMH,QAC/B0E,EAAW7E,EAAe6E,QAehC,OAbA7E,GAAekF,eAAe4D,oBAAsB3I,EACpDH,EAAekF,eAAe6D,sBAC5BlG,aAAcgC,EAASlC,IAAIE,aAC3BD,YAAaiC,EAASlC,IAAIC,YAC1BE,OAAQ+B,EAAS/B,OACjBE,SAAU6B,EAAS7B,SACnBC,MAAO4B,EAAS5B,MAChBC,MAAO2B,EAAS3B,MAChBC,YAAa0B,EAAS1B,YACtBC,OAAQyB,EAASzB,OACjBC,SAAUwB,EAASxB,UAGdrD,EAAekF,iBb0xBlB,SAAUvH,EAAQD,EAASM,GAEjC,YAGAY,QAAOC,eAAenB,EAAS,cAC7B8C,OAAO,IAGT9C,EAAQ+C,QcpzBO,SAAUT,EAAgBM,GACvC,GAAMwI,GAAsB9I,EAAekF,eAAe4D,oBACpDC,EAAuB/I,EAAekF,eAAe6D,oBAE3D,OACEzI,GAAMH,UAAY2I,IACjBC,GACDA,EAAqBlG,eAAiB7C,EAAe6E,SAASlC,IAAIE,cAClEkG,EAAqBnG,cAAgB5C,EAAe6E,SAASlC,IAAIC,aACjEmG,EAAqBjG,SAAW9C,EAAe6E,SAAS/B,QACxDiG,EAAqB5F,cAAgBnD,EAAe6E,SAAS1B,aAC7D4F,EAAqB3F,SAAWpD,EAAe6E,SAASzB,QACxD2F,EAAqB1F,WAAarD,EAAe6E,SAASxB,WdizBxD,SAAU1F,EAAQD,EAASM,GAEjC,YAiBA,SAAS2G,GAAuBxC,GAAO,MAAOA,IAAOA,EAAIjD,WAAaiD,GAAQ1B,QAAS0B,GAdvFvD,OAAOC,eAAenB,EAAS,cAC7B8C,OAAO,Gen0BT,IAAAwI,GAAAhL,EAAA,IACAiL,EAAAjL,EAAA,Ify0BIkL,EAA4BvE,EAAuBsE,Gex0BvDE,EAAAnL,EAAA,If40BIoL,EAAiBzE,EAAuBwE,Ge10BtCE,GACJC,kCACAvC,UACEG,gBACAqC,4BACAtE,kCACAuE,qCAEFC,uBAGF7K,QAAOC,eAAewK,EAAK,sBACzBtK,YAAY,EACZD,cAAc,EACdE,IAAK,iBAAAgK,GAAAU,sBfm1BPhM,EAAQ+C,Qeh1BO4I,Gfo1BT,SAAU1L,EAAQD,EAASM,GAEjC,YASA,SAAS2L,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCANhHlL,OAAOC,eAAenB,EAAS,cAC7B8C,OAAO,GAGT,IAAIuJ,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI/L,GAAI,EAAGA,EAAI+L,EAAMpK,OAAQ3B,IAAK,CAAE,GAAIgM,GAAaD,EAAM/L,EAAIgM,GAAWpL,WAAaoL,EAAWpL,aAAc,EAAOoL,EAAWrL,cAAe,EAAU,SAAWqL,KAAYA,EAAWC,UAAW,GAAMxL,OAAOC,eAAeoL,EAAQE,EAAWE,IAAKF,IAAiB,MAAO,UAAUN,EAAaS,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBH,EAAYxK,UAAWiL,GAAiBC,GAAaP,EAAiBH,EAAaU,GAAqBV,MgBl3B1hBW,EhBs3BY,WgBr3BhB,QAAAA,KAAeb,EAAA7L,KAAA0M,GACb1M,KAAK2M,ahBs6BP,MA3CAV,GAAaS,IACXH,IAAK,mBACL7J,MAAO,SgB13BSQ,EAAM0J,GAChB1J,IAAQlD,MAAK2M,YACjB3M,KAAK2M,UAAUzJ,OAGjBlD,KAAK2M,UAAUzJ,GAAMf,KAAKyK,MhB63B1BL,IAAK,sBACL7J,MAAO,SgB33BYQ,EAAM0J,GACzB,GAAM1J,IAAQlD,MAAK2M,UAMnB,IAAK,GAFCE,GAAQ7M,KAAK2M,UAAUzJ,GAEpB7C,EAAI,EAAGC,EAAIuM,EAAM7K,OAAQ3B,EAAIC,EAAGD,IACvC,GAAIwM,EAAMxM,KAAOuM,EAGf,WAFAC,GAAMC,OAAOzM,EAAG,MhBk4BpBkM,IAAK,gBACL7J,MAAO,SgB53BMW,GACb,KAAMA,EAAMH,OAAQlD,MAAK2M,WACvB,OAAO,CAKT,KAAK,GAFCE,GAAQ7M,KAAK2M,UAAUtJ,EAAMH,MAE1B7C,EAAI,EAAGC,EAAIuM,EAAM7K,OAAQ3B,EAAIC,EAAGD,IACvCwM,EAAMxM,GAAGE,KAAKP,KAAMqD,EAGtB,QAAQA,EAAM0J,qBhBg4BTL,KgB33BHM,EAAS,GAAIN,EhBg4BnB9M,GAAQ+C,QgB93BOqK,GhBk4BT,SAAUnN,EAAQD,EAASM,GAEjC,YAiCA,SAAS2G,GAAuBxC,GAAO,MAAOA,IAAOA,EAAIjD,WAAaiD,GAAQ1B,QAAS0B,GiBt8BhF,QAAS4I,GAAsB/K,EAAgB8B,GACpD,OAAuBnC,KAAnBK,EACF,KAAM,IAAIJ,OAAM,4DAGlB,IAAMU,GAAQN,EAAeM,KAE7B,QAAcX,KAAVW,EACF,KAAM,IAAIV,OAAM,yDAIlB,IAAM0E,GAAUtE,EAAesC,OAAOkE,WAAW,MAC3ClE,EAAStC,EAAesC,MAE9BgC,GAAQG,aAAa,EAAG,EAAG,EAAG,EAAG,EAAG,GAGpCH,EAAQmC,UAAY,QACpBnC,EAAQoC,SAAS,EAAG,EAAGpE,EAAOiD,MAAOjD,EAAOkD,QAG5ClB,EAAQqC,uBAAyB3G,EAAe6E,SAAS9B,iBACzDuB,EAAQsC,yBAA2BtC,EAAQqC,qBAE3C,IACMqE,GAAa1G,EAAQ2G,aAAa,EAAG,EAAG3I,EAAOiD,MAAOjD,EAAOkD,QAG/DE,GAAQ,EAAAC,EAAAlF,WACN2H,GAAM,EAAA8C,EAAAzK,SAAOH,EAAON,EAAe6E,SAAU/C,EAEnDxB,GAAMuF,MAAQvF,EAAMuF,UACpBvF,EAAMuF,MAAMC,qBAAsB,EAAAH,EAAAlF,WAAQiF,GAIxC,EAAAyF,EAAA1K,SAAiCH,EAAO8H,EAAK4C,EAAW7E,MAK1DT,GAAQ,EAAAC,EAAAlF,WACR6D,EAAQ+B,aAAa2E,EAAY,EAAG,GACpC1K,EAAMuF,MAAMS,sBAAuB,EAAAX,EAAAlF,WAAQiF,EAE3C1F,EAAekF,gBAAiB,EAAAkC,EAAA3G,SAAiBT,GAY5C,QAASoL,GAAmB9D,EAAOxF,GAAsCZ,UAAApB,OAAA,OAAAH,KAAAuB,UAAA,IAAAA,UAAA,EAC9E,QAAcvB,KAAV2H,EACF,KAAM,IAAI1H,OAAM,2DAKlB,QAAcD,KAFA2H,EAAMhH,MAGlB,KAAM,IAAIV,OAAM,iEAKlB,IAAM0E,GAAUgD,EAAMhF,OAAOkE,WAAW,KAGxClC,GAAQqC,uBAAyBW,EAAMzC,SAAS9B,iBAChDuB,EAAQsC,yBAA2BtC,EAAQqC,sBAE3CW,EAAMpC,gBAAiB,EAAAkC,EAAA3G,SAAiB6G,GjB21B1C1I,OAAOC,eAAenB,EAAS,cAC7B8C,OAAO,IAET9C,EiB36BgBqN,uBjB46BhBrN,EiBl3BgB0N,mBAxEhB,IAAAC,GAAArN,EAAA,IjB87BImN,EAAqCxG,EAAuB0G,GiB77BhEC,EAAAtN,EAAA,IACAuJ,GjBg8B6C5C,EAAuB2G,GiBh8BpEtN,EAAA,IjBo8BI2H,EAAQhB,EAAuB4C,GiBn8BnCK,EAAA5J,EAAA,IACAuN,GjBs8Bc5G,EAAuBiD,GiBt8BrC5J,EAAA,KjB08BIkN,EAAWvG,EAAuB4G,GiBz8BtCxD,EAAA/J,EAAA,IjB68BIoJ,EAAqBzC,EAAuBoD,IA+F1C,SAAUpK,EAAQD,EAASM,GAEjC,YkBnjCA,SAASwN,GAAcd,GACrBhK,OAAO+K,WAAWf,EAAU,IAAO,IlBqjCrC9L,OAAOC,eAAenB,EAAS,cAC7B8C,OAAO,IAGT9C,EAAQ+C,QkB/iCO,SAAUiK,GACvB,MAAOhK,QAAOgL,sBAAsBhB,IAClChK,OAAOiL,4BAA4BjB,IACnChK,OAAOkL,yBAAyBlB,IAChChK,OAAOmL,uBAAuBnB,IAC9BhK,OAAOoL,wBAAwBpB,IAC/Bc,EAAad,KlB2jCX,SAAU/M,EAAQD,EAASM,GAEjC,YAGAY,QAAOC,eAAenB,EAAS,cAC7B8C,OAAO,IAGT9C,EAAQ+C,QmBnkCO,SAAUH,EAAO8H,EAAK2D,GACnC,GAAIrG,IAAQ,EAAAC,EAAAlF,WACNuL,EAAY1L,EAAM2L,cAExB3L,GAAMuF,MAAMqG,sBAAuB,EAAAvG,EAAAlF,WAAQiF,CAE3C,IAAMyG,GAAYH,EAAUlM,OACtBmI,EAAgB3H,EAAM2H,cACxBmE,EAAuB,EACvBC,EAAuB,CAQ3B,IADA3G,GAAQ,EAAAC,EAAAlF,WACJuL,YAAqBM,YACvB,GAAIrE,EAAgB,EAClB,KAAOoE,EAAuBF,GAC5BJ,EAAoBK,GAAwBhE,EAAI4D,EAAUK,MAA4BpE,GACtFmE,GAAwB,MAG1B,MAAOC,EAAuBF,GAC5BJ,EAAoBK,GAAwBhE,EAAI4D,EAAUK,MAC1DD,GAAwB,MAGvB,IAAIJ,YAAqBO,aAC9B,KAAOF,EAAuBF,GAC5BJ,EAAoBK,GAAwBhE,EAAI4D,EAAUK,MAC1DD,GAAwB,MAErB,IAAInE,EAAgB,EACzB,KAAOoE,EAAuBF,GAC5BJ,EAAoBK,GAAwBhE,EAAI4D,EAAUK,MAA4BpE,GACtFmE,GAAwB,MAG1B,MAAOC,EAAuBF,GAC5BJ,EAAoBK,GAAwBhE,EAAI4D,EAAUK,MAC1DD,GAAwB,CAI5B9L,GAAMuF,MAAM2G,0CAA2C,EAAA7G,EAAAlF,WAAQiF,EAhEjE,IAAA6B,GAAAvJ,EAAA,GnBuoCI2H,EAEJ,SAAgCxD,GAAO,MAAOA,IAAOA,EAAIjD,WAAaiD,GAAQ1B,QAAS0B,IAFpDoF,IAM7B,SAAU5J,EAAQD,EAASM,GAEjC,YAGAY,QAAOC,eAAenB,EAAS,cAC7B8C,OAAO,IAGT9C,EAAQ+C,QoBzoCO,SAAUH,EAAO8H,EAAK2D,GAEnC,GAAIrG,IAAQ,EAAAC,EAAAlF,WACNuL,EAAY1L,EAAM2L,cAExB3L,GAAMuF,MAAMqG,sBAAuB,EAAAvG,EAAAlF,WAAQiF,CAE3C,IAAMuC,GAAgB3H,EAAM2H,cACxBmE,EAAuB,EACvBC,EAAuB,EACrBF,EAAYH,EAAUlM,MAK5B,IADA4F,GAAQ,EAAAC,EAAAlF,WACJwH,EAAgB,EAClB,KAAOoE,EAAuBF,GAC5BJ,EAAoBK,KAA0BhE,EAAI4D,EAAUK,MAA4BpE,GACxF8D,EAAoBK,KAA0BhE,EAAI4D,EAAUK,MAA4BpE,GACxF8D,EAAoBK,GAAwBhE,EAAI4D,EAAUK,IAA0BpE,GACpFoE,GAAwB,EACxBD,GAAwB,MAG1B,MAAOC,EAAuBF,GAC5BJ,EAAoBK,KAA0BhE,EAAI4D,EAAUK,MAC5DN,EAAoBK,KAA0BhE,EAAI4D,EAAUK,MAC5DN,EAAoBK,GAAwBhE,EAAI4D,EAAUK,IAC1DA,GAAwB,EACxBD,GAAwB,CAG5B9L,GAAMuF,MAAM2G,0CAA2C,EAAA7G,EAAAlF,WAAQiF,EA7CjE,IAAA6B,GAAAvJ,EAAA,GpB2rCI2H,EAEJ,SAAgCxD,GAAO,MAAOA,IAAOA,EAAIjD,WAAaiD,GAAQ1B,QAAS0B,IAFpDoF,IAM7B,SAAU5J,EAAQD,EAASM,GAEjC,YAeA,SAAS2G,GAAuBxC,GAAO,MAAOA,IAAOA,EAAIjD,WAAaiD,GAAQ1B,QAAS0B,GqBvsCvF,QAASsK,GAA0CnM,EAAOsF,EAAUmG,GAClE,GAAIrG,IAAQ,EAAAC,EAAAlF,WACNuL,EAAY1L,EAAM2L,cAExB3L,GAAMuF,MAAMqG,sBAAuB,EAAAvG,EAAAlF,WAAQiF,CAE3C,IAAMyG,GAAYH,EAAUlM,OACtBmI,EAAgB3H,EAAM2H,cACxBmE,EAAuB,EACvBC,EAAuB,EACvBpG,SACAyG,QAUJ,IARAhH,GAAQ,EAAAC,EAAAlF,WAGNiM,EADE9G,YAAoBqB,GAAAxG,QAAO4D,YACtBuB,EAAS+G,MAET/G,EAGLqC,EAAgB,EAClB,KAAOoE,EAAuBF,GAC5BlG,EAAOyG,EAAKV,EAAUK,MAA4BpE,GAClD8D,EAAoBK,KAA0BnG,EAAK,GACnD8F,EAAoBK,KAA0BnG,EAAK,GACnD8F,EAAoBK,KAA0BnG,EAAK,GACnD8F,EAAoBK,KAA0BnG,EAAK,OAGrD,MAAOoG,EAAuBF,GAC5BlG,EAAOyG,EAAKV,EAAUK,MACtBN,EAAoBK,KAA0BnG,EAAK,GACnD8F,EAAoBK,KAA0BnG,EAAK,GACnD8F,EAAoBK,KAA0BnG,EAAK,GACnD8F,EAAoBK,KAA0BnG,EAAK,EAIvD3F,GAAMuF,MAAM2G,0CAA2C,EAAA7G,EAAAlF,WAAQiF,ErBopCjE9G,OAAOC,eAAenB,EAAS,cAC7B8C,OAAO,GqBvsCT,IAAAoH,GAAA5J,EAAA,GrB4sCIiJ,EAAUtC,EAAuBiD,GqB3sCrCL,EAAAvJ,EAAA,GrB+sCI2H,EAAQhB,EAAuB4C,EAsDnC7J,GAAQ+C,QqBjtCOgM,GrBqtCT,SAAU9O,EAAQD,EAASM,GAEjC,YAeA,SAAS2G,GAAuBxC,GAAO,MAAOA,IAAOA,EAAIjD,WAAaiD,GAAQ1B,QAAS0B,GsB/wCvF,QAASyK,GAAgDtM,EAAOuM,EAAcjH,EAAUmG,GACtF,GAAIrG,IAAQ,EAAAC,EAAAlF,WACNuL,EAAY1L,EAAM2L,cAExB3L,GAAMuF,MAAMqG,sBAAuB,EAAAvG,EAAAlF,WAAQiF,CAE3C,IAAMyG,GAAYH,EAAUlM,OACtBmI,EAAgB3H,EAAM2H,cACxBmE,EAAuB,EACvBC,EAAuB,EACvBS,SACA7G,SACAyG,QAUJ,IARAhH,GAAQ,EAAAC,EAAAlF,WAGNiM,EADE9G,YAAoBqB,GAAAxG,QAAO4D,YACtBuB,EAAS+G,MAET/G,EAGLqC,EAAgB,EAClB,KAAOoE,EAAuBF,GAC5BW,EAAYD,EAAab,EAAUK,MAA4BpE,GAC/DhC,EAAOyG,EAAKI,GACZf,EAAoBK,KAA0BnG,EAAK,GACnD8F,EAAoBK,KAA0BnG,EAAK,GACnD8F,EAAoBK,KAA0BnG,EAAK,GACnD8F,EAAoBK,KAA0BnG,EAAK,OAGrD,MAAOoG,EAAuBF,GAC5BW,EAAYD,EAAab,EAAUK,MACnCpG,EAAOyG,EAAKI,GACZf,EAAoBK,KAA0BnG,EAAK,GACnD8F,EAAoBK,KAA0BnG,EAAK,GACnD8F,EAAoBK,KAA0BnG,EAAK,GACnD8F,EAAoBK,KAA0BnG,EAAK,EAIvD3F,GAAMuF,MAAM2G,0CAA2C,EAAA7G,EAAAlF,WAAQiF,EtBytCjE9G,OAAOC,eAAenB,EAAS,cAC7B8C,OAAO,GsBhxCT,IAAAoH,GAAA5J,EAAA,GtBqxCIiJ,EAAUtC,EAAuBiD,GsBpxCrCL,EAAAvJ,EAAA,GtBwxCI2H,EAAQhB,EAAuB4C,EA0DnC7J,GAAQ+C,QsB1xCOmM,GtB8xCT,SAAUjP,EAAQD,EAASM,GAEjC,YAGAY,QAAOC,eAAenB,EAAS,cAC7B8C,OAAO,IAGT9C,EAAQ+C,QuBv1CO,SAAUT,GAA2B,GAAXuC,GAAWrB,UAAApB,OAAA,OAAAH,KAAAuB,UAAA,GAAAA,UAAA,GAAH,EAEzCqD,EAAY,GAAAwI,GAAAC,SAElBzI,GAAU0I,WAAWjN,EAAesC,OAAOiD,MAAQ,GAAIvF,EAAesC,OAAOkD,OAAS,EAGtF,IAAM0H,GAAQlN,EAAe6E,SAAS7B,QAExB,KAAVkK,GACF3I,EAAU4I,OAAOD,EAAQrJ,KAAKuJ,GAAK,IAIrC,IAAIC,GAAarN,EAAe6E,SAAStC,MACrC+K,EAActN,EAAe6E,SAAStC,KAEtCvC,GAAeM,MAAMiN,gBAAkBvN,EAAeM,MAAMkN,mBAC9DH,GAAerN,EAAeM,MAAMkN,mBAAqBxN,EAAeM,MAAMiN,gBACrEvN,EAAeM,MAAMkN,mBAAqBxN,EAAeM,MAAMiN,kBACxED,GAAgBtN,EAAeM,MAAMiN,gBAAkBvN,EAAeM,MAAMkN,oBAE9EjJ,EAAUhC,MAAM8K,EAAYC,GAGd,IAAVJ,GACF3I,EAAU4I,QAAQD,EAAQrJ,KAAKuJ,GAAK,KAItC7I,EAAU0I,UAAUjN,EAAe6E,SAASrC,YAAYC,EAAGzC,EAAe6E,SAASrC,YAAYE,GAGjF,IAAVwK,GACF3I,EAAU4I,OAAOD,EAAQrJ,KAAKuJ,GAAK,IAGrC,IAAMK,IAAUzN,EAAe6E,SAAS5B,OAAS,EAAI,GAAKV,EACpDmL,GAAU1N,EAAe6E,SAAS3B,OAAS,EAAI,GAAKX,CAI1D,OAFAgC,GAAUhC,MAAMkL,EAAQC,GAEjBnJ,EAnDT,IAAAwI,GAAA/O,EAAA,KvBm5CM,SAAUL,EAAQD,EAASM,GAEjC,YAqCA,SAAS2G,GAAuBxC,GAAO,MAAOA,IAAOA,EAAIjD,WAAaiD,GAAQ1B,QAAS0B,GwBl7CvF,QAAS8C,GAAiBjF,EAAgBM,EAAOwB,GAC1C9B,EAAekF,eAAeC,eACjCnF,EAAekF,eAAeC,aAAe7D,SAAS8D,cAAc,UAGtE,IAAMD,GAAenF,EAAekF,eAAeC,aAG/C9B,EAAWrD,EAAe6E,SAASxB,UAAYrD,EAAe8G,QAAQzD,QAM1E,IAJIA,GAAiC,gBAAbA,KACtBA,EAAW4D,EAAAxG,QAAO0D,YAAYd,KAG3BA,EACH,KAAM,IAAIzD,OAAM,2CAGlB,IAAM+N,GAAatK,EAASuK,OAE5B,KAAyD,KAArD,EAAAtI,EAAA7E,SAA0BT,EAAgBM,KAAoC,IAAhBwB,GAChE9B,EAAekF,eAAeyI,aAAeA,EAC7C,MAAOxI,EAMLA,GAAaI,QAAUjF,EAAMiF,OAASJ,EAAaK,SAAWlF,EAAMkF,SACtE,EAAAC,EAAAhF,SAAuBT,EAAgBM,EAIzC,IAAIoF,IAAQ,EAAAC,EAAAlF,UAEPT,GAAekF,eAAeU,WAAY9D,GAC7C9B,EAAekF,eAAeyI,aAAeA,IAC7C3N,EAAekF,eAAeU,SAAWvC,EAASwK,oBAClD7N,EAAekF,eAAeyI,WAAaA,GAG7CrN,EAAMuF,MAAQvF,EAAMuF,UACpBvF,EAAMuF,MAAMC,qBAAsB,EAAAH,EAAAlF,WAAQiF,CAE1C,IAAME,GAAW5F,EAAekF,eAAeU,SACzCG,EAAmB/F,EAAekF,eAAea,iBACjDC,EAAsBhG,EAAekF,eAAec,mBAQ1D,QANA,EAAA8H,EAAArN,SAAyCH,EAAOsF,EAAUG,EAAiBI,MAE3ET,GAAQ,EAAAC,EAAAlF,WACRuF,EAAoBK,aAAaN,EAAkB,EAAG,GACtDzF,EAAMuF,MAAMS,sBAAuB,EAAAX,EAAAlF,WAAQiF,EAEpCP,EAUF,QAAS4I,GAAqB/N,EAAgB8B,GACnD,OAAuBnC,KAAnBK,EACF,KAAM,IAAIJ,OAAM,sEAGlB,IAAMU,GAAQN,EAAeM,KAE7B,QAAcX,KAAVW,EACF,KAAM,IAAIV,OAAM,mEAIlB,IAAM0E,GAAUtE,EAAesC,OAAOkE,WAAW,KAEjDlC,GAAQG,aAAa,EAAG,EAAG,EAAG,EAAG,EAAG,GAGpCH,EAAQmC,UAAY,QACpBnC,EAAQoC,SAAS,EAAG,EAAG1G,EAAesC,OAAOiD,MAAOvF,EAAesC,OAAOkD,QAG1ElB,EAAQqC,uBAAyB3G,EAAe6E,SAAS9B,iBACzDuB,EAAQsC,yBAA2BtC,EAAQqC,uBAG3C,EAAAE,EAAApG,SAA2BT,EAAgBsE,EAK3C,IAAMa,GAAeF,EAAgBjF,EAAgBM,EAAOwB,GACpDyD,EAAkBjF,EAAlBiF,MAAOC,EAAWlF,EAAXkF,MAEflB,GAAQ6C,UAAUhC,EAAc,EAAG,EAAGI,EAAOC,EAAQ,EAAG,EAAGD,EAAOC,GAElExF,EAAekF,gBAAiB,EAAAkC,EAAA3G,SAAiBT,GAU5C,QAASgO,GAAkB1G,EAAOxF,GACvC,OAAcnC,KAAV2H,EACF,KAAM,IAAI1H,OAAM,0DAGlB,IAAMU,GAAQgH,EAAMhH,KAEpB,QAAcX,KAAVW,EACF,KAAM,IAAIV,OAAM,gEAGlB0H,GAAMhF,OAAS2C,EAAgBqC,EAAOhH,EAAOwB,EAE7C,IAAMwC,GAAUgD,EAAMhF,OAAOkE,WAAW,KAGxClC,GAAQqC,uBAAyBW,EAAMzC,SAAS9B,iBAChDuB,EAAQsC,yBAA2BtC,EAAQqC,sBAE3CW,EAAMpC,gBAAiB,EAAAkC,EAAA3G,SAAiB6G,GxBgxC1C1I,OAAOC,eAAenB,EAAS,cAC7B8C,OAAO,IAET9C,EwBn1CgBqQ,sBxBo1ChBrQ,EwBvyCgBsQ,kBArHhB,IAAArG,GAAA3J,EAAA,GxBg6CI6I,EAA+BlC,EAAuBgD,GwB/5C1DJ,EAAAvJ,EAAA,GxBm6CI2H,EAAQhB,EAAuB4C,GwBl6CnCO,EAAA9J,EAAA,IxBs6CIyH,EAA2Bd,EAAuBmD,GwBr6CtDC,EAAA/J,EAAA,IxBy6CIoJ,EAAqBzC,EAAuBoD,GwBx6ChDF,EAAA7J,EAAA,IxB46CIsH,EAA8BX,EAAuBkD,GwB36CzDoG,EAAAjQ,EAAA,IxB+6CI8P,EAA6CnJ,EAAuBsJ,GwB96CxErG,EAAA5J,EAAA,GxBk7CIiJ,EAAUtC,EAAuBiD,IAyI/B,SAAUjK,EAAQD,EAASM,GAEjC,YAGAY,QAAOC,eAAenB,EAAS,cAC7B8C,OAAO,IAGT9C,EAAQ+C,QyB1kDO,SAAUT,EAAgBM,GACvC4N,QAAQC,IAAI,yBACZ,IAAMhJ,GAAenF,EAAekF,eAAeC,YAGnDA,GAAaI,MAAQjF,EAAMiF,MAC3BJ,EAAaK,OAASlF,EAAMkF,MAE5B,IAAM4I,GAAgBjJ,EAAaqB,WAAW,KAI9C4H,GAAc3H,UAAY,QAC1B2H,EAAc1H,SAAS,EAAG,EAAGvB,EAAaI,MAAOJ,EAAaK,OAE9D,IAAMO,GAAmBqI,EAAcnD,aAAa,EAAG,EAAG3K,EAAMiF,MAAOjF,EAAMkF,OAE7ExF,GAAekF,eAAec,oBAAsBoI,EACpDpO,EAAekF,eAAea,iBAAmBA,IzB+kD7C,SAAUpI,EAAQD,EAASM,GAEjC,YAyCA,SAAS2G,GAAuBxC,GAAO,MAAOA,IAAOA,EAAIjD,WAAaiD,GAAQ1B,QAAS0B,G0BnoDvF,QAAS8C,GAAiBjF,EAAgBM,EAAOwB,GAC1C9B,EAAekF,eAAeC,eACjCnF,EAAekF,eAAeC,aAAe7D,SAAS8D,cAAc,UAGtE,IAAMD,GAAenF,EAAekF,eAAeC,aAG/C9B,EAAWrD,EAAe6E,SAASxB,UAAYrD,EAAe8G,QAAQzD,QAM1E,IAJIA,GAAiC,gBAAbA,KACtBA,EAAW4D,EAAAxG,QAAO0D,YAAYd,KAG3BA,EACH,KAAM,IAAIzD,OAAM,8CAGlB,IAAM+N,GAAatK,EAASuK,OAE5B,KAAyD,KAArD,EAAAtI,EAAA7E,SAA0BT,EAAgBM,KAAoC,IAAhBwB,GAChE9B,EAAekF,eAAeyI,aAAeA,EAC7C,MAAOxI,EAMLA,GAAaI,QAAUjF,EAAMiF,OAASJ,EAAaK,SAAWlF,EAAMkF,SACtE,EAAAC,EAAAhF,SAAuBT,EAAgBM,EAIzC,IAAIoF,IAAQ,EAAAC,EAAAlF,UAEPT,GAAekF,eAAeU,WAAY9D,GAC1C9B,EAAekF,eAAeyI,aAAeA,IAChDtK,EAASgL,kBAAkB,KAC3BrO,EAAekF,eAAeU,SAAWvC,EAASwK,oBAClD7N,EAAekF,eAAeyI,WAAaA,EAG7C,IAAMvF,IAAM,EAAA8C,EAAAzK,SAAOH,EAAON,EAAe6E,SAAU/C,EAEnDxB,GAAMuF,MAAQvF,EAAMuF,UACpBvF,EAAMuF,MAAMC,qBAAsB,EAAAH,EAAAlF,WAAQiF,CAE1C,IAAME,GAAW5F,EAAekF,eAAeU,SACzCG,EAAmB/F,EAAekF,eAAea,iBACjDC,EAAsBhG,EAAekF,eAAec,mBAQ1D,QANA,EAAAsI,EAAA7N,SAA+CH,EAAO8H,EAAKxC,EAAUG,EAAiBI,MAEtFT,GAAQ,EAAAC,EAAAlF,WACRuF,EAAoBK,aAAaN,EAAkB,EAAG,GACtDzF,EAAMuF,MAAMS,sBAAuB,EAAAX,EAAAlF,WAAQiF,EAEpCP,EAUF,QAASoJ,GAAwBvO,EAAgB8B,GACtD,OAAuBnC,KAAnBK,EACF,KAAM,IAAIJ,OAAM,4DAGlB,IAAMU,GAAQN,EAAeM,KAE7B,QAAcX,KAAVW,EACF,KAAM,IAAIV,OAAM,yDAIlB,IAAM0E,GAAUtE,EAAesC,OAAOkE,WAAW,KAEjDlC,GAAQG,aAAa,EAAG,EAAG,EAAG,EAAG,EAAG,GAGpCH,EAAQmC,UAAY,QACpBnC,EAAQoC,SAAS,EAAG,EAAG1G,EAAesC,OAAOiD,MAAOvF,EAAesC,OAAOkD,QAG1ElB,EAAQqC,uBAAyB3G,EAAe6E,SAAS9B,iBACzDuB,EAAQsC,yBAA2BtC,EAAQqC,uBAG3C,EAAAE,EAAApG,SAA2BT,EAAgBsE,EAM3C,IAAMa,GAAeF,EAAgBjF,EAAgBM,EAAOwB,GACpDyD,EAAkBjF,EAAlBiF,MAAOC,EAAWlF,EAAXkF,MAEflB,GAAQ6C,UAAUhC,EAAc,EAAG,EAAGI,EAAOC,EAAQ,EAAG,EAAGD,EAAOC,GAElExF,EAAekF,gBAAiB,EAAAkC,EAAA3G,SAAiBT,GAU5C,QAASwO,GAAqBlH,EAAOxF,GAC1C,OAAcnC,KAAV2H,EACF,KAAM,IAAI1H,OAAM,6DAGlB,IAAMU,GAAQgH,EAAMhH,KAEpB,QAAcX,KAAVW,EACF,KAAM,IAAIV,OAAM,mEAGlB0H,GAAMhF,OAAS2C,EAAgBqC,EAAOhH,EAAOwB,EAE7C,IAAMwC,GAAUgD,EAAMhF,OAAOkE,WAAW,KAGxClC,GAAQqC,uBAAyBW,EAAMzC,SAAS9B,iBAChDuB,EAAQsC,yBAA2BtC,EAAQqC,sBAE3CW,EAAMpC,gBAAiB,EAAAkC,EAAA3G,SAAiB6G,G1By9C1C1I,OAAOC,eAAenB,EAAS,cAC7B8C,OAAO,IAET9C,E0B7hDgB6Q,yB1B8hDhB7Q,E0Bh/CgB8Q,qBA1HhB,IAAA7G,GAAA3J,EAAA,G1B8mDI6I,EAA+BlC,EAAuBgD,G0B7mD1DJ,EAAAvJ,EAAA,G1BinDI2H,EAAQhB,EAAuB4C,G0BhnDnCO,EAAA9J,EAAA,I1BonDIyH,EAA2Bd,EAAuBmD,G0BnnDtDyD,EAAAvN,EAAA,I1BunDIkN,EAAWvG,EAAuB4G,G0BtnDtCxD,EAAA/J,EAAA,I1B0nDIoJ,EAAqBzC,EAAuBoD,G0BznDhDF,EAAA7J,EAAA,I1B6nDIsH,EAA8BX,EAAuBkD,G0B5nDzD4G,EAAAzQ,EAAA,I1BgoDIsQ,EAAmD3J,EAAuB8J,G0B/nD9E7G,EAAA5J,EAAA,G1BmoDIiJ,EAAUtC,EAAuBiD,IA4I/B,SAAUjK,EAAQD,EAASM,GAEjC,YAkCA,SAAS2G,GAAuBxC,GAAO,MAAOA,IAAOA,EAAIjD,WAAaiD,GAAQ1B,QAAS0B,G2B3yDvF,QAASrB,GAAc4N,EAAW1O,EAAgB2O,GAChD,GAAMjP,GAAUM,EAAeN,QACzBkP,GACJ/J,SAAU7E,EAAe6E,SACzBnF,QAASM,EAAeN,QACxBY,MAAON,EAAeM,MACtBN,iBACA2O,YAGF,EAAAE,EAAApO,SAAmBf,EAASgP,EAAWE,GAclC,QAASE,GAAcC,EAAWC,GACvC,GAAID,EAAUJ,UAAYK,EAAYL,QACpC,KAAM,IAAI/O,OAAM,wDAGlB,IAAMqP,GAAYF,EAAUzO,MACtB4O,EAAcF,EAAY1O,KAGhC,IAAK2O,EAAU9O,SAAY+O,EAAY/O,QAAvC,CAMA,GAAMgP,GAAeD,EAAY1B,mBAAqB0B,EAAY3J,OAC7C0J,EAAUzB,mBAAqByB,EAAU1J,OACxD6J,EAAgBJ,EAAYnK,SAAStC,MAAQwM,EAAUlK,SAAStC,MAAQ4M,CAE9EH,GAAYnK,SAAStC,MAAQwM,EAAUlK,SAAStC,MAAQ6M,GAYnD,QAASC,GAAU3P,EAASY,EAAOwG,GACxC,GAAM6H,IAAU,EAAAW,EAAA7O,WACVT,GAAiB,EAAA+B,EAAAtC,mBAAkBC,GACnCsC,EAAShC,EAAegC,OAC1B6C,QAEAvE,KACFuE,GAAW,EAAA0K,EAAA9O,SAAmBT,EAAesC,OAAQhC,GAIjDwG,GAAWA,EAAQjC,WACrBA,EAAWjG,OAAO4Q,OAAO3K,EAAUiC,EAAQjC,aAKV,IAAjC7E,EAAeyP,gBACjBzP,EAAeyP,eAAgB,EAGjC,IAAMC,IACJpP,QACAqO,UACA9J,WACAiC,QAASA,MACT5B,kBAkBF,OAbIlD,GAAOlC,QAAUQ,GACnBwO,EAAa9M,EAAO,GAAI0N,GAG1B1N,EAAO/B,KAAKyP,GAEZ5O,EAAa,wBAAyBd,EAAgB2O,GAGhC,IAAlB3M,EAAOlC,QAAgBQ,GACzBqP,EAAejQ,EAASiP,GAGnBA,EAUF,QAASiB,GAAalQ,EAASiP,GACpC,GAAM3O,IAAiB,EAAA+B,EAAAtC,mBAAkBC,GACnCsC,EAAShC,EAAegC,OACxB6N,EAAQ7P,EAAegC,OAAO8N,UAAU,SAACxI,GAAD,MAAWA,GAAMqH,UAAYA,KAE5D,IAAXkB,IACF7N,EAAO4I,OAAOiF,EAAO,GAIjBlB,IAAY3O,EAAe+P,eAAiB/N,EAAOlC,QACrD6P,EAAejQ,EAASsC,EAAO,GAAG2M,SAGpC7N,EAAa,0BAA2Bd,EAAgB2O,IAWrD,QAASqB,GAAUtQ,EAASiP,GAIjC,OAHuB,EAAA5M,EAAAtC,mBAAkBC,GAGnBsC,OAAOiO,KAAK,SAAC3I,GAAD,MAAWA,GAAMqH,UAAYA,IAU1D,QAASuB,GAAWxQ,GAIzB,OAHuB,EAAAqC,EAAAtC,mBAAkBC,GAGnBsC,OAUjB,QAASmO,GAAkBzQ,GAGhC,OAFuB,EAAAqC,EAAAtC,mBAAkBC,GAEnBsC,OAAOoO,OAAO,SAAC9I,GAAD,MAAWA,GAAMR,UACd,IAA1BQ,EAAMR,QAAQuJ,SACY,IAA1B/I,EAAMR,QAAQwJ,UAUtB,QAASX,GAAgBjQ,EAASiP,GACvC,GAAM3O,IAAiB,EAAA+B,EAAAtC,mBAAkBC,EAGzC,IAAIM,EAAe+P,gBAAkBpB,EAArC,CAIA,GAAMkB,GAAQ7P,EAAegC,OAAO8N,UAAU,SAACxI,GAAD,MAAWA,GAAMqH,UAAYA,GAE3E,KAAe,IAAXkB,EACF,KAAM,IAAIjQ,OAAM,kDAGlB,IAAM0H,GAAQtH,EAAegC,OAAO6N,EAEpC,KAAKvI,EAAMhH,MACT,KAAM,IAAIV,OAAM,sEAGlBI,GAAe+P,cAAgBpB,EAC/B3O,EAAeM,MAAQgH,EAAMhH,MAC7BN,EAAe6E,SAAWyC,EAAMzC,UAEhC,EAAA0L,EAAA9P,SAAYf,GACZoB,EAAa,gCAAiCd,EAAgB2O,IAWzD,QAAS6B,GAAe9Q,EAASY,EAAOqO,GAC7C,GAAM3O,IAAiB,EAAA+B,EAAAtC,mBAAkBC,GACnCqP,EAAY/O,EAAegC,OAAO,GAEpCsF,QAQJ,MALEA,EADEqH,EACMqB,EAAStQ,EAASiP,GAElB8B,EAAe/Q,IAIvB,KAAM,IAAIE,OAAM,iCAKlB,IAFA0H,EAAMhH,MAAQA,GAETA,EAGH,YAFAgH,EAAMzC,aAAWlF,GAKnB,KAAK2H,EAAMzC,SAAU,CACnB,GAAM6L,IAAkB,EAAAnB,EAAA9O,SAAmBT,EAIvCsH,GAAMR,SAAWQ,EAAMR,QAAQjC,WACjCyC,EAAMzC,SAAWjG,OAAO4Q,OAAOkB,EAAiBpJ,EAAMR,QAAQjC,WAG5DkK,EAAUJ,UAAYA,GACxBG,EAAaC,EAAWzH,IAWvB,QAASmJ,GAAgB/Q,GAC9B,GAAMM,IAAiB,EAAA+B,EAAAtC,mBAAkBC,EAGzC,OAAOM,GAAegC,OAAOiO,KAAK,SAAC3I,GAAD,MAAWA,GAAMqH,UAAY3O,EAAe+P,gB3BsgDhFnR,OAAOC,eAAenB,EAAS,cAC7B8C,OAAO,IAET9C,E2BvvDgBoR,e3BwvDhBpR,E2BztDgB2R,W3B0tDhB3R,E2BpqDgBkS,c3BqqDhBlS,E2B5oDgBsS,W3B6oDhBtS,E2B/nDgBwS,Y3BgoDhBxS,E2BlnDgByS,mB3BmnDhBzS,E2BpmDgBiS,iB3BqmDhBjS,E2BjkDgB8S,gB3BkkDhB9S,E2BrhDgB+S,gBAjRhB,IAAAE,GAAA3S,EAAA,I3B0yDIsR,EAAS3K,EAAuBgM,G2BzyDpC5O,EAAA/D,EAAA,GACA4S,EAAA5S,EAAA,G3B8yDIuR,EAAuB5K,EAAuBiM,G2B7yDlDC,EAAA7S,EAAA,G3BizDIuS,EAAgB5L,EAAuBkM,G2BhzD3CC,EAAA9S,EAAA,G3BozDI6Q,EAAiBlK,EAAuBmM,IA4RtC,SAAUnT,EAAQD,EAASM,GAEjC,Y4BzkEA,SAAS+S,GAA2BxI,EAAOC,GACzC,MAAO,UAACwI,GAAD,MAAsBA,GAAmBzI,EAAQC,GAG1D,QAASyI,GAA8B9N,GACrC,GAAM+N,GAAW/N,EAAYiF,IAAI,GAC3B+I,EAAWhO,EAAYiF,IAAIjF,EAAYiF,IAAItI,OAAS,GACpDsR,EAAiBjO,EAAYkO,iBAAmBlO,EAAYiF,IAAItI,MAEtE,OAAO,UAACkR,GACN,MAAIA,GAAmB7N,EAAYkO,iBAC1BH,EACEF,GAAoBI,EACtBD,EAGFhO,EAAYiF,IAAI4I,I5B4jE3BpS,OAAOC,eAAenB,EAAS,cAC7B8C,OAAO,IAGT9C,EAAQ+C,Q4BnjEO,SAAU8H,EAAOC,EAAWrF,GACzC,MAAIA,GACK8N,EAA6B9N,GAG/B4N,EAA0BxI,EAAOC,K5BqmEpC,SAAU7K,EAAQD,EAASM,GAEjC,Y6B/rDA,SAASsT,GAAUC,EAAGC,EAAGvS,GACvBA,EAAU,OAANA,EAAa,IAAMA,CAKvB,KAHA,GAAMwS,IAAaD,EAAID,IAAMtS,EAAI,GAC3ByS,KAECzS,KAAM,GACXyS,EAAOzR,KAAKsR,GACZA,GAAKE,CAOP,OAFAC,GAAOA,EAAO5R,OAAS,GAAK0R,EAErBE,EAIT,QAASC,GAASC,EAAOC,GAIvB,IAHA,GAAIC,GAAO,EACPC,EAAQH,EAAM9R,OAAS,EAEpBgS,GAAQC,GAAO,CACpB,GAAMC,GAAMF,EAAOjO,KAAKoO,OAAOF,EAAQD,GAAQ,GACzCI,EAAUN,EAAMI,EAEtB,IAAIE,IAAYL,EACd,MAAOG,EACEH,GAAOK,EAChBH,EAAQC,EAAM,EAEdF,EAAOE,EAAM,EAIjB,MAAOF,GAMT,QAASK,GAAcC,EAAYC,GACjC,GAAIlU,UACEmU,KACAC,EAAMF,EAAOvS,MAMnB,KAJAsS,EAAWI,KAAK,SAAUjB,EAAGC,GAC3B,MAAOD,GAAIC,IAGRrT,EAAI,EAAGA,EAAIoU,EAAKpU,IACnBmU,EAAQnU,GAAKwT,EAAQS,EAAYC,EAAOlU,GAG1C,OAAOmU,GAgBT,QAASG,GAAkBC,EAAGvM,EAAMwM,GAClC,GAAIxU,UACEsE,KACAmQ,KACAC,KACAzK,IAIN,KAFAuK,EAAkB,OAAVA,EAAiB,EAAIA,EAExBxU,EAAI,EAAGA,EAAIgI,EAAKrG,OAAQ3B,IAAK,CAChC,GAAMuB,GAAUyG,EAAKhI,EAErBsE,GAAExC,MAAMyS,EAAI,GAAKhT,EAAQ,IACzBkT,EAAG3S,KAAKP,EAAQ,IAChBmT,EAAG5S,KAAKP,EAAQ,IAGlB,GAAMoT,GAAYxB,EAAS,EAAG,EAAGoB,EAEjC,KAAKvU,EAAI,EAAGA,EAAIuU,EAAGvU,IACjB2U,EAAU3U,IAAMuU,EAAI,GAAK7O,KAAKkP,IAAID,EAAU3U,GAAIwU,EAGlD,IAAMK,GAAmBb,EAAa1P,EAAGqQ,EAEzC,KAAK3U,EAAI,EAAGA,EAAIuU,EAAI,EAAGvU,IAAK,CAC1B,GAAM0R,GAAQmD,EAAiB7U,GACzB8U,GAAiBH,EAAU3U,GAAKsE,EAAEoN,EAAQ,KAAOpN,EAAEoN,GAASpN,EAAEoN,EAAQ,IACtEqD,EAAcN,EAAG/C,GAASgD,EAAGhD,EAAQ,EAE3CzH,GAAIjK,GAAK8U,EAAeC,EAAaL,EAAGhD,EAAQ,GAMlD,MAHAzH,GAAI,GAAKyK,EAAG,GACZzK,EAAIsK,EAAI,GAAKE,EAAGzM,EAAKrG,OAAS,GAEvBsI,EAUT,QAAS+K,GAA+BC,EAAeV,EAAGC,GACxD,GAAIxU,UACEiK,IAENsK,GAAU,OAANA,EAAa,IAAMA,EACvBC,EAAkB,OAAVA,EAAiB,EAAIA,CAE7B,IAAMU,GAASZ,EAAiBC,EAAGU,EAAcE,IAAKX,GAChDY,EAAWd,EAAiBC,EAAGU,EAAcI,MAAOb,GACpDc,EAAUhB,EAAiBC,EAAGU,EAAcM,KAAMf,EAExD,KAAKxU,EAAI,EAAGA,EAAIuU,EAAGvU,IAAK,CACtB,GAAMmV,GAAMzP,KAAK8P,MAAkB,IAAZN,EAAOlV,IACxBqV,EAAQ3P,KAAK8P,MAAoB,IAAdJ,EAASpV,IAC5BuV,EAAO7P,KAAK8P,MAAmB,IAAbF,EAAQtV,IAC1B8H,GAAQqN,EAAKE,EAAOE,EAAM,IAEhCtL,GAAInI,KAAKgG,GAGX,MAAOmC,GAMF,QAAShE,KACd,GAAMwP,KAyBN,OAxBahV,QAAOiV,KAAKC,GAEpBzT,QAAQ,SAAUgK,GACrB,GAAIyJ,EAAcxU,eAAe+K,GAAM,CACrC,GAAMhH,GAAWyQ,EAAczJ,EAE/BuJ,GAAU3T,MACR8T,GAAI1J,EACJ5L,KAAM4E,EAAS5E,UAKrBmV,EAAUpB,KAAK,SAAUjB,EAAGC,GAC1B,GAAMwC,GAAQzC,EAAE9S,KAAKuI,cACfiN,EAAQzC,EAAE/S,KAAKuI,aAErB,OAAIgN,KAAUC,EACL,EAGFD,EAAQC,GAAS,EAAI,IAGvBL,EAWF,QAASzP,GAAa4P,EAAIG,GAC/B,GAAI7Q,GAAWyQ,EAAcC,EAa7B,OAXK1Q,KACHA,EAAWyQ,EAAcC,GAAMG,IAC7BzV,KAAM,GACN0V,aAIC9Q,EAAS8Q,QAAU9Q,EAAS+P,gBAC/B/P,EAAS8Q,OAAShB,EAA8B9P,EAAS+P,cAAe/P,EAAS+Q,UAAW/Q,EAASsP,SAIrG/E,MADK,WAEH,MAAOmG,IAGTM,mBALK,WAMH,MAAOhR,GAAS5E,MAGlB6V,mBATK,SASe7V,GAClB4E,EAAS5E,KAAOA,GAGlB8V,kBAbK,WAcH,MAAOlR,GAAS8Q,OAAOrU,QAGzBuO,kBAjBK,SAiBc+F,GACjB,KAAO/Q,EAAS8Q,OAAOrU,OAASsU,GAC9B/Q,EAAS8Q,OAAOlU,KAAKuU,EAGvBnR,GAAS8Q,OAAOrU,OAASsU,GAG3BK,SAzBK,SAyBK5E,GACR,MAAI/R,MAAK4W,aAAa7E,GACbxM,EAAS8Q,OAAOtE,GAGlB2E,GAGTG,kBAjCK,SAiCc9E,GACjB,GAAMuE,GAAY/Q,EAAS8Q,OAAOrU,MAIlC,OAFA+P,GAAQuE,EAAYvE,EAAQuE,EAAY,EAEjCtW,KAAK2W,SAAS5E,IAGvB+E,SAzCK,SAyCK/E,EAAO5J,GACXnI,KAAK4W,aAAa7E,KACpBxM,EAAS8Q,OAAOtE,GAAS5J,IAI7B4O,SA/CK,SA+CK5O,GACR5C,EAAS8Q,OAAOlU,KAAKgG,IAGvB6O,YAnDK,SAmDQjF,EAAO5J,GACdnI,KAAK4W,aAAa7E,IACpBxM,EAAS8Q,OAAOvJ,OAAOiF,EAAO,EAAG5J,IAIrC8O,YAzDK,SAyDQlF,GACP/R,KAAK4W,aAAa7E,IACpBxM,EAAS8Q,OAAOvJ,OAAOiF,EAAO,IAIlCmF,YA/DK,WAgEH3R,EAAS8Q,WAGXc,iBAnEK,SAmEa7M,GAChB,GAAKA,EAAL,CAIA,GAAMgM,GAAY/Q,EAAS8Q,OAAOrU,MAElCsI,GAAI8M,uBAAuBd,EAE3B,KAAK,GAAIjW,GAAI,EAAGA,EAAIiW,EAAWjW,IAC7BiK,EAAI+M,cAAchX,EAAGkF,EAAS8Q,OAAOhW,MAIzC0P,kBAjFK,WAkFH,GAAMzF,GAAM,GAAAlE,GAAAzD,OAIZ,OAFA3C,MAAKmX,iBAAiB7M,GAEfA,GAGTsM,aAzFK,SAyFS7E,GACZ,MAAQA,IAAS,GAAOA,EAAQxM,EAAS8Q,OAAOrU,S7Bs6CtDlB,OAAOC,eAAenB,EAAS,cAC7B8C,OAAO,IAET9C,E6BtjDgB0G,mB7BujDhB1G,E6BlhDgByG,aA3oBhB,IAAAF,GAAAjG,EAAA,I7BiqEIkG,EAEJ,SAAgC/B,GAAO,MAAOA,IAAOA,EAAIjD,WAAaiD,GAAQ1B,QAAS0B,IAF5C8B,G6B/pErCuQ,GAAqB,EAAG,EAAG,EAAG,GAW9BV,GACJsB,SACE3W,KAAM,WACN4W,YAAa,IACblB,SACG,EAAG,EAAG,EAAG,MAAO,EAAG,EAAG,EAAG,MAAO,EAAG,EAAG,EAAG,MAAO,EAAG,EAAG,EAAG,MAAO,EAAG,EAAG,EAAG,MACzE,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAC9E,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAC9E,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAC9E,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAC9E,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAC9E,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAC9E,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAC9E,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAC9E,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAAO,GAAI,EAAG,EAAG,MAC9E,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MACnF,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MACnF,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MACnF,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MACnF,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MACnF,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MACnF,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MACnF,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MACnF,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MACnF,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MACnF,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MACnF,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MACnF,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MACnF,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MACnF,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MACnF,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MACnF,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,EAAG,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MACrF,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MACxF,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MACxF,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MACxF,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MACxF,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MACxF,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MACxF,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MACxF,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MACxF,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,IAAK,EAAG,MAAO,IAAK,IAAK,EAAG,MAC1F,IAAK,IAAK,EAAG,MAAO,IAAK,IAAK,EAAG,MAAO,IAAK,IAAK,EAAG,MAAO,IAAK,IAAK,EAAG,MAAO,IAAK,IAAK,EAAG,MAC7F,IAAK,IAAK,EAAG,MAAO,IAAK,IAAK,EAAG,MAAO,IAAK,IAAK,EAAG,MAAO,IAAK,IAAK,EAAG,MAAO,IAAK,IAAK,EAAG,MAC7F,IAAK,IAAK,EAAG,MAAO,IAAK,IAAK,EAAG,MAAO,IAAK,IAAK,EAAG,MAAO,IAAK,IAAK,EAAG,MAAO,IAAK,IAAK,GAAI,MAC9F,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAClG,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAClG,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAClG,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAClG,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MACtG,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MACvG,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MACvG,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MACvG,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MACvG,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MACvG,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MACvG,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MACvG,IAAK,IAAK,IAAK,OAGpBmB,KACE7W,KAAM,MACN2V,UAAW,IACXD,SACG,EAAG,EAAG,EAAG,MAAO,EAAG,EAAG,EAAG,MAAO,EAAG,EAAG,EAAG,MAAO,EAAG,EAAG,EAAG,MAAO,EAAG,EAAG,EAAG,MACzE,EAAG,GAAI,EAAG,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAClF,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MACnF,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MACnF,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MACnF,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MACnF,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MACnF,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MACnF,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MACnF,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MAAO,EAAG,GAAI,GAAI,MACnF,EAAG,IAAK,GAAI,MAAO,EAAG,IAAK,IAAK,MAAO,EAAG,IAAK,IAAK,MAAO,EAAG,IAAK,IAAK,MAAO,EAAG,IAAK,IAAK,MAC5F,EAAG,IAAK,IAAK,MAAO,EAAG,IAAK,IAAK,MAAO,EAAG,IAAK,IAAK,MAAO,EAAG,IAAK,IAAK,MAAO,EAAG,IAAK,IAAK,MAC7F,EAAG,IAAK,IAAK,MAAO,EAAG,IAAK,IAAK,MAAO,EAAG,IAAK,IAAK,MAAO,EAAG,IAAK,IAAK,MAAO,EAAG,IAAK,IAAK,MAC7F,EAAG,IAAK,IAAK,MAAO,EAAG,IAAK,IAAK,MAAO,EAAG,IAAK,IAAK,MAAO,EAAG,IAAK,IAAK,MAAO,GAAI,IAAK,IAAK,MAC9F,GAAI,IAAK,IAAK,MAAO,GAAI,IAAK,IAAK,MAAO,GAAI,IAAK,IAAK,MAAO,GAAI,IAAK,IAAK,MAAO,GAAI,IAAK,IAAK,MAClG,GAAI,IAAK,IAAK,MAAO,GAAI,IAAK,IAAK,MAAO,GAAI,IAAK,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAChG,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAC7F,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAC7F,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAC7F,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAC7F,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAC7F,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAC7F,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAC9F,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAClG,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,EAAG,IAAK,MAAO,IAAK,EAAG,IAAK,MAChG,IAAK,EAAG,IAAK,MAAO,IAAK,EAAG,IAAK,MAAO,IAAK,EAAG,IAAK,MAAO,IAAK,EAAG,IAAK,MAAO,IAAK,EAAG,IAAK,MAC7F,IAAK,EAAG,IAAK,MAAO,IAAK,EAAG,IAAK,MAAO,IAAK,EAAG,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAC/F,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAClG,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAClG,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAClG,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAClG,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAClG,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAClG,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,GAAI,MAA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AC9E,EAAG,EAAG,GAAI,MAAO,EAAG,EAAG,GAAI,MAAO,EAAG,EAAG,GAAI,MAAO,EAAG,EAAG,GAAI,MAAO,EAAG,EAAG,GAAI,MAC9E,EAAG,EAAG,GAAI,MAAO,EAAG,EAAG,GAAI,MAAO,EAAG,EAAG,GAAI,MAAO,EAAG,EAAG,GAAI,MAAO,EAAG,EAAG,GAAI,MAC9E,EAAG,EAAG,GAAI,MAAO,EAAG,EAAG,GAAI,MAAO,EAAG,EAAG,GAAI,MAAO,EAAG,EAAG,GAAI,MAAO,EAAG,EAAG,GAAI,MAC9E,EAAG,EAAG,GAAI,MAAO,EAAG,EAAG,GAAI,MAAO,EAAG,EAAG,GAAI,MAAO,EAAG,EAAG,GAAI,MAAO,EAAG,EAAG,GAAI,MAC9E,EAAG,EAAG,GAAI,MAAO,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MAClF,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MACnF,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MACnF,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MACnF,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MACnF,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MACnF,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MACnF,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MAAO,EAAG,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MACpF,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MACxF,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MACxF,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MACxF,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MACxF,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MACxF,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MACxF,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MAAO,GAAI,EAAG,IAAK,MAAO,IAAK,EAAG,IAAK,MAAO,IAAK,EAAG,IAAK,MAC1F,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,IAAK,MAAO,IAAK,GAAI,GAAI,MAAO,IAAK,GAAI,GAAI,MAChG,IAAK,GAAI,GAAI,MAAO,IAAK,GAAI,GAAI,MAAO,IAAK,GAAI,GAAI,MAAO,IAAK,GAAI,GAAI,MAAO,IAAK,GAAI,GAAI,MAC7F,IAAK,GAAI,GAAI,MAAO,IAAK,GAAI,GAAI,MAAO,IAAK,GAAI,GAAI,MAAO,IAAK,GAAI,GAAI,MAAO,IAAK,GAAI,GAAI,MAC7F,IAAK,GAAI,GAAI,MAAO,IAAK,GAAI,GAAI,MAAO,IAAK,GAAI,GAAI,MAAO,IAAK,GAAI,GAAI,MAAO,IAAK,GAAI,GAAI,MAC7F,IAAK,GAAI,GAAI,MAAO,IAAK,GAAI,GAAI,MAAO,IAAK,GAAI,GAAI,MAAO,IAAK,GAAI,GAAI,MAAO,IAAK,GAAI,GAAI,MAC7F,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MACxF,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MACxF,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MACxF,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MACxF,IAAK,GAAI,EAAG,MAAO,IAAK,GAAI,EAAG,MAAO,IAAK,IAAK,EAAG,MAAO,IAAK,IAAK,EAAG,MAAO,IAAK,IAAK,GAAI,MAC5F,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAClG,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAClG,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAClG,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAClG,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAClG,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,IAAK,MACnG,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MACvG,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MACvG,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MACvG,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MACvG,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MACvG,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MACvG,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MACvG,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MACvG,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MACvG,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MACvG,IAAK,IAAK,IAAK,OAGpBqB,WACE/W,KAAM,cACN2V,UAAW,IACXD,SACG,EAAG,EAAG,EAAG,MAAO,EAAG,EAAG,EAAG,MAAO,EAAG,EAAG,EAAG,MAAO,EAAG,EAAG,EAAG,MAAO,EAAG,EAAG,EAAG,MACzE,EAAG,EAAG,EAAG,MAAO,EAAG,EAAG,EAAG,MAAO,EAAG,EAAG,EAAG,MAAO,EAAG,EAAG,EAAG,MAAO,EAAG,EAAG,EAAG,MACzE,EAAG,EAAG,EAAG,MAAO,EAAG,EAAG,EAAG,MAAO,EAAG,EAAG,EAAG,MAAO,GAAI,EAAG,GAAI,MAAO,GAAI,EAAG,GAAI,MAC7E,GAAI,EAAG,GAAI,MAAO,GAAI,EAAG,GAAI,MAAO,GAAI,EAAG,GAAI,MAAO,GAAI,EAAG,GAAI,MAAO,GAAI,EAAG,GAAI,MACnF,GAAI,EAAG,GAAI,MAAO,GAAI,EAAG,GAAI,MAAO,GAAI,EAAG,GAAI,MAAO,GAAI,EAAG,GAAI,MAAO,GAAI,EAAG,GAAI,MACnF,GAAI,EAAG,GAAI,MAAO,GAAI,GAAI,GAAI,MAAO,GAAI,GAAI,GAAI,MAAO,GAAI,GAAI,GAAI,MAAO,GAAI,GAAI,GAAI,MACvF,GAAI,GAAI,GAAI,MAAO,GAAI,GAAI,GAAI,MAAO,GAAI,GAAI,GAAI,MAAO,GAAI,GAAI,GAAI,MAAO,GAAI,GAAI,GAAI,MACxF,GAAI,GAAI,GAAI,MAAO,GAAI,GAAI,GAAI,MAAO,GAAI,GAAI,GAAI,MAAO,GAAI,GAAI,GAAI,MAAO,GAAI,GAAI,IAAK,MACzF,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAC7F,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAC7F,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAC7F,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAC7F,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAC7F,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAC7F,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAC7F,GAAI,GAAI,IAAK,MAAO,GAAI,GAAI,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MACnG,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MACvG,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MACvG,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MACvG,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MACvG,IAAK,IAAK,IAAK,MAAO,IAAK,IAAK,IAAK,MAAO,GAAI,GAAI,GAAI,MAAO,GAAI,GAAI,GAAI,MAAO,GAAI,GAAI,GAAI,MAC9F,GAAI,GAAI,GAAI,MAAO,GAAI,GAAI,GAAI,MAAO,GAAI,GAAI,GAAI,MAAO,GAAI,GAAI,GAAI,MAAO,GAAI,GAAI,GAAI,MACxF,GAAI,GAAI,GAAI,MAAO,GAAI,GAAI,GAAI,MAAO,GAAI,GAAI,GAAI,MAAO,GAAI,GAAI,GAAI,MAAO,GAAI,GAAI,GAAI,MACxF,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAC7F,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAC7F,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAC7F,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAC7F,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAC7F,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAC7F,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAC7F,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAAO,GAAI,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAC/F,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAClG,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAClG,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAClG,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAClG,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAClG,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAClG,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,MAAO,IAAK,IAAK,GAAI,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","file":"cornerstone.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"cornerstone-core\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cornerstone-core\"] = factory();\n\telse\n\t\troot[\"cornerstone\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","/*! cornerstone-core - 1.1.3 - 2017-12-01 | (c) 2016 Chris Hafey | https://github.com/chafey/cornerstone */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"cornerstone-core\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cornerstone-core\"] = factory();\n\telse\n\t\troot[\"cornerstone\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 42);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getEnabledElement = getEnabledElement;\nexports.addEnabledElement = addEnabledElement;\nexports.getEnabledElementsByImageId = getEnabledElementsByImageId;\nexports.getEnabledElements = getEnabledElements;\nvar enabledElements = [];\n\n/**\n * A two-dimensional vector\n *\n * @typedef {Object} vec2\n * @param {Number} x - The x distance\n * @param {Number} y - The y distance\n */\n\n/**\n * VOI\n *\n * @typedef {Object} VOI\n * @param {Number} windowWidth - Window Width for display\n * @param {Number} windowCenter - Window Center for display\n */\n\n/**\n * Lookup Table Array\n *\n * @typedef {Object} LUT\n * @property {Number} firstValueMapped\n * @property {Number} numBitsPerEntry\n * @property {Array} lut\n */\n\n/**\n * Image Statistics Object\n *\n * @typedef {Object} ImageStats\n *\n * @property {Number} [lastGetPixelDataTime] The time in ms taken to retrieve stored pixels required to draw the image\n * @property {Number} [lastStoredPixelDataToCanvasImageDataTime] The time in ms taken to map from stored pixel array to canvas pixel array\n * @property {Number} [lastPutImageDataTime] The time in ms taken for putImageData to put the canvas pixel data into the canvas context\n * @property {Number} [lastRenderTime] The total time in ms taken for the entire rendering function to run\n * @property {Number} [lastLutGenerateTime] The time in ms taken to generate the lookup table for the image\n */\n\n/**\n * An Image Object in Cornerstone\n *\n * @typedef {Object} Image\n *\n * @property {string} imageId - The imageId associated with this image object\n * @property {Number} minPixelValue - the minimum stored pixel value in the image\n * @property {Number} maxPixelValue - the maximum stored pixel value in the image\n * @property {Number} slope - the rescale slope to convert stored pixel values to modality pixel values or 1 if not specified\n * @property {Number} intercept - the rescale intercept used to convert stored pixel values to modality values or 0 if not specified\n * @property {Number} windowCenter - the default windowCenter to apply to the image\n * @property {Number} windowWidth - the default windowWidth to apply to the image\n * @property {function} getPixelData - a function that returns the underlying pixel data. An array of integers for grayscale and an array of RGBA for color\n * @property {function} getImageData - a function that returns a canvas imageData object for the image. This is only needed for color images\n * @property {function} getCanvas - a function that returns a canvas element with the image loaded into it. This is only needed for color images.\n * @property {function} getImage - a function that returns a JavaScript Image object with the image data. This is optional and typically used for images encoded in standard web JPEG and PNG formats\n * @property {Number} rows - number of rows in the image. This is the same as height but duplicated for convenience\n * @property {Number} columns - number of columns in the image. This is the same as width but duplicated for convenience\n * @property {Number} height - the height of the image. This is the same as rows but duplicated for convenience\n * @property {Number} width - the width of the image. This is the same as columns but duplicated for convenience\n * @property {Boolean} color - true if pixel data is RGB, false if grayscale\n * @property {Object} lut - The Lookup Table\n * @property {Boolean} rgba - Is the color pixel data stored in RGBA?\n * @property {Number} columnPixelSpacing - horizontal distance between the middle of each pixel (or width of each pixel) in mm or undefined if not known\n * @property {Number} rowPixelSpacing - vertical distance between the middle of each pixel (or heigh of each pixel) in mm or undefined if not known\n * @property {Boolean} invert - true if the the image should initially be displayed be inverted, false if not. This is here mainly to support DICOM images with a photometric interpretation of MONOCHROME1\n * @property {Number} sizeInBytes - the number of bytes used to store the pixels for this image.\n * @property {Boolean} [falseColor=false] - Whether or not the image has undergone false color mapping\n * @property {Array} [origPixelData] - Original pixel data for an image after it has undergone false color mapping\n * @property {ImageStats} [stats] - Statistics for the last redraw of the image\n * @property {Object} cachedLut - Cached Lookup Table for this image.\n * @property {String|Colormap} [colormap] - an optional colormap ID or colormap object (from colors/colormap.js). This will be applied during rendering to convert the image to pseudocolor\n * @property {Boolean} [labelmap=false] - whether or not to render this image as a label map (i.e. skip modality and VOI LUT pipelines and use only a color lookup table)\n */\n\n/**\n * A Viewport Settings Object Cornerstone\n *\n * @typedef {Object} Viewport\n *\n * @property {Number} [scale=1.0] - The scale applied to the image. A scale of 1.0 will display no zoom (one image pixel takes up one screen pixel). A scale of 2.0 will be double zoom and a scale of .5 will be zoomed out by 2x\n * @param {vec2} [translation] - An object with properties x and y which describe the translation to apply in the pixel coordinate system. Note that the image is initially displayed centered in the enabled element with a x and y translation of 0 and 0 respectively.\n * @param {VOI} [voi] - an object with properties windowWidth and windowCenter.\n * @property {boolean} [invert=false] - Whether or not the image is inverted.\n * @property {boolean} [pixelReplication=false] - true if the image smooth / interpolation should be used when zoomed in on the image or false if pixel replication should be used.\n * @property {boolean} [hflip=false] - true if the image is flipped horizontally. Default is false\n * @property {boolean} [vflip=false] - true if the image is flipped vertically. Default is false\n * @property {Number} [rotation=0] - the rotation of the image (90 degree increments). Default is 0\n * @property {LUT} [modalityLUT] - the modality LUT to apply or undefined if none\n * @property {LUT} [voiLUT] - the modality LUT to apply or undefined if none\n * @property {String|Colormap} [colormap] - an optional colormap ID or colormap object (from colors/colormap.js). This will be applied during rendering to convert the image to pseudocolor\n * @property {Boolean} [labelmap=false] - whether or not to render this image as a label map (i.e. skip modality and VOI LUT pipelines and use only a color lookup table)\n */\n\n/**\n * An Enabled Element in Cornerstone\n *\n * @typedef {Object} EnabledElement\n *\n * @property {HTMLElement} element - The DOM element which has been enabled for use by Cornerstone\n * @property {Image} [image] - The image currently displayed in the enabledElement\n * @property {Viewport} [viewport] - The current viewport settings of the enabledElement\n * @property {HTMLCanvasElement} [canvas] - The current canvas for this enabledElement\n * @property {Boolean} invalid - Whether or not the image pixel data underlying the enabledElement has been changed, necessitating a redraw\n * @property {Boolean} needsRedraw - A flag for triggering a redraw of the canvas without re-retrieving the pixel data, since it remains valid\n * @property {EnabledElementLayer[]} [layers] - The layers that have been added to the enabledElement\n * @property {Boolean} [syncViewports] - Whether or not to synchronize the viewport parameters\n * for each of the enabled element's layers\n * @property {Boolean} [lastSyncViewportsState] - The previous state for the sync viewport boolean\n */\n\n/**\n * An Enabled Element Layer in Cornerstone\n *\n * @typedef {Object} EnabledElementLayer\n *\n * @property {HTMLElement} element - The DOM element which has been enabled for use by Cornerstone\n * @property {Image} [image] - The image currently displayed in the enabledElement\n * @property {Viewport} [viewport] - The current viewport settings of the enabledElement\n * @property {HTMLCanvasElement} [canvas] - The current canvas for this enabledElement\n * @property {Object} [options] - Layer drawing options\n * @property {Boolean} invalid - Whether or not the image pixel data underlying the enabledElement has been changed, necessitating a redraw\n * @property {Boolean} needsRedraw - A flag for triggering a redraw of the canvas without re-retrieving the pixel data, since it remains valid\n */\n\n/**\n * Retrieves a Cornerstone Enabled Element object\n *\n * @param {HTMLElement} element An HTML Element enabled for Cornerstone\n *\n * @returns {EnabledElement} A Cornerstone Enabled Element\n */\nfunction getEnabledElement(element) {\n  if (element === undefined) {\n    throw new Error('getEnabledElement: parameter element must not be undefined');\n  }\n  for (var i = 0; i < enabledElements.length; i++) {\n    if (enabledElements[i].element === element) {\n      return enabledElements[i];\n    }\n  }\n\n  throw new Error('element not enabled');\n}\n\n/**\n * Adds a Cornerstone Enabled Element object to the central store of enabledElements\n *\n * @param {EnabledElement} enabledElement A Cornerstone enabledElement Object\n * @returns {void}\n */\nfunction addEnabledElement(enabledElement) {\n  if (enabledElement === undefined) {\n    throw new Error('getEnabledElement: enabledElement element must not be undefined');\n  }\n\n  enabledElements.push(enabledElement);\n}\n\n/**\n * Adds a Cornerstone Enabled Element object to the central store of enabledElements\n *\n * @param {string} imageId A Cornerstone Image ID\n * @returns {EnabledElement[]} An Array of Cornerstone enabledElement Objects\n */\nfunction getEnabledElementsByImageId(imageId) {\n  var ees = [];\n\n  enabledElements.forEach(function (enabledElement) {\n    if (enabledElement.image && enabledElement.image.imageId === imageId) {\n      ees.push(enabledElement);\n    }\n  });\n\n  return ees;\n}\n\n/**\n * Retrieve all of the currently enabled Cornerstone elements\n *\n * @return {EnabledElement[]} An Array of Cornerstone enabledElement Objects\n */\nfunction getEnabledElements() {\n  return enabledElements;\n}\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function () {\n  if (window.performance) {\n    return performance.now();\n  }\n\n  return Date.now();\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = triggerEvent;\n\nvar _externalModules = __webpack_require__(33);\n\n/**\n * Trigger a CustomEvent\n *\n * @param {EventTarget} el The element or EventTarget to trigger the event upon\n * @param {String} type The event type name\n * @param {Object|null} detail=null The event data to be sent\n * @returns {void}\n */\nfunction triggerEvent(el, type) {\n  var detail = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n  var event = void 0;\n\n  // This check is needed to polyfill CustomEvent on IE11-\n  if (typeof window.CustomEvent === 'function') {\n    event = new CustomEvent(type.toLocaleLowerCase(), { detail: detail });\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(type.toLocaleLowerCase(), true, true, detail);\n  }\n\n  // TODO: remove jQuery event triggers\n  _externalModules.external.$(el).trigger(type, detail);\n  el.dispatchEvent(event);\n}\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (element) {\n  var invalidated = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var enabledElement = (0, _enabledElements.getEnabledElement)(element);\n\n  if (enabledElement.image === undefined && !enabledElement.layers.length) {\n    throw new Error('updateImage: image has not been loaded yet');\n  }\n\n  (0, _drawImage2.default)(enabledElement, invalidated);\n};\n\nvar _enabledElements = __webpack_require__(0);\n\nvar _drawImage = __webpack_require__(4);\n\nvar _drawImage2 = _interopRequireDefault(_drawImage);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (enabledElement) {\n  var invalidated = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  enabledElement.needsRedraw = true;\n  if (invalidated) {\n    enabledElement.invalid = true;\n  }\n};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (enabledElement) {\n  var canvas = enabledElement.canvas,\n      image = enabledElement.image,\n      element = enabledElement.element;\n\n\n  if (canvas === undefined) {\n    throw new Error('getDefaultViewport: parameter canvas must not be undefined');\n  }\n\n  if (image === undefined) {\n    return {\n      scale: 1,\n      translation: {\n        x: 0,\n        y: 0\n      },\n      voi: {\n        windowWidth: undefined,\n        windowCenter: undefined\n      },\n      invert: false,\n      pixelReplication: false,\n      rotation: 0,\n      hflip: false,\n      vflip: false,\n      modalityLUT: undefined,\n      voiLUT: undefined,\n      colormap: undefined,\n      labelmap: false\n    };\n  }\n\n  // Fit image to window\n  var verticalScale = element.offsetHeight / image.rows;\n  var horizontalScale = element.offsetWidth / image.columns;\n  var scale = Math.min(horizontalScale, verticalScale);\n\n  return {\n    scale: scale,\n    translation: {\n      x: 0,\n      y: 0\n    },\n    voi: {\n      windowWidth: image.windowWidth,\n      windowCenter: image.windowCenter\n    },\n    invert: image.invert,\n    pixelReplication: false,\n    rotation: 0,\n    hflip: false,\n    vflip: false,\n    modalityLUT: image.modalityLUT,\n    voiLUT: image.voiLUT,\n    colormap: image.colormap,\n    labelmap: Boolean(image.labelmap)\n  };\n};\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _colormap = __webpack_require__(27);\n\nvar _lookupTable = __webpack_require__(28);\n\nvar _lookupTable2 = _interopRequireDefault(_lookupTable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  getColormap: _colormap.getColormap,\n  getColormapsList: _colormap.getColormapsList,\n  LookupTable: _lookupTable2.default\n};\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (enabledElement, context, scale) {\n  if (enabledElement === undefined) {\n    throw new Error('setToPixelCoordinateSystem: parameter enabledElement must not be undefined');\n  }\n  if (context === undefined) {\n    throw new Error('setToPixelCoordinateSystem: parameter context must not be undefined');\n  }\n\n  var transform = (0, _calculateTransform2.default)(enabledElement, scale);\n\n  context.setTransform(transform.m[0], transform.m[1], transform.m[2], transform.m[3], transform.m[4], transform.m[5]);\n};\n\nvar _calculateTransform = __webpack_require__(21);\n\nvar _calculateTransform2 = _interopRequireDefault(_calculateTransform);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.renderColorImage = renderColorImage;\nexports.addColorLayer = addColorLayer;\n\nvar _now = __webpack_require__(1);\n\nvar _now2 = _interopRequireDefault(_now);\n\nvar _generateLut = __webpack_require__(9);\n\nvar _generateLut2 = _interopRequireDefault(_generateLut);\n\nvar _storedColorPixelDataToCanvasImageData = __webpack_require__(18);\n\nvar _storedColorPixelDataToCanvasImageData2 = _interopRequireDefault(_storedColorPixelDataToCanvasImageData);\n\nvar _storedRGBAPixelDataToCanvasImageData = __webpack_require__(46);\n\nvar _storedRGBAPixelDataToCanvasImageData2 = _interopRequireDefault(_storedRGBAPixelDataToCanvasImageData);\n\nvar _setToPixelCoordinateSystem = __webpack_require__(7);\n\nvar _setToPixelCoordinateSystem2 = _interopRequireDefault(_setToPixelCoordinateSystem);\n\nvar _index = __webpack_require__(13);\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _doesImageNeedToBeRendered = __webpack_require__(12);\n\nvar _doesImageNeedToBeRendered2 = _interopRequireDefault(_doesImageNeedToBeRendered);\n\nvar _initializeRenderCanvas = __webpack_require__(23);\n\nvar _initializeRenderCanvas2 = _interopRequireDefault(_initializeRenderCanvas);\n\nvar _saveLastRendered = __webpack_require__(11);\n\nvar _saveLastRendered2 = _interopRequireDefault(_saveLastRendered);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getLut(image, viewport) {\n  // If we have a cached lut and it has the right values, return it immediately\n  if (image.cachedLut !== undefined && image.cachedLut.windowCenter === viewport.voi.windowCenter && image.cachedLut.windowWidth === viewport.voi.windowWidth && image.cachedLut.invert === viewport.invert) {\n    return image.cachedLut.lutArray;\n  }\n\n  // Lut is invalid or not present, regenerate it and cache it\n  (0, _generateLut2.default)(image, viewport.voi.windowWidth, viewport.voi.windowCenter, viewport.invert);\n  image.cachedLut.windowWidth = viewport.voi.windowWidth;\n  image.cachedLut.windowCenter = viewport.voi.windowCenter;\n  image.cachedLut.invert = viewport.invert;\n\n  return image.cachedLut.lutArray;\n} /**\n   * This module is responsible for drawing an image to an enabled elements canvas element\n   */\n\n\nfunction getRenderCanvas(enabledElement, image, invalidated) {\n  if (!enabledElement.renderingTools.renderCanvas) {\n    enabledElement.renderingTools.renderCanvas = document.createElement('canvas');\n  }\n\n  var renderCanvas = enabledElement.renderingTools.renderCanvas;\n\n  // The ww/wc is identity and not inverted - get a canvas with the image rendered into it for\n  // Fast drawing\n  if (enabledElement.viewport.voi.windowWidth === 255 && enabledElement.viewport.voi.windowCenter === 128 && enabledElement.viewport.invert === false && image.getCanvas && image.getCanvas()) {\n    return image.getCanvas();\n  }\n\n  // Apply the lut to the stored pixel data onto the render canvas\n  if ((0, _doesImageNeedToBeRendered2.default)(enabledElement, image) === false && invalidated !== true) {\n    return renderCanvas;\n  }\n\n  // If our render canvas does not match the size of this image reset it\n  // NOTE: This might be inefficient if we are updating multiple images of different\n  // Sizes frequently.\n  if (renderCanvas.width !== image.width || renderCanvas.height !== image.height) {\n    (0, _initializeRenderCanvas2.default)(enabledElement, image);\n  }\n\n  // Get the lut to use\n  var start = (0, _now2.default)();\n  var colorLut = getLut(image, enabledElement.viewport);\n\n  image.stats = image.stats || {};\n  image.stats.lastLutGenerateTime = (0, _now2.default)() - start;\n\n  var renderCanvasData = enabledElement.renderingTools.renderCanvasData;\n  var renderCanvasContext = enabledElement.renderingTools.renderCanvasContext;\n\n  // The color image voi/invert has been modified - apply the lut to the underlying\n  // Pixel data and put it into the renderCanvas\n  if (image.rgba) {\n    (0, _storedRGBAPixelDataToCanvasImageData2.default)(image, colorLut, renderCanvasData.data);\n  } else {\n    (0, _storedColorPixelDataToCanvasImageData2.default)(image, colorLut, renderCanvasData.data);\n  }\n\n  start = (0, _now2.default)();\n  renderCanvasContext.putImageData(renderCanvasData, 0, 0);\n  image.stats.lastPutImageDataTime = (0, _now2.default)() - start;\n\n  return renderCanvas;\n}\n\n/**\n * API function to render a color image to an enabled element\n *\n * @param {EnabledElement} enabledElement The Cornerstone Enabled Element to redraw\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n */\nfunction renderColorImage(enabledElement, invalidated) {\n  if (enabledElement === undefined) {\n    throw new Error('renderColorImage: enabledElement parameter must not be undefined');\n  }\n\n  var image = enabledElement.image;\n\n  if (image === undefined) {\n    throw new Error('renderColorImage: image must be loaded before it can be drawn');\n  }\n\n  // Get the canvas context and reset the transform\n  var context = enabledElement.canvas.getContext('2d');\n\n  context.setTransform(1, 0, 0, 1, 0, 0);\n\n  // Clear the canvas\n  context.fillStyle = 'black';\n  context.fillRect(0, 0, enabledElement.canvas.width, enabledElement.canvas.height);\n\n  // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n  context.imageSmoothingEnabled = !enabledElement.viewport.pixelReplication;\n  context.mozImageSmoothingEnabled = context.imageSmoothingEnabled;\n\n  // Save the canvas context state and apply the viewport properties\n  (0, _setToPixelCoordinateSystem2.default)(enabledElement, context);\n\n  var renderCanvas = void 0;\n\n  if (enabledElement.options && enabledElement.options.renderer && enabledElement.options.renderer.toLowerCase() === 'webgl') {\n    // If this enabled element has the option set for WebGL, we should\n    // User it as our renderer.\n    renderCanvas = _index2.default.renderer.render(enabledElement);\n  } else {\n    // If no options are set we will retrieve the renderCanvas through the\n    // Normal Canvas rendering path\n    renderCanvas = getRenderCanvas(enabledElement, image, invalidated);\n  }\n\n  context.drawImage(renderCanvas, 0, 0, image.width, image.height, 0, 0, image.width, image.height);\n\n  enabledElement.renderingTools = (0, _saveLastRendered2.default)(enabledElement);\n}\n\nfunction addColorLayer(layer, invalidated) {\n  if (layer === undefined) {\n    throw new Error('addColorLayer: layer parameter must not be undefined');\n  }\n\n  var image = layer.image;\n\n  if (image === undefined) {\n    throw new Error('addColorLayer: image must be loaded before it can be drawn');\n  }\n\n  // All multi-layer images should include the alpha value\n  image.rgba = true;\n  layer.canvas = getRenderCanvas(layer, image, invalidated);\n\n  var context = layer.canvas.getContext('2d');\n\n  // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n  context.imageSmoothingEnabled = !layer.viewport.pixelReplication;\n  context.mozImageSmoothingEnabled = context.imageSmoothingEnabled;\n\n  layer.renderingTools = (0, _saveLastRendered2.default)(layer);\n}\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (image, windowWidth, windowCenter, invert, modalityLUT, voiLUT) {\n  var maxPixelValue = image.maxPixelValue;\n  var minPixelValue = image.minPixelValue;\n  var offset = Math.min(minPixelValue, 0);\n\n  if (image.cachedLut === undefined) {\n    var length = maxPixelValue - offset + 1;\n\n    image.cachedLut = {};\n    image.cachedLut.lutArray = new Uint8ClampedArray(length);\n  }\n\n  var lut = image.cachedLut.lutArray;\n  var mlutfn = (0, _getModalityLUT2.default)(image.slope, image.intercept, modalityLUT);\n  var vlutfn = (0, _getVOILut2.default)(windowWidth, windowCenter, voiLUT);\n\n  if (invert === true) {\n    for (var storedValue = minPixelValue; storedValue <= maxPixelValue; storedValue++) {\n      lut[storedValue + -offset] = 255 - vlutfn(mlutfn(storedValue));\n    }\n  } else {\n    for (var _storedValue = minPixelValue; _storedValue <= maxPixelValue; _storedValue++) {\n      lut[_storedValue + -offset] = vlutfn(mlutfn(_storedValue));\n    }\n  }\n\n  return lut;\n};\n\nvar _getModalityLUT = __webpack_require__(26);\n\nvar _getModalityLUT2 = _interopRequireDefault(_getModalityLUT);\n\nvar _getVOILut = __webpack_require__(43);\n\nvar _getVOILut2 = _interopRequireDefault(_getVOILut);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (enabledElement) {\n  // For now we will calculate it every time it is requested.\n  // In the future, we may want to cache it in the enabled element to speed things up.\n  return (0, _calculateTransform2.default)(enabledElement);\n};\n\nvar _calculateTransform = __webpack_require__(21);\n\nvar _calculateTransform2 = _interopRequireDefault(_calculateTransform);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (enabledElement) {\n  var imageId = enabledElement.image.imageId;\n  var viewport = enabledElement.viewport;\n\n  enabledElement.renderingTools.lastRenderedImageId = imageId;\n  enabledElement.renderingTools.lastRenderedViewport = {\n    windowCenter: viewport.voi.windowCenter,\n    windowWidth: viewport.voi.windowWidth,\n    invert: viewport.invert,\n    rotation: viewport.rotation,\n    hflip: viewport.hflip,\n    vflip: viewport.vflip,\n    modalityLUT: viewport.modalityLUT,\n    voiLUT: viewport.voiLUT,\n    colormap: viewport.colormap\n  };\n\n  return enabledElement.renderingTools;\n};\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (enabledElement, image) {\n  var lastRenderedImageId = enabledElement.renderingTools.lastRenderedImageId;\n  var lastRenderedViewport = enabledElement.renderingTools.lastRenderedViewport;\n\n  return image.imageId !== lastRenderedImageId || !lastRenderedViewport || lastRenderedViewport.windowCenter !== enabledElement.viewport.voi.windowCenter || lastRenderedViewport.windowWidth !== enabledElement.viewport.voi.windowWidth || lastRenderedViewport.invert !== enabledElement.viewport.invert || lastRenderedViewport.modalityLUT !== enabledElement.viewport.modalityLUT || lastRenderedViewport.voiLUT !== enabledElement.viewport.voiLUT || lastRenderedViewport.colormap !== enabledElement.viewport.colormap;\n};\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _renderer = __webpack_require__(47);\n\nvar _createProgramFromString = __webpack_require__(34);\n\nvar _createProgramFromString2 = _interopRequireDefault(_createProgramFromString);\n\nvar _textureCache = __webpack_require__(32);\n\nvar _textureCache2 = _interopRequireDefault(_textureCache);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar mod = {\n  createProgramFromString: _createProgramFromString2.default,\n  renderer: {\n    render: _renderer.render,\n    initRenderer: _renderer.initRenderer,\n    getRenderCanvas: _renderer.getRenderCanvas,\n    isWebGLAvailable: _renderer.isWebGLAvailable\n  },\n  textureCache: _textureCache2.default\n};\n\nObject.defineProperty(mod, 'isWebGLInitialized', {\n  enumerable: true,\n  configurable: false,\n  get: function get() {\n    return _renderer.isWebGLInitialized;\n  }\n});\n\nexports.default = mod;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar EventTarget = function () {\n  function EventTarget() {\n    _classCallCheck(this, EventTarget);\n\n    this.listeners = {};\n  }\n\n  _createClass(EventTarget, [{\n    key: \"addEventListener\",\n    value: function addEventListener(type, callback) {\n      if (!(type in this.listeners)) {\n        this.listeners[type] = [];\n      }\n\n      this.listeners[type].push(callback);\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener(type, callback) {\n      if (!(type in this.listeners)) {\n        return;\n      }\n\n      var stack = this.listeners[type];\n\n      for (var i = 0, l = stack.length; i < l; i++) {\n        if (stack[i] === callback) {\n          stack.splice(i, 1);\n\n          return;\n        }\n      }\n    }\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(event) {\n      if (!(event.type in this.listeners)) {\n        return true;\n      }\n\n      var stack = this.listeners[event.type];\n\n      for (var i = 0, l = stack.length; i < l; i++) {\n        stack[i].call(this, event);\n      }\n\n      return !event.defaultPrevented;\n    }\n  }]);\n\n  return EventTarget;\n}();\n\nvar events = new EventTarget();\n\nexports.default = events;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.renderGrayscaleImage = renderGrayscaleImage;\nexports.addGrayscaleLayer = addGrayscaleLayer;\n\nvar _storedPixelDataToCanvasImageData = __webpack_require__(17);\n\nvar _storedPixelDataToCanvasImageData2 = _interopRequireDefault(_storedPixelDataToCanvasImageData);\n\nvar _storedPixelDataToCanvasImageDataRGBA = __webpack_require__(29);\n\nvar _storedPixelDataToCanvasImageDataRGBA2 = _interopRequireDefault(_storedPixelDataToCanvasImageDataRGBA);\n\nvar _now = __webpack_require__(1);\n\nvar _now2 = _interopRequireDefault(_now);\n\nvar _index = __webpack_require__(13);\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _getLut = __webpack_require__(31);\n\nvar _getLut2 = _interopRequireDefault(_getLut);\n\nvar _saveLastRendered = __webpack_require__(11);\n\nvar _saveLastRendered2 = _interopRequireDefault(_saveLastRendered);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * API function to draw a grayscale image to a given enabledElement\n *\n * @param {EnabledElement} enabledElement The Cornerstone Enabled Element to redraw\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n */\nfunction renderGrayscaleImage(enabledElement, invalidated) {\n  if (enabledElement === undefined) {\n    throw new Error('drawImage: enabledElement parameter must not be undefined');\n  }\n\n  var image = enabledElement.image;\n\n  if (image === undefined) {\n    throw new Error('drawImage: image must be loaded before it can be drawn');\n  }\n\n  // Get the canvas context and reset the transform\n  var context = enabledElement.canvas.getContext('2d');\n  var canvas = enabledElement.canvas;\n\n  context.setTransform(1, 0, 0, 1, 0, 0);\n\n  // Clear the canvas\n  context.fillStyle = 'white';\n  context.fillRect(0, 0, canvas.width, canvas.height);\n\n  // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n  context.imageSmoothingEnabled = !enabledElement.viewport.pixelReplication;\n  context.mozImageSmoothingEnabled = context.imageSmoothingEnabled;\n\n  var useAlphaChannel = true;\n  var canvasData = context.getImageData(0, 0, canvas.width, canvas.height);\n\n  // Get the lut to use\n  var start = (0, _now2.default)();\n  var lut = (0, _getLut2.default)(image, enabledElement.viewport, invalidated);\n\n  image.stats = image.stats || {};\n  image.stats.lastLutGenerateTime = (0, _now2.default)() - start;\n\n  // Gray scale image - apply the lut and put the resulting image onto the render canvas\n  if (useAlphaChannel) {\n    (0, _storedPixelDataToCanvasImageData2.default)(image, lut, canvasData.data);\n  } else {\n    (0, _storedPixelDataToCanvasImageDataRGBA2.default)(image, lut, canvasData.data);\n  }\n\n  start = (0, _now2.default)();\n  context.putImageData(canvasData, 0, 0);\n  image.stats.lastPutImageDataTime = (0, _now2.default)() - start;\n\n  enabledElement.renderingTools = (0, _saveLastRendered2.default)(enabledElement);\n}\n\n/**\n * API function to draw a grayscale image to a given layer\n *\n * @param {EnabledElementLayer} layer The layer that the image will be added to\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @param {Boolean} [useAlphaChannel] - Whether or not to render the grayscale image using only the alpha channel.\n                                        This does not work if this layer is not the first layer in the enabledElement.\n * @returns {void}\n */\nfunction addGrayscaleLayer(layer, invalidated) {\n  var useAlphaChannel = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  if (layer === undefined) {\n    throw new Error('addGrayscaleLayer: layer parameter must not be undefined');\n  }\n\n  var image = layer.image;\n\n  if (image === undefined) {\n    throw new Error('addGrayscaleLayer: image must be loaded before it can be drawn');\n  }\n\n  // layer.canvas = getRenderCanvas(layer, image, invalidated, useAlphaChannel);\n\n  var context = layer.canvas.getContext('2d');\n\n  // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n  context.imageSmoothingEnabled = !layer.viewport.pixelReplication;\n  context.mozImageSmoothingEnabled = context.imageSmoothingEnabled;\n\n  layer.renderingTools = (0, _saveLastRendered2.default)(layer);\n}\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (callback) {\n  return window.requestAnimationFrame(callback) || window.webkitRequestAnimationFrame(callback) || window.mozRequestAnimationFrame(callback) || window.oRequestAnimationFrame(callback) || window.msRequestAnimationFrame(callback) || requestFrame(callback);\n};\n\nfunction requestFrame(callback) {\n  window.setTimeout(callback, 1000 / 60);\n}\n\n/**\n * Polyfills requestAnimationFrame for older browsers.\n *\n * @param {Function} callback A parameter specifying a function to call when it's time to update your animation for the next repaint. The callback has one single argument, a DOMHighResTimeStamp, which indicates the current time (the time returned from performance.now() ) for when requestAnimationFrame starts to fire callbacks.\n *\n * @return {Number} A long integer value, the request id, that uniquely identifies the entry in the callback list. This is a non-zero value, but you may not make any other assumptions about its value. You can pass this value to window.cancelAnimationFrame() to cancel the refresh callback request.\n */\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (image, lut, canvasImageDataData) {\n  var start = (0, _now2.default)();\n  var pixelData = image.getPixelData();\n\n  image.stats.lastGetPixelDataTime = (0, _now2.default)() - start;\n\n  var numPixels = pixelData.length;\n  var minPixelValue = image.minPixelValue;\n  var canvasImageDataIndex = 3;\n  var storedPixelDataIndex = 0;\n\n  // NOTE: As of Nov 2014, most javascript engines have lower performance when indexing negative indexes.\n  // We have a special code path for this case that improves performance.  Thanks to @jpambrun for this enhancement\n\n  // Added two paths (Int16Array, Uint16Array) to avoid polymorphic deoptimization in chrome.\n  start = (0, _now2.default)();\n  if (pixelData instanceof Int16Array) {\n    if (minPixelValue < 0) {\n      while (storedPixelDataIndex < numPixels) {\n        canvasImageDataData[canvasImageDataIndex] = lut[pixelData[storedPixelDataIndex++] + -minPixelValue]; // Alpha\n        canvasImageDataIndex += 4;\n      }\n    } else {\n      while (storedPixelDataIndex < numPixels) {\n        canvasImageDataData[canvasImageDataIndex] = lut[pixelData[storedPixelDataIndex++]]; // Alpha\n        canvasImageDataIndex += 4;\n      }\n    }\n  } else if (pixelData instanceof Uint16Array) {\n    while (storedPixelDataIndex < numPixels) {\n      canvasImageDataData[canvasImageDataIndex] = lut[pixelData[storedPixelDataIndex++]]; // Alpha\n      canvasImageDataIndex += 4;\n    }\n  } else if (minPixelValue < 0) {\n    while (storedPixelDataIndex < numPixels) {\n      canvasImageDataData[canvasImageDataIndex] = lut[pixelData[storedPixelDataIndex++] + -minPixelValue]; // Alpha\n      canvasImageDataIndex += 4;\n    }\n  } else {\n    while (storedPixelDataIndex < numPixels) {\n      canvasImageDataData[canvasImageDataIndex] = lut[pixelData[storedPixelDataIndex++]]; // Alpha\n      canvasImageDataIndex += 4;\n    }\n  }\n\n  image.stats.lastStoredPixelDataToCanvasImageDataTime = (0, _now2.default)() - start;\n};\n\nvar _now = __webpack_require__(1);\n\nvar _now2 = _interopRequireDefault(_now);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (image, lut, canvasImageDataData) {\n\n  var start = (0, _now2.default)();\n  var pixelData = image.getPixelData();\n\n  image.stats.lastGetPixelDataTime = (0, _now2.default)() - start;\n\n  var minPixelValue = image.minPixelValue;\n  var canvasImageDataIndex = 0;\n  var storedPixelDataIndex = 0;\n  var numPixels = pixelData.length;\n\n  // NOTE: As of Nov 2014, most javascript engines have lower performance when indexing negative indexes.\n  // We have a special code path for this case that improves performance.  Thanks to @jpambrun for this enhancement\n  start = (0, _now2.default)();\n  if (minPixelValue < 0) {\n    while (storedPixelDataIndex < numPixels) {\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++] + -minPixelValue]; // Red\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++] + -minPixelValue]; // Green\n      canvasImageDataData[canvasImageDataIndex] = lut[pixelData[storedPixelDataIndex] + -minPixelValue]; // Blue\n      storedPixelDataIndex += 2;\n      canvasImageDataIndex += 2;\n    }\n  } else {\n    while (storedPixelDataIndex < numPixels) {\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++]]; // Red\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++]]; // Green\n      canvasImageDataData[canvasImageDataIndex] = lut[pixelData[storedPixelDataIndex]]; // Blue\n      storedPixelDataIndex += 2;\n      canvasImageDataIndex += 2;\n    }\n  }\n  image.stats.lastStoredPixelDataToCanvasImageDataTime = (0, _now2.default)() - start;\n};\n\nvar _now = __webpack_require__(1);\n\nvar _now2 = _interopRequireDefault(_now);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _index = __webpack_require__(6);\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _now = __webpack_require__(1);\n\nvar _now2 = _interopRequireDefault(_now);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n *\n * @param {Image} image A Cornerstone Image Object\n * @param {LookupTable|Array} colorLut Lookup table array\n * @param {Uint8ClampedArray} canvasImageDataData canvasImageData.data buffer filled with white pixels\n *\n * @returns {void}\n */\nfunction storedPixelDataToCanvasImageDataColorLUT(image, colorLut, canvasImageDataData) {\n  var start = (0, _now2.default)();\n  var pixelData = image.getPixelData();\n\n  image.stats.lastGetPixelDataTime = (0, _now2.default)() - start;\n\n  var numPixels = pixelData.length;\n  var minPixelValue = image.minPixelValue;\n  var canvasImageDataIndex = 0;\n  var storedPixelDataIndex = 0;\n  var rgba = void 0;\n  var clut = void 0;\n\n  start = (0, _now2.default)();\n\n  if (colorLut instanceof _index2.default.LookupTable) {\n    clut = colorLut.Table;\n  } else {\n    clut = colorLut;\n  }\n\n  if (minPixelValue < 0) {\n    while (storedPixelDataIndex < numPixels) {\n      rgba = clut[pixelData[storedPixelDataIndex++] + -minPixelValue];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[0];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[1];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[2];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[3];\n    }\n  } else {\n    while (storedPixelDataIndex < numPixels) {\n      rgba = clut[pixelData[storedPixelDataIndex++]];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[0];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[1];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[2];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[3];\n    }\n  }\n\n  image.stats.lastStoredPixelDataToCanvasImageDataTime = (0, _now2.default)() - start;\n}\n\nexports.default = storedPixelDataToCanvasImageDataColorLUT;\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _index = __webpack_require__(6);\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _now = __webpack_require__(1);\n\nvar _now2 = _interopRequireDefault(_now);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n *\n * @param {Image} image A Cornerstone Image Object\n * @param {Array} grayscaleLut Lookup table array\n * @param {LookupTable|Array} colorLut Lookup table array\n * @param {Uint8ClampedArray} canvasImageDataData canvasImageData.data buffer filled with white pixels\n *\n * @returns {void}\n */\nfunction storedPixelDataToCanvasImageDataPseudocolorLUT(image, grayscaleLut, colorLut, canvasImageDataData) {\n  var start = (0, _now2.default)();\n  var pixelData = image.getPixelData();\n\n  image.stats.lastGetPixelDataTime = (0, _now2.default)() - start;\n\n  var numPixels = pixelData.length;\n  var minPixelValue = image.minPixelValue;\n  var canvasImageDataIndex = 0;\n  var storedPixelDataIndex = 0;\n  var grayscale = void 0;\n  var rgba = void 0;\n  var clut = void 0;\n\n  start = (0, _now2.default)();\n\n  if (colorLut instanceof _index2.default.LookupTable) {\n    clut = colorLut.Table;\n  } else {\n    clut = colorLut;\n  }\n\n  if (minPixelValue < 0) {\n    while (storedPixelDataIndex < numPixels) {\n      grayscale = grayscaleLut[pixelData[storedPixelDataIndex++] + -minPixelValue];\n      rgba = clut[grayscale];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[0];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[1];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[2];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[3];\n    }\n  } else {\n    while (storedPixelDataIndex < numPixels) {\n      grayscale = grayscaleLut[pixelData[storedPixelDataIndex++]];\n      rgba = clut[grayscale];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[0];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[1];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[2];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[3];\n    }\n  }\n\n  image.stats.lastStoredPixelDataToCanvasImageDataTime = (0, _now2.default)() - start;\n}\n\nexports.default = storedPixelDataToCanvasImageDataPseudocolorLUT;\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (enabledElement) {\n  var scale = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n\n  var transform = new _transform.Transform();\n\n  transform.translate(-enabledElement.canvas.width / 2, -enabledElement.canvas.height / 2);\n\n  // Apply the rotation before scaling for non square pixels\n  var angle = enabledElement.viewport.rotation;\n\n  if (angle !== 0) {\n    transform.rotate(angle * Math.PI / 180);\n  }\n\n  // Apply the scale\n  var widthScale = enabledElement.viewport.scale;\n  var heightScale = enabledElement.viewport.scale;\n\n  if (enabledElement.image.rowPixelSpacing < enabledElement.image.columnPixelSpacing) {\n    widthScale *= enabledElement.image.columnPixelSpacing / enabledElement.image.rowPixelSpacing;\n  } else if (enabledElement.image.columnPixelSpacing < enabledElement.image.rowPixelSpacing) {\n    heightScale *= enabledElement.image.rowPixelSpacing / enabledElement.image.columnPixelSpacing;\n  }\n  transform.scale(widthScale, heightScale);\n\n  // Unrotate to so we can translate unrotated\n  if (angle !== 0) {\n    transform.rotate(-angle * Math.PI / 180);\n  }\n\n  // Apply the pan offset\n  transform.translate(enabledElement.viewport.translation.x, enabledElement.viewport.translation.y);\n\n  // Rotate again so we can apply general scale\n  if (angle !== 0) {\n    transform.rotate(angle * Math.PI / 180);\n  }\n\n  var xScale = (enabledElement.viewport.hflip ? -1 : 1) * scale;\n  var yScale = (enabledElement.viewport.vflip ? -1 : 1) * scale;\n\n  transform.scale(xScale, yScale);\n\n  return transform;\n};\n\nvar _transform = __webpack_require__(30);\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.renderLabelMapImage = renderLabelMapImage;\nexports.addLabelMapLayer = addLabelMapLayer;\n\nvar _setToPixelCoordinateSystem = __webpack_require__(7);\n\nvar _setToPixelCoordinateSystem2 = _interopRequireDefault(_setToPixelCoordinateSystem);\n\nvar _now = __webpack_require__(1);\n\nvar _now2 = _interopRequireDefault(_now);\n\nvar _initializeRenderCanvas = __webpack_require__(23);\n\nvar _initializeRenderCanvas2 = _interopRequireDefault(_initializeRenderCanvas);\n\nvar _saveLastRendered = __webpack_require__(11);\n\nvar _saveLastRendered2 = _interopRequireDefault(_saveLastRendered);\n\nvar _doesImageNeedToBeRendered = __webpack_require__(12);\n\nvar _doesImageNeedToBeRendered2 = _interopRequireDefault(_doesImageNeedToBeRendered);\n\nvar _storedPixelDataToCanvasImageDataColorLUT = __webpack_require__(19);\n\nvar _storedPixelDataToCanvasImageDataColorLUT2 = _interopRequireDefault(_storedPixelDataToCanvasImageDataColorLUT);\n\nvar _index = __webpack_require__(6);\n\nvar _index2 = _interopRequireDefault(_index);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getRenderCanvas(enabledElement, image, invalidated) {\n  if (!enabledElement.renderingTools.renderCanvas) {\n    enabledElement.renderingTools.renderCanvas = document.createElement('canvas');\n  }\n\n  var renderCanvas = enabledElement.renderingTools.renderCanvas;\n\n  // TODO: Deprecate enabledElement.options.colormap\n  var colormap = enabledElement.viewport.colormap || enabledElement.options.colormap;\n\n  if (colormap && typeof colormap === 'string') {\n    colormap = _index2.default.getColormap(colormap);\n  }\n\n  if (!colormap) {\n    throw new Error('renderLabelMapImage: colormap not found.');\n  }\n\n  var colormapId = colormap.getId();\n\n  if ((0, _doesImageNeedToBeRendered2.default)(enabledElement, image) === false && invalidated !== true && enabledElement.renderingTools.colormapId === colormapId) {\n    return renderCanvas;\n  }\n\n  // If our render canvas does not match the size of this image reset it\n  // NOTE: This might be inefficient if we are updating multiple images of different\n  // Sizes frequently.\n  if (renderCanvas.width !== image.width || renderCanvas.height !== image.height) {\n    (0, _initializeRenderCanvas2.default)(enabledElement, image);\n  }\n\n  // Get the lut to use\n  var start = (0, _now2.default)();\n\n  if (!enabledElement.renderingTools.colorLut || invalidated || enabledElement.renderingTools.colormapId !== colormapId) {\n    enabledElement.renderingTools.colorLut = colormap.createLookupTable();\n    enabledElement.renderingTools.colormapId = colormapId;\n  }\n\n  image.stats = image.stats || {};\n  image.stats.lastLutGenerateTime = (0, _now2.default)() - start;\n\n  var colorLut = enabledElement.renderingTools.colorLut;\n  var renderCanvasData = enabledElement.renderingTools.renderCanvasData;\n  var renderCanvasContext = enabledElement.renderingTools.renderCanvasContext;\n\n  (0, _storedPixelDataToCanvasImageDataColorLUT2.default)(image, colorLut, renderCanvasData.data);\n\n  start = (0, _now2.default)();\n  renderCanvasContext.putImageData(renderCanvasData, 0, 0);\n  image.stats.lastPutImageDataTime = (0, _now2.default)() - start;\n\n  return renderCanvas;\n}\n\n/**\n * API function to draw a label map image to a given enabledElement\n *\n * @param {EnabledElement} enabledElement The Cornerstone Enabled Element to redraw\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n */\nfunction renderLabelMapImage(enabledElement, invalidated) {\n  if (enabledElement === undefined) {\n    throw new Error('renderLabelMapImage: enabledElement parameter must not be undefined');\n  }\n\n  var image = enabledElement.image;\n\n  if (image === undefined) {\n    throw new Error('renderLabelMapImage: image must be loaded before it can be drawn');\n  }\n\n  // Get the canvas context and reset the transform\n  var context = enabledElement.canvas.getContext('2d');\n\n  context.setTransform(1, 0, 0, 1, 0, 0);\n\n  // Clear the canvas\n  context.fillStyle = 'black';\n  context.fillRect(0, 0, enabledElement.canvas.width, enabledElement.canvas.height);\n\n  // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n  context.imageSmoothingEnabled = !enabledElement.viewport.pixelReplication;\n  context.mozImageSmoothingEnabled = context.imageSmoothingEnabled;\n\n  // Save the canvas context state and apply the viewport properties\n  (0, _setToPixelCoordinateSystem2.default)(enabledElement, context);\n\n  // If no options are set we will retrieve the renderCanvas through the\n  // Normal Canvas rendering path\n  // TODO: Add WebGL support for label map pipeline\n  var renderCanvas = getRenderCanvas(enabledElement, image, invalidated);\n  var width = image.width,\n      height = image.height;\n\n\n  context.drawImage(renderCanvas, 0, 0, width, height, 0, 0, width, height);\n\n  enabledElement.renderingTools = (0, _saveLastRendered2.default)(enabledElement);\n}\n\n/**\n * API function to draw a pseudo-color image to a given layer\n *\n * @param {EnabledElementLayer} layer The layer that the image will be added to\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n */\nfunction addLabelMapLayer(layer, invalidated) {\n  if (layer === undefined) {\n    throw new Error('addLabelMapLayer: layer parameter must not be undefined');\n  }\n\n  var image = layer.image;\n\n  if (image === undefined) {\n    throw new Error('addLabelMapLayer: image must be loaded before it can be drawn');\n  }\n\n  layer.canvas = getRenderCanvas(layer, image, invalidated);\n\n  var context = layer.canvas.getContext('2d');\n\n  // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n  context.imageSmoothingEnabled = !layer.viewport.pixelReplication;\n  context.mozImageSmoothingEnabled = context.imageSmoothingEnabled;\n\n  layer.renderingTools = (0, _saveLastRendered2.default)(layer);\n}\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (enabledElement, image) {\n  console.log('initializeRenderCanvas');\n  var renderCanvas = enabledElement.renderingTools.renderCanvas;\n\n  // Resize the canvas\n  renderCanvas.width = image.width;\n  renderCanvas.height = image.height;\n\n  var canvasContext = renderCanvas.getContext('2d');\n\n  // NOTE - we need to fill the render canvas with white pixels since we\n  // control the luminance using the alpha channel to improve rendering performance.\n  canvasContext.fillStyle = 'white';\n  canvasContext.fillRect(0, 0, renderCanvas.width, renderCanvas.height);\n\n  var renderCanvasData = canvasContext.getImageData(0, 0, image.width, image.height);\n\n  enabledElement.renderingTools.renderCanvasContext = canvasContext;\n  enabledElement.renderingTools.renderCanvasData = renderCanvasData;\n};\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.renderPseudoColorImage = renderPseudoColorImage;\nexports.addPseudoColorLayer = addPseudoColorLayer;\n\nvar _setToPixelCoordinateSystem = __webpack_require__(7);\n\nvar _setToPixelCoordinateSystem2 = _interopRequireDefault(_setToPixelCoordinateSystem);\n\nvar _now = __webpack_require__(1);\n\nvar _now2 = _interopRequireDefault(_now);\n\nvar _initializeRenderCanvas = __webpack_require__(23);\n\nvar _initializeRenderCanvas2 = _interopRequireDefault(_initializeRenderCanvas);\n\nvar _getLut = __webpack_require__(31);\n\nvar _getLut2 = _interopRequireDefault(_getLut);\n\nvar _saveLastRendered = __webpack_require__(11);\n\nvar _saveLastRendered2 = _interopRequireDefault(_saveLastRendered);\n\nvar _doesImageNeedToBeRendered = __webpack_require__(12);\n\nvar _doesImageNeedToBeRendered2 = _interopRequireDefault(_doesImageNeedToBeRendered);\n\nvar _storedPixelDataToCanvasImageDataPseudocolorLUT = __webpack_require__(20);\n\nvar _storedPixelDataToCanvasImageDataPseudocolorLUT2 = _interopRequireDefault(_storedPixelDataToCanvasImageDataPseudocolorLUT);\n\nvar _index = __webpack_require__(6);\n\nvar _index2 = _interopRequireDefault(_index);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getRenderCanvas(enabledElement, image, invalidated) {\n  if (!enabledElement.renderingTools.renderCanvas) {\n    enabledElement.renderingTools.renderCanvas = document.createElement('canvas');\n  }\n\n  var renderCanvas = enabledElement.renderingTools.renderCanvas;\n\n  // TODO: Deprecate enabledElement.options.colormap\n  var colormap = enabledElement.viewport.colormap || enabledElement.options.colormap;\n\n  if (colormap && typeof colormap === 'string') {\n    colormap = _index2.default.getColormap(colormap);\n  }\n\n  if (!colormap) {\n    throw new Error('renderPseudoColorImage: colormap not found.');\n  }\n\n  var colormapId = colormap.getId();\n\n  if ((0, _doesImageNeedToBeRendered2.default)(enabledElement, image) === false && invalidated !== true && enabledElement.renderingTools.colormapId === colormapId) {\n    return renderCanvas;\n  }\n\n  // If our render canvas does not match the size of this image reset it\n  // NOTE: This might be inefficient if we are updating multiple images of different\n  // Sizes frequently.\n  if (renderCanvas.width !== image.width || renderCanvas.height !== image.height) {\n    (0, _initializeRenderCanvas2.default)(enabledElement, image);\n  }\n\n  // Get the lut to use\n  var start = (0, _now2.default)();\n\n  if (!enabledElement.renderingTools.colorLut || invalidated || enabledElement.renderingTools.colormapId !== colormapId) {\n    colormap.setNumberOfColors(256);\n    enabledElement.renderingTools.colorLut = colormap.createLookupTable();\n    enabledElement.renderingTools.colormapId = colormapId;\n  }\n\n  var lut = (0, _getLut2.default)(image, enabledElement.viewport, invalidated);\n\n  image.stats = image.stats || {};\n  image.stats.lastLutGenerateTime = (0, _now2.default)() - start;\n\n  var colorLut = enabledElement.renderingTools.colorLut;\n  var renderCanvasData = enabledElement.renderingTools.renderCanvasData;\n  var renderCanvasContext = enabledElement.renderingTools.renderCanvasContext;\n\n  (0, _storedPixelDataToCanvasImageDataPseudocolorLUT2.default)(image, lut, colorLut, renderCanvasData.data);\n\n  start = (0, _now2.default)();\n  renderCanvasContext.putImageData(renderCanvasData, 0, 0);\n  image.stats.lastPutImageDataTime = (0, _now2.default)() - start;\n\n  return renderCanvas;\n}\n\n/**\n * API function to draw a pseudo-color image to a given enabledElement\n *\n * @param {EnabledElement} enabledElement The Cornerstone Enabled Element to redraw\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n */\nfunction renderPseudoColorImage(enabledElement, invalidated) {\n  if (enabledElement === undefined) {\n    throw new Error('drawImage: enabledElement parameter must not be undefined');\n  }\n\n  var image = enabledElement.image;\n\n  if (image === undefined) {\n    throw new Error('drawImage: image must be loaded before it can be drawn');\n  }\n\n  // Get the canvas context and reset the transform\n  var context = enabledElement.canvas.getContext('2d');\n\n  context.setTransform(1, 0, 0, 1, 0, 0);\n\n  // Clear the canvas\n  context.fillStyle = 'black';\n  context.fillRect(0, 0, enabledElement.canvas.width, enabledElement.canvas.height);\n\n  // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n  context.imageSmoothingEnabled = !enabledElement.viewport.pixelReplication;\n  context.mozImageSmoothingEnabled = context.imageSmoothingEnabled;\n\n  // Save the canvas context state and apply the viewport properties\n  (0, _setToPixelCoordinateSystem2.default)(enabledElement, context);\n\n  // If no options are set we will retrieve the renderCanvas through the\n  // Normal Canvas rendering path\n  // TODO: Add WebGL support for pseudocolor pipeline\n  var renderCanvas = getRenderCanvas(enabledElement, image, invalidated);\n  var width = image.width,\n      height = image.height;\n\n\n  context.drawImage(renderCanvas, 0, 0, width, height, 0, 0, width, height);\n\n  enabledElement.renderingTools = (0, _saveLastRendered2.default)(enabledElement);\n}\n\n/**\n * API function to draw a pseudo-color image to a given layer\n *\n * @param {EnabledElementLayer} layer The layer that the image will be added to\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n */\nfunction addPseudoColorLayer(layer, invalidated) {\n  if (layer === undefined) {\n    throw new Error('addPseudoColorLayer: layer parameter must not be undefined');\n  }\n\n  var image = layer.image;\n\n  if (image === undefined) {\n    throw new Error('addPseudoColorLayer: image must be loaded before it can be drawn');\n  }\n\n  layer.canvas = getRenderCanvas(layer, image, invalidated);\n\n  var context = layer.canvas.getContext('2d');\n\n  // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n  context.imageSmoothingEnabled = !layer.viewport.pixelReplication;\n  context.mozImageSmoothingEnabled = context.imageSmoothingEnabled;\n\n  layer.renderingTools = (0, _saveLastRendered2.default)(layer);\n}\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.rescaleImage = rescaleImage;\nexports.addLayer = addLayer;\nexports.removeLayer = removeLayer;\nexports.getLayer = getLayer;\nexports.getLayers = getLayers;\nexports.getVisibleLayers = getVisibleLayers;\nexports.setActiveLayer = setActiveLayer;\nexports.setLayerImage = setLayerImage;\nexports.getActiveLayer = getActiveLayer;\n\nvar _guid = __webpack_require__(58);\n\nvar _guid2 = _interopRequireDefault(_guid);\n\nvar _enabledElements = __webpack_require__(0);\n\nvar _getDefaultViewport = __webpack_require__(5);\n\nvar _getDefaultViewport2 = _interopRequireDefault(_getDefaultViewport);\n\nvar _updateImage = __webpack_require__(3);\n\nvar _updateImage2 = _interopRequireDefault(_updateImage);\n\nvar _triggerEvent = __webpack_require__(2);\n\nvar _triggerEvent2 = _interopRequireDefault(_triggerEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Helper function to trigger an event on a Cornerstone element with\n * a specific layerId\n *\n * @param {String} eventName The event name (e.g. CornerstoneLayerAdded)\n * @param {EnabledElement} enabledElement The Cornerstone enabled element\n * @param {String} layerId The layer's unique identifier\n * @returns {void}\n */\nfunction triggerEvent(eventName, enabledElement, layerId) {\n  var element = enabledElement.element;\n  var eventData = {\n    viewport: enabledElement.viewport,\n    element: enabledElement.element,\n    image: enabledElement.image,\n    enabledElement: enabledElement,\n    layerId: layerId\n  };\n\n  (0, _triggerEvent2.default)(element, eventName, eventData);\n}\n\n/**\n * Rescale the target layer to the base layer based on the\n * relative size of each image and their pixel dimensions.\n *\n * This function will update the Viewport parameters of the\n * target layer to a new scale.\n *\n * @param {EnabledElementLayer} baseLayer The base layer\n * @param {EnabledElementLayer} targetLayer The target layer to rescale\n * @returns {void}\n */\nfunction rescaleImage(baseLayer, targetLayer) {\n  if (baseLayer.layerId === targetLayer.layerId) {\n    throw new Error('rescaleImage: both arguments represent the same layer');\n  }\n\n  var baseImage = baseLayer.image;\n  var targetImage = targetLayer.image;\n\n  // Return if these images don't have an imageId (e.g. for dynamic images)\n  if (!baseImage.imageId || !targetImage.imageId) {\n    return;\n  }\n\n  // Column pixel spacing need to be considered when calculating the\n  // ratio between the layer added and base layer images\n  var colRelative = targetImage.columnPixelSpacing * targetImage.width / (baseImage.columnPixelSpacing * baseImage.width);\n  var viewportRatio = targetLayer.viewport.scale / baseLayer.viewport.scale * colRelative;\n\n  targetLayer.viewport.scale = baseLayer.viewport.scale * viewportRatio;\n}\n\n/**\n * Add a layer to a Cornerstone element\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @param {Image} image A Cornerstone Image object to add as a new layer\n * @param {Object} options Options for the layer\n *\n * @returns {String} layerId The new layer's unique identifier\n */\nfunction addLayer(element, image, options) {\n  var layerId = (0, _guid2.default)();\n  var enabledElement = (0, _enabledElements.getEnabledElement)(element);\n  var layers = enabledElement.layers;\n  var viewport = void 0;\n\n  if (image) {\n    viewport = (0, _getDefaultViewport2.default)(enabledElement.canvas, image);\n\n    // Override the defaults if any optional viewport settings\n    // have been specified\n    if (options && options.viewport) {\n      viewport = Object.assign(viewport, options.viewport);\n    }\n  }\n\n  // Set syncViewports to true by default when a new layer is added\n  if (enabledElement.syncViewports !== false) {\n    enabledElement.syncViewports = true;\n  }\n\n  var newLayer = {\n    image: image,\n    layerId: layerId,\n    viewport: viewport,\n    options: options || {},\n    renderingTools: {}\n  };\n\n  // Rescale the new layer based on the base layer to make sure\n  // they will have a proportional size (pixel spacing)\n  if (layers.length && image) {\n    rescaleImage(layers[0], newLayer);\n  }\n\n  layers.push(newLayer);\n\n  triggerEvent('CornerstoneLayerAdded', enabledElement, layerId);\n\n  // Set the layer as active if it's the first layer added\n  if (layers.length === 1 && image) {\n    setActiveLayer(element, layerId);\n  }\n\n  return layerId;\n}\n\n/**\n * Remove a layer from a Cornerstone element given a layer ID\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @param {String} layerId The unique identifier for the layer\n * @returns {void}\n */\nfunction removeLayer(element, layerId) {\n  var enabledElement = (0, _enabledElements.getEnabledElement)(element);\n  var layers = enabledElement.layers;\n  var index = enabledElement.layers.findIndex(function (layer) {\n    return layer.layerId === layerId;\n  });\n\n  if (index !== -1) {\n    layers.splice(index, 1);\n\n    // If the current layer is active, and we have other layers,\n    // switch to the first layer that remains in the array\n    if (layerId === enabledElement.activeLayerId && layers.length) {\n      setActiveLayer(element, layers[0].layerId);\n    }\n\n    triggerEvent('CornerstoneLayerRemoved', enabledElement, layerId);\n  }\n}\n\n/**\n * Retrieve a layer from a Cornerstone element given a layer ID\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @param {String} layerId The unique identifier for the layer\n * @return {EnabledElementLayer} The layer\n */\nfunction getLayer(element, layerId) {\n  var enabledElement = (0, _enabledElements.getEnabledElement)(element);\n\n  return enabledElement.layers.find(function (layer) {\n    return layer.layerId === layerId;\n  });\n}\n\n/**\n * Retrieve all layers for a Cornerstone element\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n *\n * @return {EnabledElementLayer[]} An array of layers\n */\nfunction getLayers(element) {\n  var enabledElement = (0, _enabledElements.getEnabledElement)(element);\n\n  return enabledElement.layers;\n}\n\n/**\n * Retrieve all visible layers for a Cornerstone element\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n *\n * @return {EnabledElementLayer[]} An array of layers\n */\nfunction getVisibleLayers(element) {\n  var enabledElement = (0, _enabledElements.getEnabledElement)(element);\n\n  return enabledElement.layers.filter(function (layer) {\n    return layer.options && layer.options.visible !== false && layer.options.opacity !== 0;\n  });\n}\n\n/**\n * Set the active layer for a Cornerstone element\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @param {String} layerId The unique identifier for the layer\n * @returns {void}\n */\nfunction setActiveLayer(element, layerId) {\n  var enabledElement = (0, _enabledElements.getEnabledElement)(element);\n\n  // Stop here if this layer is already active\n  if (enabledElement.activeLayerId === layerId) {\n    return;\n  }\n\n  var index = enabledElement.layers.findIndex(function (layer) {\n    return layer.layerId === layerId;\n  });\n\n  if (index === -1) {\n    throw new Error('setActiveLayer: layer not found in layers array');\n  }\n\n  var layer = enabledElement.layers[index];\n\n  if (!layer.image) {\n    throw new Error('setActiveLayer: layer with undefined image cannot be set as active.');\n  }\n\n  enabledElement.activeLayerId = layerId;\n  enabledElement.image = layer.image;\n  enabledElement.viewport = layer.viewport;\n\n  (0, _updateImage2.default)(element);\n  triggerEvent('CornerstoneActiveLayerChanged', enabledElement, layerId);\n}\n\n/**\n * Set a new image for a specific layerId\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @param {Image} image The image to be displayed in this layer\n * @param {String} [layerId] The unique identifier for the layer\n * @returns {void}\n */\nfunction setLayerImage(element, image, layerId) {\n  var enabledElement = (0, _enabledElements.getEnabledElement)(element);\n  var baseLayer = enabledElement.layers[0];\n\n  var layer = void 0;\n\n  if (layerId) {\n    layer = getLayer(element, layerId);\n  } else {\n    layer = getActiveLayer(element);\n  }\n\n  if (!layer) {\n    throw new Error('setLayerImage: Layer not found');\n  }\n\n  layer.image = image;\n\n  if (!image) {\n    layer.viewport = undefined;\n\n    return;\n  }\n\n  if (!layer.viewport) {\n    var defaultViewport = (0, _getDefaultViewport2.default)(enabledElement);\n\n    // Override the defaults if any optional viewport settings\n    // have been specified\n    if (layer.options && layer.options.viewport) {\n      layer.viewport = Object.assign(defaultViewport, layer.options.viewport);\n    }\n\n    if (baseLayer.layerId !== layerId) {\n      rescaleImage(baseLayer, layer);\n    }\n  }\n}\n\n/**\n * Retrieve the currently active layer for a Cornerstone element\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @return {EnabledElementLayer} The currently active layer\n */\nfunction getActiveLayer(element) {\n  var enabledElement = (0, _enabledElements.getEnabledElement)(element);\n\n  return enabledElement.layers.find(function (layer) {\n    return layer.layerId === enabledElement.activeLayerId;\n  });\n}\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (slope, intercept, modalityLUT) {\n  if (modalityLUT) {\n    return generateNonLinearModalityLUT(modalityLUT);\n  }\n\n  return generateLinearModalityLUT(slope, intercept);\n};\n\n/**\n * Generates a linear modality transformation function\n *\n * See DICOM PS3.3 C.11.1 Modality LUT Module\n *\n * http://dicom.nema.org/medical/Dicom/current/output/chtml/part03/sect_C.11.html\n *\n * @param {Number} slope m in the equation specified by Rescale Intercept (0028,1052).\n * @param {Number} intercept The value b in relationship between stored values (SV) and the output units specified in Rescale Type (0028,1054).\n\n Output units = m*SV + b.\n * @return {function(*): *} A linear modality LUT function. Given a stored pixel it returns the modality pixel value\n */\nfunction generateLinearModalityLUT(slope, intercept) {\n  return function (storedPixelValue) {\n    return storedPixelValue * slope + intercept;\n  };\n}\n\nfunction generateNonLinearModalityLUT(modalityLUT) {\n  var minValue = modalityLUT.lut[0];\n  var maxValue = modalityLUT.lut[modalityLUT.lut.length - 1];\n  var maxValueMapped = modalityLUT.firstValueMapped + modalityLUT.lut.length;\n\n  return function (storedPixelValue) {\n    if (storedPixelValue < modalityLUT.firstValueMapped) {\n      return minValue;\n    } else if (storedPixelValue >= maxValueMapped) {\n      return maxValue;\n    }\n\n    return modalityLUT.lut[storedPixelValue];\n  };\n}\n\n/**\n * Get the appropriate Modality LUT for the current situation.\n *\n * @param {Number} [slope] m in the equation specified by Rescale Intercept (0028,1052).\n * @param {Number} [intercept] The value b in relationship between stored values (SV) and the output units specified in Rescale Type (0028,1054).\n * @param {Function} [modalityLUT] A modality LUT function. Given a stored pixel it returns the modality pixel value.\n *\n * @return {function(*): *} A modality LUT function. Given a stored pixel it returns the modality pixel value.\n */\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getColormapsList = getColormapsList;\nexports.getColormap = getColormap;\n\nvar _lookupTable = __webpack_require__(28);\n\nvar _lookupTable2 = _interopRequireDefault(_lookupTable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar COLOR_TRANSPARENT = [0, 0, 0, 0];\n\n// Colormaps\n//\n// Hot Iron, PET, Hot Metal Blue and PET 20 Step are color palattes\n// Defined by the DICOM standard\n// http://dicom.nema.org/dicom/2013/output/chtml/part06/chapter_B.html\n//\n// All Linear Segmented Colormaps were copied from matplotlib\n// https://github.com/stefanv/matplotlib/blob/master/lib/matplotlib/_cm.py\n\nvar colormapsData = {\n  hotIron: {\n    name: 'Hot Iron',\n    numOfColors: 256,\n    colors: [[0, 0, 0, 255], [2, 0, 0, 255], [4, 0, 0, 255], [6, 0, 0, 255], [8, 0, 0, 255], [10, 0, 0, 255], [12, 0, 0, 255], [14, 0, 0, 255], [16, 0, 0, 255], [18, 0, 0, 255], [20, 0, 0, 255], [22, 0, 0, 255], [24, 0, 0, 255], [26, 0, 0, 255], [28, 0, 0, 255], [30, 0, 0, 255], [32, 0, 0, 255], [34, 0, 0, 255], [36, 0, 0, 255], [38, 0, 0, 255], [40, 0, 0, 255], [42, 0, 0, 255], [44, 0, 0, 255], [46, 0, 0, 255], [48, 0, 0, 255], [50, 0, 0, 255], [52, 0, 0, 255], [54, 0, 0, 255], [56, 0, 0, 255], [58, 0, 0, 255], [60, 0, 0, 255], [62, 0, 0, 255], [64, 0, 0, 255], [66, 0, 0, 255], [68, 0, 0, 255], [70, 0, 0, 255], [72, 0, 0, 255], [74, 0, 0, 255], [76, 0, 0, 255], [78, 0, 0, 255], [80, 0, 0, 255], [82, 0, 0, 255], [84, 0, 0, 255], [86, 0, 0, 255], [88, 0, 0, 255], [90, 0, 0, 255], [92, 0, 0, 255], [94, 0, 0, 255], [96, 0, 0, 255], [98, 0, 0, 255], [100, 0, 0, 255], [102, 0, 0, 255], [104, 0, 0, 255], [106, 0, 0, 255], [108, 0, 0, 255], [110, 0, 0, 255], [112, 0, 0, 255], [114, 0, 0, 255], [116, 0, 0, 255], [118, 0, 0, 255], [120, 0, 0, 255], [122, 0, 0, 255], [124, 0, 0, 255], [126, 0, 0, 255], [128, 0, 0, 255], [130, 0, 0, 255], [132, 0, 0, 255], [134, 0, 0, 255], [136, 0, 0, 255], [138, 0, 0, 255], [140, 0, 0, 255], [142, 0, 0, 255], [144, 0, 0, 255], [146, 0, 0, 255], [148, 0, 0, 255], [150, 0, 0, 255], [152, 0, 0, 255], [154, 0, 0, 255], [156, 0, 0, 255], [158, 0, 0, 255], [160, 0, 0, 255], [162, 0, 0, 255], [164, 0, 0, 255], [166, 0, 0, 255], [168, 0, 0, 255], [170, 0, 0, 255], [172, 0, 0, 255], [174, 0, 0, 255], [176, 0, 0, 255], [178, 0, 0, 255], [180, 0, 0, 255], [182, 0, 0, 255], [184, 0, 0, 255], [186, 0, 0, 255], [188, 0, 0, 255], [190, 0, 0, 255], [192, 0, 0, 255], [194, 0, 0, 255], [196, 0, 0, 255], [198, 0, 0, 255], [200, 0, 0, 255], [202, 0, 0, 255], [204, 0, 0, 255], [206, 0, 0, 255], [208, 0, 0, 255], [210, 0, 0, 255], [212, 0, 0, 255], [214, 0, 0, 255], [216, 0, 0, 255], [218, 0, 0, 255], [220, 0, 0, 255], [222, 0, 0, 255], [224, 0, 0, 255], [226, 0, 0, 255], [228, 0, 0, 255], [230, 0, 0, 255], [232, 0, 0, 255], [234, 0, 0, 255], [236, 0, 0, 255], [238, 0, 0, 255], [240, 0, 0, 255], [242, 0, 0, 255], [244, 0, 0, 255], [246, 0, 0, 255], [248, 0, 0, 255], [250, 0, 0, 255], [252, 0, 0, 255], [254, 0, 0, 255], [255, 0, 0, 255], [255, 2, 0, 255], [255, 4, 0, 255], [255, 6, 0, 255], [255, 8, 0, 255], [255, 10, 0, 255], [255, 12, 0, 255], [255, 14, 0, 255], [255, 16, 0, 255], [255, 18, 0, 255], [255, 20, 0, 255], [255, 22, 0, 255], [255, 24, 0, 255], [255, 26, 0, 255], [255, 28, 0, 255], [255, 30, 0, 255], [255, 32, 0, 255], [255, 34, 0, 255], [255, 36, 0, 255], [255, 38, 0, 255], [255, 40, 0, 255], [255, 42, 0, 255], [255, 44, 0, 255], [255, 46, 0, 255], [255, 48, 0, 255], [255, 50, 0, 255], [255, 52, 0, 255], [255, 54, 0, 255], [255, 56, 0, 255], [255, 58, 0, 255], [255, 60, 0, 255], [255, 62, 0, 255], [255, 64, 0, 255], [255, 66, 0, 255], [255, 68, 0, 255], [255, 70, 0, 255], [255, 72, 0, 255], [255, 74, 0, 255], [255, 76, 0, 255], [255, 78, 0, 255], [255, 80, 0, 255], [255, 82, 0, 255], [255, 84, 0, 255], [255, 86, 0, 255], [255, 88, 0, 255], [255, 90, 0, 255], [255, 92, 0, 255], [255, 94, 0, 255], [255, 96, 0, 255], [255, 98, 0, 255], [255, 100, 0, 255], [255, 102, 0, 255], [255, 104, 0, 255], [255, 106, 0, 255], [255, 108, 0, 255], [255, 110, 0, 255], [255, 112, 0, 255], [255, 114, 0, 255], [255, 116, 0, 255], [255, 118, 0, 255], [255, 120, 0, 255], [255, 122, 0, 255], [255, 124, 0, 255], [255, 126, 0, 255], [255, 128, 4, 255], [255, 130, 8, 255], [255, 132, 12, 255], [255, 134, 16, 255], [255, 136, 20, 255], [255, 138, 24, 255], [255, 140, 28, 255], [255, 142, 32, 255], [255, 144, 36, 255], [255, 146, 40, 255], [255, 148, 44, 255], [255, 150, 48, 255], [255, 152, 52, 255], [255, 154, 56, 255], [255, 156, 60, 255], [255, 158, 64, 255], [255, 160, 68, 255], [255, 162, 72, 255], [255, 164, 76, 255], [255, 166, 80, 255], [255, 168, 84, 255], [255, 170, 88, 255], [255, 172, 92, 255], [255, 174, 96, 255], [255, 176, 100, 255], [255, 178, 104, 255], [255, 180, 108, 255], [255, 182, 112, 255], [255, 184, 116, 255], [255, 186, 120, 255], [255, 188, 124, 255], [255, 190, 128, 255], [255, 192, 132, 255], [255, 194, 136, 255], [255, 196, 140, 255], [255, 198, 144, 255], [255, 200, 148, 255], [255, 202, 152, 255], [255, 204, 156, 255], [255, 206, 160, 255], [255, 208, 164, 255], [255, 210, 168, 255], [255, 212, 172, 255], [255, 214, 176, 255], [255, 216, 180, 255], [255, 218, 184, 255], [255, 220, 188, 255], [255, 222, 192, 255], [255, 224, 196, 255], [255, 226, 200, 255], [255, 228, 204, 255], [255, 230, 208, 255], [255, 232, 212, 255], [255, 234, 216, 255], [255, 236, 220, 255], [255, 238, 224, 255], [255, 240, 228, 255], [255, 242, 232, 255], [255, 244, 236, 255], [255, 246, 240, 255], [255, 248, 244, 255], [255, 250, 248, 255], [255, 252, 252, 255], [255, 255, 255, 255]]\n  },\n  pet: {\n    name: 'PET',\n    numColors: 256,\n    colors: [[0, 0, 0, 255], [0, 2, 1, 255], [0, 4, 3, 255], [0, 6, 5, 255], [0, 8, 7, 255], [0, 10, 9, 255], [0, 12, 11, 255], [0, 14, 13, 255], [0, 16, 15, 255], [0, 18, 17, 255], [0, 20, 19, 255], [0, 22, 21, 255], [0, 24, 23, 255], [0, 26, 25, 255], [0, 28, 27, 255], [0, 30, 29, 255], [0, 32, 31, 255], [0, 34, 33, 255], [0, 36, 35, 255], [0, 38, 37, 255], [0, 40, 39, 255], [0, 42, 41, 255], [0, 44, 43, 255], [0, 46, 45, 255], [0, 48, 47, 255], [0, 50, 49, 255], [0, 52, 51, 255], [0, 54, 53, 255], [0, 56, 55, 255], [0, 58, 57, 255], [0, 60, 59, 255], [0, 62, 61, 255], [0, 65, 63, 255], [0, 67, 65, 255], [0, 69, 67, 255], [0, 71, 69, 255], [0, 73, 71, 255], [0, 75, 73, 255], [0, 77, 75, 255], [0, 79, 77, 255], [0, 81, 79, 255], [0, 83, 81, 255], [0, 85, 83, 255], [0, 87, 85, 255], [0, 89, 87, 255], [0, 91, 89, 255], [0, 93, 91, 255], [0, 95, 93, 255], [0, 97, 95, 255], [0, 99, 97, 255], [0, 101, 99, 255], [0, 103, 101, 255], [0, 105, 103, 255], [0, 107, 105, 255], [0, 109, 107, 255], [0, 111, 109, 255], [0, 113, 111, 255], [0, 115, 113, 255], [0, 117, 115, 255], [0, 119, 117, 255], [0, 121, 119, 255], [0, 123, 121, 255], [0, 125, 123, 255], [0, 128, 125, 255], [1, 126, 127, 255], [3, 124, 129, 255], [5, 122, 131, 255], [7, 120, 133, 255], [9, 118, 135, 255], [11, 116, 137, 255], [13, 114, 139, 255], [15, 112, 141, 255], [17, 110, 143, 255], [19, 108, 145, 255], [21, 106, 147, 255], [23, 104, 149, 255], [25, 102, 151, 255], [27, 100, 153, 255], [29, 98, 155, 255], [31, 96, 157, 255], [33, 94, 159, 255], [35, 92, 161, 255], [37, 90, 163, 255], [39, 88, 165, 255], [41, 86, 167, 255], [43, 84, 169, 255], [45, 82, 171, 255], [47, 80, 173, 255], [49, 78, 175, 255], [51, 76, 177, 255], [53, 74, 179, 255], [55, 72, 181, 255], [57, 70, 183, 255], [59, 68, 185, 255], [61, 66, 187, 255], [63, 64, 189, 255], [65, 63, 191, 255], [67, 61, 193, 255], [69, 59, 195, 255], [71, 57, 197, 255], [73, 55, 199, 255], [75, 53, 201, 255], [77, 51, 203, 255], [79, 49, 205, 255], [81, 47, 207, 255], [83, 45, 209, 255], [85, 43, 211, 255], [86, 41, 213, 255], [88, 39, 215, 255], [90, 37, 217, 255], [92, 35, 219, 255], [94, 33, 221, 255], [96, 31, 223, 255], [98, 29, 225, 255], [100, 27, 227, 255], [102, 25, 229, 255], [104, 23, 231, 255], [106, 21, 233, 255], [108, 19, 235, 255], [110, 17, 237, 255], [112, 15, 239, 255], [114, 13, 241, 255], [116, 11, 243, 255], [118, 9, 245, 255], [120, 7, 247, 255], [122, 5, 249, 255], [124, 3, 251, 255], [126, 1, 253, 255], [128, 0, 255, 255], [130, 2, 252, 255], [132, 4, 248, 255], [134, 6, 244, 255], [136, 8, 240, 255], [138, 10, 236, 255], [140, 12, 232, 255], [142, 14, 228, 255], [144, 16, 224, 255], [146, 18, 220, 255], [148, 20, 216, 255], [150, 22, 212, 255], [152, 24, 208, 255], [154, 26, 204, 255], [156, 28, 200, 255], [158, 30, 196, 255], [160, 32, 192, 255], [162, 34, 188, 255], [164, 36, 184, 255], [166, 38, 180, 255], [168, 40, 176, 255], [170, 42, 172, 255], [171, 44, 168, 255], [173, 46, 164, 255], [175, 48, 160, 255], [177, 50, 156, 255], [179, 52, 152, 255], [181, 54, 148, 255], [183, 56, 144, 255], [185, 58, 140, 255], [187, 60, 136, 255], [189, 62, 132, 255], [191, 64, 128, 255], [193, 66, 124, 255], [195, 68, 120, 255], [197, 70, 116, 255], [199, 72, 112, 255], [201, 74, 108, 255], [203, 76, 104, 255], [205, 78, 100, 255], [207, 80, 96, 255], [209, 82, 92, 255], [211, 84, 88, 255], [213, 86, 84, 255], [215, 88, 80, 255], [217, 90, 76, 255], [219, 92, 72, 255], [221, 94, 68, 255], [223, 96, 64, 255], [225, 98, 60, 255], [227, 100, 56, 255], [229, 102, 52, 255], [231, 104, 48, 255], [233, 106, 44, 255], [235, 108, 40, 255], [237, 110, 36, 255], [239, 112, 32, 255], [241, 114, 28, 255], [243, 116, 24, 255], [245, 118, 20, 255], [247, 120, 16, 255], [249, 122, 12, 255], [251, 124, 8, 255], [253, 126, 4, 255], [255, 128, 0, 255], [255, 130, 4, 255], [255, 132, 8, 255], [255, 134, 12, 255], [255, 136, 16, 255], [255, 138, 20, 255], [255, 140, 24, 255], [255, 142, 28, 255], [255, 144, 32, 255], [255, 146, 36, 255], [255, 148, 40, 255], [255, 150, 44, 255], [255, 152, 48, 255], [255, 154, 52, 255], [255, 156, 56, 255], [255, 158, 60, 255], [255, 160, 64, 255], [255, 162, 68, 255], [255, 164, 72, 255], [255, 166, 76, 255], [255, 168, 80, 255], [255, 170, 85, 255], [255, 172, 89, 255], [255, 174, 93, 255], [255, 176, 97, 255], [255, 178, 101, 255], [255, 180, 105, 255], [255, 182, 109, 255], [255, 184, 113, 255], [255, 186, 117, 255], [255, 188, 121, 255], [255, 190, 125, 255], [255, 192, 129, 255], [255, 194, 133, 255], [255, 196, 137, 255], [255, 198, 141, 255], [255, 200, 145, 255], [255, 202, 149, 255], [255, 204, 153, 255], [255, 206, 157, 255], [255, 208, 161, 255], [255, 210, 165, 255], [255, 212, 170, 255], [255, 214, 174, 255], [255, 216, 178, 255], [255, 218, 182, 255], [255, 220, 186, 255], [255, 222, 190, 255], [255, 224, 194, 255], [255, 226, 198, 255], [255, 228, 202, 255], [255, 230, 206, 255], [255, 232, 210, 255], [255, 234, 214, 255], [255, 236, 218, 255], [255, 238, 222, 255], [255, 240, 226, 255], [255, 242, 230, 255], [255, 244, 234, 255], [255, 246, 238, 255], [255, 248, 242, 255], [255, 250, 246, 255], [255, 252, 250, 255], [255, 255, 255, 255]]\n  },\n  hotMetalBlue: {\n    name: 'Hot Metal Blue',\n    numColors: 256,\n    colors: [[0, 0, 0, 255], [0, 0, 2, 255], [0, 0, 4, 255], [0, 0, 6, 255], [0, 0, 8, 255], [0, 0, 10, 255], [0, 0, 12, 255], [0, 0, 14, 255], [0, 0, 16, 255], [0, 0, 17, 255], [0, 0, 19, 255], [0, 0, 21, 255], [0, 0, 23, 255], [0, 0, 25, 255], [0, 0, 27, 255], [0, 0, 29, 255], [0, 0, 31, 255], [0, 0, 33, 255], [0, 0, 35, 255], [0, 0, 37, 255], [0, 0, 39, 255], [0, 0, 41, 255], [0, 0, 43, 255], [0, 0, 45, 255], [0, 0, 47, 255], [0, 0, 49, 255], [0, 0, 51, 255], [0, 0, 53, 255], [0, 0, 55, 255], [0, 0, 57, 255], [0, 0, 59, 255], [0, 0, 61, 255], [0, 0, 63, 255], [0, 0, 65, 255], [0, 0, 67, 255], [0, 0, 69, 255], [0, 0, 71, 255], [0, 0, 73, 255], [0, 0, 75, 255], [0, 0, 77, 255], [0, 0, 79, 255], [0, 0, 81, 255], [0, 0, 83, 255], [0, 0, 84, 255], [0, 0, 86, 255], [0, 0, 88, 255], [0, 0, 90, 255], [0, 0, 92, 255], [0, 0, 94, 255], [0, 0, 96, 255], [0, 0, 98, 255], [0, 0, 100, 255], [0, 0, 102, 255], [0, 0, 104, 255], [0, 0, 106, 255], [0, 0, 108, 255], [0, 0, 110, 255], [0, 0, 112, 255], [0, 0, 114, 255], [0, 0, 116, 255], [0, 0, 117, 255], [0, 0, 119, 255], [0, 0, 121, 255], [0, 0, 123, 255], [0, 0, 125, 255], [0, 0, 127, 255], [0, 0, 129, 255], [0, 0, 131, 255], [0, 0, 133, 255], [0, 0, 135, 255], [0, 0, 137, 255], [0, 0, 139, 255], [0, 0, 141, 255], [0, 0, 143, 255], [0, 0, 145, 255], [0, 0, 147, 255], [0, 0, 149, 255], [0, 0, 151, 255], [0, 0, 153, 255], [0, 0, 155, 255], [0, 0, 157, 255], [0, 0, 159, 255], [0, 0, 161, 255], [0, 0, 163, 255], [0, 0, 165, 255], [0, 0, 167, 255], [3, 0, 169, 255], [6, 0, 171, 255], [9, 0, 173, 255], [12, 0, 175, 255], [15, 0, 177, 255], [18, 0, 179, 255], [21, 0, 181, 255], [24, 0, 183, 255], [26, 0, 184, 255], [29, 0, 186, 255], [32, 0, 188, 255], [35, 0, 190, 255], [38, 0, 192, 255], [41, 0, 194, 255], [44, 0, 196, 255], [47, 0, 198, 255], [50, 0, 200, 255], [52, 0, 197, 255], [55, 0, 194, 255], [57, 0, 191, 255], [59, 0, 188, 255], [62, 0, 185, 255], [64, 0, 182, 255], [66, 0, 179, 255], [69, 0, 176, 255], [71, 0, 174, 255], [74, 0, 171, 255], [76, 0, 168, 255], [78, 0, 165, 255], [81, 0, 162, 255], [83, 0, 159, 255], [85, 0, 156, 255], [88, 0, 153, 255], [90, 0, 150, 255], [93, 2, 144, 255], [96, 4, 138, 255], [99, 6, 132, 255], [102, 8, 126, 255], [105, 9, 121, 255], [108, 11, 115, 255], [111, 13, 109, 255], [114, 15, 103, 255], [116, 17, 97, 255], [119, 19, 91, 255], [122, 21, 85, 255], [125, 23, 79, 255], [128, 24, 74, 255], [131, 26, 68, 255], [134, 28, 62, 255], [137, 30, 56, 255], [140, 32, 50, 255], [143, 34, 47, 255], [146, 36, 44, 255], [149, 38, 41, 255], [152, 40, 38, 255], [155, 41, 35, 255], [158, 43, 32, 255], [161, 45, 29, 255], [164, 47, 26, 255], [166, 49, 24, 255], [169, 51, 21, 255], [172, 53, 18, 255], [175, 55, 15, 255], [178, 56, 12, 255], [181, 58, 9, 255], [184, 60, 6, 255], [187, 62, 3, 255], [190, 64, 0, 255], [194, 66, 0, 255], [198, 68, 0, 255], [201, 70, 0, 255], [205, 72, 0, 255], [209, 73, 0, 255], [213, 75, 0, 255], [217, 77, 0, 255], [221, 79, 0, 255], [224, 81, 0, 255], [228, 83, 0, 255], [232, 85, 0, 255], [236, 87, 0, 255], [240, 88, 0, 255], [244, 90, 0, 255], [247, 92, 0, 255], [251, 94, 0, 255], [255, 96, 0, 255], [255, 98, 3, 255], [255, 100, 6, 255], [255, 102, 9, 255], [255, 104, 12, 255], [255, 105, 15, 255], [255, 107, 18, 255], [255, 109, 21, 255], [255, 111, 24, 255], [255, 113, 26, 255], [255, 115, 29, 255], [255, 117, 32, 255], [255, 119, 35, 255], [255, 120, 38, 255], [255, 122, 41, 255], [255, 124, 44, 255], [255, 126, 47, 255], [255, 128, 50, 255], [255, 130, 53, 255], [255, 132, 56, 255], [255, 134, 59, 255], [255, 136, 62, 255], [255, 137, 65, 255], [255, 139, 68, 255], [255, 141, 71, 255], [255, 143, 74, 255], [255, 145, 76, 255], [255, 147, 79, 255], [255, 149, 82, 255], [255, 151, 85, 255], [255, 152, 88, 255], [255, 154, 91, 255], [255, 156, 94, 255], [255, 158, 97, 255], [255, 160, 100, 255], [255, 162, 103, 255], [255, 164, 106, 255], [255, 166, 109, 255], [255, 168, 112, 255], [255, 169, 115, 255], [255, 171, 118, 255], [255, 173, 121, 255], [255, 175, 124, 255], [255, 177, 126, 255], [255, 179, 129, 255], [255, 181, 132, 255], [255, 183, 135, 255], [255, 184, 138, 255], [255, 186, 141, 255], [255, 188, 144, 255], [255, 190, 147, 255], [255, 192, 150, 255], [255, 194, 153, 255], [255, 196, 156, 255], [255, 198, 159, 255], [255, 200, 162, 255], [255, 201, 165, 255], [255, 203, 168, 255], [255, 205, 171, 255], [255, 207, 174, 255], [255, 209, 176, 255], [255, 211, 179, 255], [255, 213, 182, 255], [255, 215, 185, 255], [255, 216, 188, 255], [255, 218, 191, 255], [255, 220, 194, 255], [255, 222, 197, 255], [255, 224, 200, 255], [255, 226, 203, 255], [255, 228, 206, 255], [255, 229, 210, 255], [255, 231, 213, 255], [255, 233, 216, 255], [255, 235, 219, 255], [255, 237, 223, 255], [255, 239, 226, 255], [255, 240, 229, 255], [255, 242, 232, 255], [255, 244, 236, 255], [255, 246, 239, 255], [255, 248, 242, 255], [255, 250, 245, 255], [255, 251, 249, 255], [255, 253, 252, 255], [255, 255, 255, 255]]\n  },\n  pet20Step: {\n    name: 'PET 20 Step',\n    numColors: 256,\n    colors: [[0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255]]\n  },\n  gray: {\n    name: 'Gray',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0, 0], [1, 1, 1]],\n      green: [[0, 0, 0], [1, 1, 1]],\n      blue: [[0, 0, 0], [1, 1, 1]]\n    }\n  },\n  jet: {\n    name: 'Jet',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0, 0], [0.35, 0, 0], [0.66, 1, 1], [0.89, 1, 1], [1, 0.5, 0.5]],\n      green: [[0, 0, 0], [0.125, 0, 0], [0.375, 1, 1], [0.64, 1, 1], [0.91, 0, 0], [1, 0, 0]],\n      blue: [[0, 0.5, 0.5], [0.11, 1, 1], [0.34, 1, 1], [0.65, 0, 0], [1, 0, 0]]\n    }\n  },\n  hsv: {\n    name: 'HSV',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 1, 1], [0.158730, 1, 1], [0.174603, 0.968750, 0.968750], [0.333333, 0.031250, 0.031250], [0.349206, 0, 0], [0.666667, 0, 0], [0.682540, 0.031250, 0.031250], [0.841270, 0.968750, 0.968750], [0.857143, 1, 1], [1, 1, 1]],\n      green: [[0, 0, 0], [0.158730, 0.937500, 0.937500], [0.174603, 1, 1], [0.507937, 1, 1], [0.666667, 0.062500, 0.062500], [0.682540, 0, 0], [1, 0, 0]],\n      blue: [[0, 0, 0], [0.333333, 0, 0], [0.349206, 0.062500, 0.062500], [0.507937, 1, 1], [0.841270, 1, 1], [0.857143, 0.937500, 0.937500], [1, 0.09375, 0.09375]]\n    }\n  },\n  hot: {\n    name: 'Hot',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0.0416, 0.0416], [0.365079, 1, 1], [1, 1, 1]],\n      green: [[0, 0, 0], [0.365079, 0, 0], [0.746032, 1, 1], [1, 1, 1]],\n      blue: [[0, 0, 0], [0.746032, 0, 0], [1, 1, 1]]\n    }\n  },\n  cool: {\n    name: 'Cool',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0, 0], [1, 1, 1]],\n      green: [[0, 1, 1], [1, 0, 0]],\n      blue: [[0, 1, 1], [1, 1, 1]]\n    }\n  },\n  spring: {\n    name: 'Spring',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 1, 1], [1, 1, 1]],\n      green: [[0, 0, 0], [1, 1, 1]],\n      blue: [[0, 1, 1], [1, 0, 0]]\n    }\n  },\n  summer: {\n    name: 'Summer',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0, 0], [1, 1, 1]],\n      green: [[0, 0.5, 0.5], [1, 1, 1]],\n      blue: [[0, 0.4, 0.4], [1, 0.4, 0.4]]\n    }\n  },\n  autumn: {\n    name: 'Autumn',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 1, 1], [1, 1, 1]],\n      green: [[0, 0, 0], [1, 1, 1]],\n      blue: [[0, 0, 0], [1, 0, 0]]\n    }\n  },\n  winter: {\n    name: 'Winter',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0, 0], [1, 0, 0]],\n      green: [[0, 0, 0], [1, 1, 1]],\n      blue: [[0, 1, 1], [1, 0.5, 0.5]]\n    }\n  },\n  bone: {\n    name: 'Bone',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0, 0], [0.746032, 0.652778, 0.652778], [1, 1, 1]],\n      green: [[0, 0, 0], [0.365079, 0.319444, 0.319444], [0.746032, 0.777778, 0.777778], [1, 1, 1]],\n      blue: [[0, 0, 0], [0.365079, 0.444444, 0.444444], [1, 1, 1]]\n    }\n  },\n  copper: {\n    name: 'Copper',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0, 0], [0.809524, 1, 1], [1, 1, 1]],\n      green: [[0, 0, 0], [1, 0.7812, 0.7812]],\n      blue: [[0, 0, 0], [1, 0.4975, 0.4975]]\n    }\n  },\n  spectral: {\n    name: 'Spectral',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0, 0], [0.05, 0.4667, 0.4667], [0.10, 0.5333, 0.5333], [0.15, 0, 0], [0.20, 0, 0], [0.25, 0, 0], [0.30, 0, 0], [0.35, 0, 0], [0.40, 0, 0], [0.45, 0, 0], [0.50, 0, 0], [0.55, 0, 0], [0.60, 0, 0], [0.65, 0.7333, 0.7333], [0.70, 0.9333, 0.9333], [0.75, 1, 1], [0.80, 1, 1], [0.85, 1, 1], [0.90, 0.8667, 0.8667], [0.95, 0.80, 0.80], [1, 0.80, 0.80]],\n      green: [[0, 0, 0], [0.05, 0, 0], [0.10, 0, 0], [0.15, 0, 0], [0.20, 0, 0], [0.25, 0.4667, 0.4667], [0.30, 0.6000, 0.6000], [0.35, 0.6667, 0.6667], [0.40, 0.6667, 0.6667], [0.45, 0.6000, 0.6000], [0.50, 0.7333, 0.7333], [0.55, 0.8667, 0.8667], [0.60, 1, 1], [0.65, 1, 1], [0.70, 0.9333, 0.9333], [0.75, 0.8000, 0.8000], [0.80, 0.6000, 0.6000], [0.85, 0, 0], [0.90, 0, 0], [0.95, 0, 0], [1, 0.80, 0.80]],\n      blue: [[0, 0, 0], [0.05, 0.5333, 0.5333], [0.10, 0.6000, 0.6000], [0.15, 0.6667, 0.6667], [0.20, 0.8667, 0.8667], [0.25, 0.8667, 0.8667], [0.30, 0.8667, 0.8667], [0.35, 0.6667, 0.6667], [0.40, 0.5333, 0.5333], [0.45, 0, 0], [0.5, 0, 0], [0.55, 0, 0], [0.60, 0, 0], [0.65, 0, 0], [0.70, 0, 0], [0.75, 0, 0], [0.80, 0, 0], [0.85, 0, 0], [0.90, 0, 0], [0.95, 0, 0], [1, 0.80, 0.80]]\n    }\n  },\n  coolwarm: {\n    name: 'CoolWarm',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0.2298057, 0.2298057], [0.03125, 0.26623388, 0.26623388], [0.0625, 0.30386891, 0.30386891], [0.09375, 0.342804478, 0.342804478], [0.125, 0.38301334, 0.38301334], [0.15625, 0.424369608, 0.424369608], [0.1875, 0.46666708, 0.46666708], [0.21875, 0.509635204, 0.509635204], [0.25, 0.552953156, 0.552953156], [0.28125, 0.596262162, 0.596262162], [0.3125, 0.639176211, 0.639176211], [0.34375, 0.681291281, 0.681291281], [0.375, 0.722193294, 0.722193294], [0.40625, 0.761464949, 0.761464949], [0.4375, 0.798691636, 0.798691636], [0.46875, 0.833466556, 0.833466556], [0.5, 0.865395197, 0.865395197], [0.53125, 0.897787179, 0.897787179], [0.5625, 0.924127593, 0.924127593], [0.59375, 0.944468518, 0.944468518], [0.625, 0.958852946, 0.958852946], [0.65625, 0.96732803, 0.96732803], [0.6875, 0.969954137, 0.969954137], [0.71875, 0.966811177, 0.966811177], [0.75, 0.958003065, 0.958003065], [0.78125, 0.943660866, 0.943660866], [0.8125, 0.923944917, 0.923944917], [0.84375, 0.89904617, 0.89904617], [0.875, 0.869186849, 0.869186849], [0.90625, 0.834620542, 0.834620542], [0.9375, 0.795631745, 0.795631745], [0.96875, 0.752534934, 0.752534934], [1, 0.705673158, 0.705673158]],\n      green: [[0, 0.298717966, 0.298717966], [0.03125, 0.353094838, 0.353094838], [0.0625, 0.406535296, 0.406535296], [0.09375, 0.458757618, 0.458757618], [0.125, 0.50941904, 0.50941904], [0.15625, 0.558148092, 0.558148092], [0.1875, 0.604562568, 0.604562568], [0.21875, 0.648280772, 0.648280772], [0.25, 0.688929332, 0.688929332], [0.28125, 0.726149107, 0.726149107], [0.3125, 0.759599947, 0.759599947], [0.34375, 0.788964712, 0.788964712], [0.375, 0.813952739, 0.813952739], [0.40625, 0.834302879, 0.834302879], [0.4375, 0.849786142, 0.849786142], [0.46875, 0.860207984, 0.860207984], [0.5, 0.86541021, 0.86541021], [0.53125, 0.848937047, 0.848937047], [0.5625, 0.827384882, 0.827384882], [0.59375, 0.800927443, 0.800927443], [0.625, 0.769767752, 0.769767752], [0.65625, 0.734132809, 0.734132809], [0.6875, 0.694266682, 0.694266682], [0.71875, 0.650421156, 0.650421156], [0.75, 0.602842431, 0.602842431], [0.78125, 0.551750968, 0.551750968], [0.8125, 0.49730856, 0.49730856], [0.84375, 0.439559467, 0.439559467], [0.875, 0.378313092, 0.378313092], [0.90625, 0.312874446, 0.312874446], [0.9375, 0.24128379, 0.24128379], [0.96875, 0.157246067, 0.157246067], [1, 0.01555616, 0.01555616]],\n      blue: [[0, 0.753683153, 0.753683153], [0.03125, 0.801466763, 0.801466763], [0.0625, 0.84495867, 0.84495867], [0.09375, 0.883725899, 0.883725899], [0.125, 0.917387822, 0.917387822], [0.15625, 0.945619588, 0.945619588], [0.1875, 0.968154911, 0.968154911], [0.21875, 0.98478814, 0.98478814], [0.25, 0.995375608, 0.995375608], [0.28125, 0.999836203, 0.999836203], [0.3125, 0.998151185, 0.998151185], [0.34375, 0.990363227, 0.990363227], [0.375, 0.976574709, 0.976574709], [0.40625, 0.956945269, 0.956945269], [0.4375, 0.931688648, 0.931688648], [0.46875, 0.901068838, 0.901068838], [0.5, 0.865395561, 0.865395561], [0.53125, 0.820880546, 0.820880546], [0.5625, 0.774508472, 0.774508472], [0.59375, 0.726736146, 0.726736146], [0.625, 0.678007945, 0.678007945], [0.65625, 0.628751763, 0.628751763], [0.6875, 0.579375448, 0.579375448], [0.71875, 0.530263762, 0.530263762], [0.75, 0.481775914, 0.481775914], [0.78125, 0.434243684, 0.434243684], [0.8125, 0.387970225, 0.387970225], [0.84375, 0.343229596, 0.343229596], [0.875, 0.300267182, 0.300267182], [0.90625, 0.259301199, 0.259301199], [0.9375, 0.220525627, 0.220525627], [0.96875, 0.184115123, 0.184115123], [1, 0.150232812, 0.150232812]]\n    }\n  },\n  blues: {\n    name: 'Blues',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0.9686274528503418, 0.9686274528503418], [0.125, 0.87058824300765991, 0.87058824300765991], [0.25, 0.7764706015586853, 0.7764706015586853], [0.375, 0.61960786581039429, 0.61960786581039429], [0.5, 0.41960784792900085, 0.41960784792900085], [0.625, 0.25882354378700256, 0.25882354378700256], [0.75, 0.12941177189350128, 0.12941177189350128], [0.875, 0.031372550874948502, 0.031372550874948502], [1, 0.031372550874948502, 0.031372550874948502]],\n      green: [[0, 0.9843137264251709, 0.9843137264251709], [0.125, 0.92156863212585449, 0.92156863212585449], [0.25, 0.85882353782653809, 0.85882353782653809], [0.375, 0.7921568751335144, 0.7921568751335144], [0.5, 0.68235296010971069, 0.68235296010971069], [0.625, 0.57254904508590698, 0.57254904508590698], [0.75, 0.44313725829124451, 0.44313725829124451], [0.875, 0.31764706969261169, 0.31764706969261169], [1, 0.18823529779911041, 0.18823529779911041]],\n      blue: [[0, 1, 1], [0.125, 0.9686274528503418, 0.9686274528503418], [0.25, 0.93725490570068359, 0.93725490570068359], [0.375, 0.88235294818878174, 0.88235294818878174], [0.5, 0.83921569585800171, 0.83921569585800171], [0.625, 0.7764706015586853, 0.7764706015586853], [0.75, 0.70980393886566162, 0.70980393886566162], [0.875, 0.61176472902297974, 0.61176472902297974], [1, 0.41960784792900085, 0.41960784792900085]]\n    }\n  }\n};\n\n// Generate linearly spaced vectors\n// http://cens.ioc.ee/local/man/matlab/techdoc/ref/linspace.html\nfunction linspace(a, b, n) {\n  n = n === null ? 100 : n;\n\n  var increment = (b - a) / (n - 1);\n  var vector = [];\n\n  while (n-- > 0) {\n    vector.push(a);\n    a += increment;\n  }\n\n  // Make sure the last item will always be \"b\" because most of the\n  // Time we'll get numbers like 1.0000000000000002 instead of 1.\n  vector[vector.length - 1] = b;\n\n  return vector;\n}\n\n// Return the number of elements smaller than \"elem\" (binary search)\nfunction getRank(array, elem) {\n  var left = 0;\n  var right = array.length - 1;\n\n  while (left <= right) {\n    var mid = left + Math.floor((right - left) / 2);\n    var midElem = array[mid];\n\n    if (midElem === elem) {\n      return mid;\n    } else if (elem < midElem) {\n      right = mid - 1;\n    } else {\n      left = mid + 1;\n    }\n  }\n\n  return left;\n}\n\n// Find the indices into a sorted array a such that, if the corresponding elements\n// In v were inserted before the indices, the order of a would be preserved.\n// http://lagrange.univ-lyon1.fr/docs/numpy/1.11.0/reference/generated/numpy.searchsorted.html\nfunction searchSorted(inputArray, values) {\n  var i = void 0;\n  var indexes = [];\n  var len = values.length;\n\n  inputArray.sort(function (a, b) {\n    return a - b;\n  });\n\n  for (i = 0; i < len; i++) {\n    indexes[i] = getRank(inputArray, values[i]);\n  }\n\n  return indexes;\n}\n\n// Create an *N* -element 1-d lookup table\n//\n// *Data* represented by a list of x,y0,y1 mapping correspondences. Each element in this\n// List represents how a value between 0 and 1 (inclusive) represented by x is mapped to\n// A corresponding value between 0 and 1 (inclusive). The two values of y are to allow for\n// Discontinuous mapping functions (say as might be found in a sawtooth) where y0 represents\n// The value of y for values of x <= to that given, and y1 is the value to be used for x >\n// Than that given). The list must start with x=0, end with x=1, and all values of x must be\n// In increasing order. Values between the given mapping points are determined by simple linear\n// Interpolation.\n//\n// The function returns an array \"result\" where result[x*(N-1)] gives the closest value for\n// Values of x between 0 and 1.\nfunction makeMappingArray(N, data, gamma) {\n  var i = void 0;\n  var x = [];\n  var y0 = [];\n  var y1 = [];\n  var lut = [];\n\n  gamma = gamma === null ? 1 : gamma;\n\n  for (i = 0; i < data.length; i++) {\n    var element = data[i];\n\n    x.push((N - 1) * element[0]);\n    y0.push(element[1]);\n    y1.push(element[1]);\n  }\n\n  var xLinSpace = linspace(0, 1, N);\n\n  for (i = 0; i < N; i++) {\n    xLinSpace[i] = (N - 1) * Math.pow(xLinSpace[i], gamma);\n  }\n\n  var xLinSpaceIndexes = searchSorted(x, xLinSpace);\n\n  for (i = 1; i < N - 1; i++) {\n    var index = xLinSpaceIndexes[i];\n    var colorPercent = (xLinSpace[i] - x[index - 1]) / (x[index] - x[index - 1]);\n    var colorDelta = y0[index] - y1[index - 1];\n\n    lut[i] = colorPercent * colorDelta + y1[index - 1];\n  }\n\n  lut[0] = y1[0];\n  lut[N - 1] = y0[data.length - 1];\n\n  return lut;\n}\n\n// Colormap based on lookup tables using linear segments.\n//\n// The lookup table is generated using linear interpolation for each\n// Primary color, with the 0-1 domain divided into any number of\n// Segments.\n//\n// https://github.com/stefanv/matplotlib/blob/3f1a23755e86fef97d51e30e106195f34425c9e3/lib/matplotlib/colors.py#L663\nfunction createLinearSegmentedColormap(segmentedData, N, gamma) {\n  var i = void 0;\n  var lut = [];\n\n  N = N === null ? 256 : N;\n  gamma = gamma === null ? 1 : gamma;\n\n  var redLut = makeMappingArray(N, segmentedData.red, gamma);\n  var greenLut = makeMappingArray(N, segmentedData.green, gamma);\n  var blueLut = makeMappingArray(N, segmentedData.blue, gamma);\n\n  for (i = 0; i < N; i++) {\n    var red = Math.round(redLut[i] * 255);\n    var green = Math.round(greenLut[i] * 255);\n    var blue = Math.round(blueLut[i] * 255);\n    var rgba = [red, green, blue, 255];\n\n    lut.push(rgba);\n  }\n\n  return lut;\n}\n\n/*\n* Return all colormaps (id and name) available\n*/\nfunction getColormapsList() {\n  var colormaps = [];\n  var keys = Object.keys(colormapsData);\n\n  keys.forEach(function (key) {\n    if (colormapsData.hasOwnProperty(key)) {\n      var colormap = colormapsData[key];\n\n      colormaps.push({\n        id: key,\n        name: colormap.name\n      });\n    }\n  });\n\n  colormaps.sort(function (a, b) {\n    var aName = a.name.toLowerCase();\n    var bName = b.name.toLowerCase();\n\n    if (aName === bName) {\n      return 0;\n    }\n\n    return aName < bName ? -1 : 1;\n  });\n\n  return colormaps;\n}\n\n/**\n * Convert the image of a element to a false color image\n *\n * @param {string} id The ID of the colormap\n * @param {Object} colormapData - An object that can contain a name, numColors, gama, segmentedData and/or colors\n *\n * @returns {*} The Colormap Object\n */\nfunction getColormap(id, colormapData) {\n  var colormap = colormapsData[id];\n\n  if (!colormap) {\n    colormap = colormapsData[id] = colormapData || {\n      name: '',\n      colors: []\n    };\n  }\n\n  if (!colormap.colors && colormap.segmentedData) {\n    colormap.colors = createLinearSegmentedColormap(colormap.segmentedData, colormap.numColors, colormap.gamma);\n  }\n\n  return {\n    getId: function getId() {\n      return id;\n    },\n    getColorSchemeName: function getColorSchemeName() {\n      return colormap.name;\n    },\n    setColorSchemeName: function setColorSchemeName(name) {\n      colormap.name = name;\n    },\n    getNumberOfColors: function getNumberOfColors() {\n      return colormap.colors.length;\n    },\n    setNumberOfColors: function setNumberOfColors(numColors) {\n      while (colormap.colors.length < numColors) {\n        colormap.colors.push(COLOR_TRANSPARENT);\n      }\n\n      colormap.colors.length = numColors;\n    },\n    getColor: function getColor(index) {\n      if (this.isValidIndex(index)) {\n        return colormap.colors[index];\n      }\n\n      return COLOR_TRANSPARENT;\n    },\n    getColorRepeating: function getColorRepeating(index) {\n      var numColors = colormap.colors.length;\n\n      index = numColors ? index % numColors : 0;\n\n      return this.getColor(index);\n    },\n    setColor: function setColor(index, rgba) {\n      if (this.isValidIndex(index)) {\n        colormap.colors[index] = rgba;\n      }\n    },\n    addColor: function addColor(rgba) {\n      colormap.colors.push(rgba);\n    },\n    insertColor: function insertColor(index, rgba) {\n      if (this.isValidIndex(index)) {\n        colormap.colors.splice(index, 1, rgba);\n      }\n    },\n    removeColor: function removeColor(index) {\n      if (this.isValidIndex(index)) {\n        colormap.colors.splice(index, 1);\n      }\n    },\n    clearColors: function clearColors() {\n      colormap.colors = [];\n    },\n    buildLookupTable: function buildLookupTable(lut) {\n      if (!lut) {\n        return;\n      }\n\n      var numColors = colormap.colors.length;\n\n      lut.setNumberOfTableValues(numColors);\n\n      for (var i = 0; i < numColors; i++) {\n        lut.setTableValue(i, colormap.colors[i]);\n      }\n    },\n    createLookupTable: function createLookupTable() {\n      var lut = new _lookupTable2.default();\n\n      this.buildLookupTable(lut);\n\n      return lut;\n    },\n    isValidIndex: function isValidIndex(index) {\n      return index >= 0 && index < colormap.colors.length;\n    }\n  };\n}\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// This code was created based on vtkLookupTable\n// http://www.vtk.org/doc/release/5.0/html/a01697.html\n// https://github.com/Kitware/VTK/blob/master/Common/Core/vtkLookupTable.cxx\nvar BELOW_RANGE_COLOR_INDEX = 0;\nvar ABOVE_RANGE_COLOR_INDEX = 1;\nvar NAN_COLOR_INDEX = 2;\n\nfunction HSVToRGB(hue, sat, val) {\n  if (hue > 1) {\n    throw new Error('HSVToRGB expects hue < 1');\n  }\n\n  var rgb = [];\n\n  if (sat === 0) {\n    rgb[0] = val;\n    rgb[1] = val;\n    rgb[2] = val;\n\n    return rgb;\n  }\n\n  var hueCase = Math.floor(hue * 6);\n  var frac = 6 * hue - hueCase;\n  var lx = val * (1 - sat);\n  var ly = val * (1 - sat * frac);\n  var lz = val * (1 - sat * (1 - frac));\n\n  switch (hueCase) {\n\n    /* 0<hue<1/6 */\n    case 0:\n    case 6:\n      rgb[0] = val;\n      rgb[1] = lz;\n      rgb[2] = lx;\n      break;\n\n    /* 1/6<hue<2/6 */\n    case 1:\n      rgb[0] = ly;\n      rgb[1] = val;\n      rgb[2] = lx;\n      break;\n\n    /* 2/6<hue<3/6 */\n    case 2:\n      rgb[0] = lx;\n      rgb[1] = val;\n      rgb[2] = lz;\n      break;\n\n    /* 3/6<hue/4/6 */\n    case 3:\n      rgb[0] = lx;\n      rgb[1] = ly;\n      rgb[2] = val;\n      break;\n\n    /* 4/6<hue<5/6 */\n    case 4:\n      rgb[0] = lz;\n      rgb[1] = lx;\n      rgb[2] = val;\n      break;\n\n    /* 5/6<hue<1 */\n    case 5:\n      rgb[0] = val;\n      rgb[1] = lx;\n      rgb[2] = ly;\n      break;\n  }\n\n  return rgb;\n}\n\nfunction linearIndexLookupMain(v, p) {\n  var dIndex = void 0;\n\n  // NOTE: Added Math.floor since values were not integers? Check VTK source\n  if (v < p.Range[0]) {\n    dIndex = p.MaxIndex + BELOW_RANGE_COLOR_INDEX + 1.5;\n  } else if (v > p.Range[1]) {\n    dIndex = p.MaxIndex + ABOVE_RANGE_COLOR_INDEX + 1.5;\n  } else {\n    dIndex = (v + p.Shift) * p.Scale;\n  }\n\n  return Math.floor(dIndex);\n}\n\nvar LookupTable = function () {\n  function LookupTable() {\n    _classCallCheck(this, LookupTable);\n\n    this.NumberOfColors = 256;\n    this.Ramp = 'linear';\n    this.TableRange = [0, 255];\n    this.HueRange = [0, 0.66667];\n    this.SaturationRange = [1, 1];\n    this.ValueRange = [1, 1];\n    this.AlphaRange = [1, 1];\n    this.NaNColor = [128, 0, 0, 255];\n    this.BelowRangeColor = [0, 0, 0, 255];\n    this.UseBelowRangeColor = true;\n    this.AboveRangeColor = [255, 255, 255, 255];\n    this.UseAboveRangeColor = true;\n    this.InputRange = [0, 255];\n    this.Table = [];\n  }\n\n  _createClass(LookupTable, [{\n    key: 'setNumberOfTableValues',\n    value: function setNumberOfTableValues(number) {\n      this.NumberOfColors = number;\n    }\n  }, {\n    key: 'setRamp',\n    value: function setRamp(ramp) {\n      this.Ramp = ramp;\n    }\n  }, {\n    key: 'setTableRange',\n    value: function setTableRange(start, end) {\n      // Set/Get the minimum/maximum scalar values for scalar mapping.\n      // Scalar values less than minimum range value are clamped to minimum range value.\n      // Scalar values greater than maximum range value are clamped to maximum range value.\n      this.TableRange[0] = start;\n      this.TableRange[1] = end;\n    }\n  }, {\n    key: 'setHueRange',\n    value: function setHueRange(start, end) {\n      // Set the range in hue (using automatic generation). Hue ranges between [0,1].\n      this.HueRange[0] = start;\n      this.HueRange[1] = end;\n    }\n  }, {\n    key: 'setSaturationRange',\n    value: function setSaturationRange(start, end) {\n      // Set the range in saturation (using automatic generation). Saturation ranges between [0,1].\n      this.SaturationRange[0] = start;\n      this.SaturationRange[1] = end;\n    }\n  }, {\n    key: 'setValueRange',\n    value: function setValueRange(start, end) {\n      // Set the range in value (using automatic generation). Value ranges between [0,1].\n      this.ValueRange[0] = start;\n      this.ValueRange[1] = end;\n    }\n  }, {\n    key: 'setRange',\n    value: function setRange(start, end) {\n      this.InputRange[0] = start;\n      this.InputRange[1] = end;\n    }\n  }, {\n    key: 'setAlphaRange',\n    value: function setAlphaRange(start, end) {\n      // Set the range in alpha (using automatic generation). Alpha ranges from [0,1].\n      this.AlphaRange[0] = start;\n      this.AlphaRange[1] = end;\n    }\n  }, {\n    key: 'getColor',\n    value: function getColor(scalar) {\n      // Map one value through the lookup table and return the color as an\n      // RGB array of doubles between 0 and 1.\n      return this.mapValue(scalar);\n    }\n  }, {\n    key: 'build',\n    value: function build(force) {\n      if (this.Table.length > 1 && !force) {\n        return;\n      }\n\n      // Clear the table\n      this.Table = [];\n\n      var maxIndex = this.NumberOfColors - 1;\n\n      var hinc = void 0,\n          sinc = void 0,\n          vinc = void 0,\n          ainc = void 0;\n\n      if (maxIndex) {\n        hinc = (this.HueRange[1] - this.HueRange[0]) / maxIndex;\n        sinc = (this.SaturationRange[1] - this.SaturationRange[0]) / maxIndex;\n        vinc = (this.ValueRange[1] - this.ValueRange[0]) / maxIndex;\n        ainc = (this.AlphaRange[1] - this.AlphaRange[0]) / maxIndex;\n      } else {\n        hinc = sinc = vinc = ainc = 0.0;\n      }\n\n      for (var i = 0; i <= maxIndex; i++) {\n        var hue = this.HueRange[0] + i * hinc;\n        var sat = this.SaturationRange[0] + i * sinc;\n        var val = this.ValueRange[0] + i * vinc;\n        var alpha = this.AlphaRange[0] + i * ainc;\n\n        var rgb = HSVToRGB(hue, sat, val);\n        var c_rgba = [];\n\n        switch (this.Ramp) {\n          case 'scurve':\n            c_rgba[0] = Math.floor(127.5 * (1.0 + Math.cos((1.0 - rgb[0]) * Math.PI)));\n            c_rgba[1] = Math.floor(127.5 * (1.0 + Math.cos((1.0 - rgb[1]) * Math.PI)));\n            c_rgba[2] = Math.floor(127.5 * (1.0 + Math.cos((1.0 - rgb[2]) * Math.PI)));\n            c_rgba[3] = Math.floor(alpha * 255);\n            break;\n          case 'linear':\n            c_rgba[0] = Math.floor(rgb[0] * 255 + 0.5);\n            c_rgba[1] = Math.floor(rgb[1] * 255 + 0.5);\n            c_rgba[2] = Math.floor(rgb[2] * 255 + 0.5);\n            c_rgba[3] = Math.floor(alpha * 255 + 0.5);\n            break;\n          case 'sqrt':\n            c_rgba[0] = Math.floor(Math.sqrt(rgb[0]) * 255 + 0.5);\n            c_rgba[1] = Math.floor(Math.sqrt(rgb[1]) * 255 + 0.5);\n            c_rgba[2] = Math.floor(Math.sqrt(rgb[2]) * 255 + 0.5);\n            c_rgba[3] = Math.floor(Math.sqrt(alpha) * 255 + 0.5);\n            break;\n          default:\n            throw new Error('Invalid Ramp value (' + this.Ramp + ')');\n        }\n\n        this.Table.push(c_rgba);\n      }\n\n      this.buildSpecialColors();\n    }\n  }, {\n    key: 'buildSpecialColors',\n    value: function buildSpecialColors() {\n      var numberOfColors = this.NumberOfColors;\n      var belowRangeColorIndex = numberOfColors + BELOW_RANGE_COLOR_INDEX;\n      var aboveRangeColorIndex = numberOfColors + ABOVE_RANGE_COLOR_INDEX;\n      var nanColorIndex = numberOfColors + NAN_COLOR_INDEX;\n\n      // Below range color\n      if (this.UseBelowRangeColor || numberOfColors === 0) {\n        this.Table[belowRangeColorIndex] = this.BelowRangeColor;\n      } else {\n        // Duplicate the first color in the table.\n        this.Table[belowRangeColorIndex] = this.Table[0];\n      }\n\n      // Above range color\n      if (this.UseAboveRangeColor || numberOfColors === 0) {\n        this.Table[aboveRangeColorIndex] = this.AboveRangeColor;\n      } else {\n        // Duplicate the last color in the table.\n        this.Table[aboveRangeColorIndex] = this.Table[numberOfColors - 1];\n      }\n\n      // Always use NanColor\n      this.Table[nanColorIndex] = this.NaNColor;\n    }\n\n    // Given a scalar value v, return an rgba color value from lookup table.\n\n  }, {\n    key: 'mapValue',\n    value: function mapValue(v) {\n      var index = this.getIndex(v);\n\n      if (index < 0) {\n        return this.NaNColor;\n      } else if (index === 0) {\n        if (this.UseBelowRangeColor && v < this.TableRange[0]) {\n          return this.BelowRangeColor;\n        }\n      } else if (index === this.NumberOfColors - 1) {\n        if (this.UseAboveRangeColor && v > this.TableRange[1]) {\n          return this.AboveRangeColor;\n        }\n      }\n\n      return this.Table[index];\n    }\n  }, {\n    key: 'getIndex',\n    value: function getIndex(v) {\n      var p = {};\n\n      p.Range = [];\n      p.MaxIndex = this.NumberOfColors - 1;\n\n      // This was LookupShiftAndScale\n      p.Shift = -this.TableRange[0];\n      if (this.TableRange[1] <= this.TableRange[0]) {\n        p.Scale = Number.MAX_VALUE;\n      } else {\n        p.Scale = p.MaxIndex / (this.TableRange[1] - this.TableRange[0]);\n      }\n\n      p.Range[0] = this.TableRange[0];\n      p.Range[1] = this.TableRange[1];\n\n      // First, check whether we have a number...\n      if (isNaN(v)) {\n        // For backwards compatibility\n        return -1;\n      }\n\n      // Map to an index:\n      var index = linearIndexLookupMain(v, p);\n\n      // For backwards compatibility, if the index indicates an\n      // Out-of-range value, truncate to index range for in-range colors.\n      if (index === this.NumberOfColors + BELOW_RANGE_COLOR_INDEX) {\n        index = 0;\n      } else if (index === this.NumberOfColors + ABOVE_RANGE_COLOR_INDEX) {\n        index = this.NumberOfColors - 1;\n      }\n\n      return index;\n    }\n  }, {\n    key: 'setTableValue',\n    value: function setTableValue(index, rgba) {\n      // Check if it index, red, green, blue and alpha were passed as parameter\n      if (arguments.length === 5) {\n        rgba = Array.prototype.slice.call(arguments, 1);\n      }\n\n      // Check the index to make sure it is valid\n      if (index < 0) {\n        throw new Error('Can\\'t set the table value for negative index (' + index + ')');\n      }\n\n      if (index >= this.NumberOfColors) {\n        new Error('Index ' + index + ' is greater than the number of colors ' + this.NumberOfColors);\n      }\n\n      this.Table[index] = rgba;\n\n      if (index === 0 || index === this.NumberOfColors - 1) {\n        // This is needed due to the way the special colors are stored in\n        // The internal table. If Above/BelowRangeColors are not used and\n        // The min/max colors are changed in the table with this member\n        // Function, then the colors used for values outside the range may\n        // Be incorrect. Calling this here ensures the out-of-range colors\n        // Are set correctly.\n        this.buildSpecialColors();\n      }\n    }\n  }]);\n\n  return LookupTable;\n}();\n\nexports.default = LookupTable;\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (image, lut, canvasImageDataData) {\n  var start = (0, _now2.default)();\n  var pixelData = image.getPixelData();\n\n  image.stats.lastGetPixelDataTime = (0, _now2.default)() - start;\n\n  var numPixels = pixelData.length;\n  var minPixelValue = image.minPixelValue;\n  var canvasImageDataIndex = 0;\n  var storedPixelDataIndex = 0;\n  var pixelValue = void 0;\n\n  // NOTE: As of Nov 2014, most javascript engines have lower performance when indexing negative indexes.\n  // We have a special code path for this case that improves performance.  Thanks to @jpambrun for this enhancement\n\n  // Added two paths (Int16Array, Uint16Array) to avoid polymorphic deoptimization in chrome.\n  start = (0, _now2.default)();\n  if (pixelData instanceof Int16Array) {\n    if (minPixelValue < 0) {\n      while (storedPixelDataIndex < numPixels) {\n        pixelValue = lut[pixelData[storedPixelDataIndex++] + -minPixelValue];\n        canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n        canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n        canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n        canvasImageDataData[canvasImageDataIndex++] = 255; // Alpha\n      }\n    } else {\n      while (storedPixelDataIndex < numPixels) {\n        pixelValue = lut[pixelData[storedPixelDataIndex++]];\n        canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n        canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n        canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n        canvasImageDataData[canvasImageDataIndex++] = 255; // Alpha\n      }\n    }\n  } else if (pixelData instanceof Uint16Array) {\n    while (storedPixelDataIndex < numPixels) {\n      pixelValue = lut[pixelData[storedPixelDataIndex++]];\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = 255; // Alpha\n    }\n  } else if (minPixelValue < 0) {\n    while (storedPixelDataIndex < numPixels) {\n      pixelValue = lut[pixelData[storedPixelDataIndex++] + -minPixelValue];\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = 255; // Alpha\n    }\n  } else {\n    while (storedPixelDataIndex < numPixels) {\n      pixelValue = lut[pixelData[storedPixelDataIndex++]];\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = 255; // Alpha\n    }\n  }\n\n  image.stats.lastStoredPixelDataToCanvasImageDataTime = (0, _now2.default)() - start;\n};\n\nvar _now = __webpack_require__(1);\n\nvar _now2 = _interopRequireDefault(_now);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// By Simon Sarris\n// Www.simonsarris.com\n// Sarris@acm.org\n//\n// Free to use and distribute at will\n// So long as you are nice to people, etc\n\n// Simple class for keeping track of the current transformation matrix\n\n// For instance:\n//    Var t = new Transform();\n//    T.rotate(5);\n//    Var m = t.m;\n//    Ctx.setTransform(m[0], m[1], m[2], m[3], m[4], m[5]);\n\n// Is equivalent to:\n//    Ctx.rotate(5);\n\n// But now you can retrieve it :)\n\n\n// Remember that this does not account for any CSS transforms applied to the canvas\nvar Transform = exports.Transform = function () {\n  function Transform() {\n    _classCallCheck(this, Transform);\n\n    this.reset();\n  }\n\n  _createClass(Transform, [{\n    key: \"reset\",\n    value: function reset() {\n      this.m = [1, 0, 0, 1, 0, 0];\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      var transform = new Transform();\n\n      transform.m[0] = this.m[0];\n      transform.m[1] = this.m[1];\n      transform.m[2] = this.m[2];\n      transform.m[3] = this.m[3];\n      transform.m[4] = this.m[4];\n      transform.m[5] = this.m[5];\n\n      return transform;\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply(matrix) {\n      var m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n      var m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n\n      var m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n      var m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n\n      var dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n      var dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n\n      this.m[0] = m11;\n      this.m[1] = m12;\n      this.m[2] = m21;\n      this.m[3] = m22;\n      this.m[4] = dx;\n      this.m[5] = dy;\n    }\n  }, {\n    key: \"invert\",\n    value: function invert() {\n      var d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n      var m0 = this.m[3] * d;\n      var m1 = -this.m[1] * d;\n      var m2 = -this.m[2] * d;\n      var m3 = this.m[0] * d;\n      var m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n      var m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n\n      this.m[0] = m0;\n      this.m[1] = m1;\n      this.m[2] = m2;\n      this.m[3] = m3;\n      this.m[4] = m4;\n      this.m[5] = m5;\n    }\n  }, {\n    key: \"rotate\",\n    value: function rotate(rad) {\n      var c = Math.cos(rad);\n      var s = Math.sin(rad);\n      var m11 = this.m[0] * c + this.m[2] * s;\n      var m12 = this.m[1] * c + this.m[3] * s;\n      var m21 = this.m[0] * -s + this.m[2] * c;\n      var m22 = this.m[1] * -s + this.m[3] * c;\n\n      this.m[0] = m11;\n      this.m[1] = m12;\n      this.m[2] = m21;\n      this.m[3] = m22;\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(x, y) {\n      this.m[4] += this.m[0] * x + this.m[2] * y;\n      this.m[5] += this.m[1] * x + this.m[3] * y;\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(sx, sy) {\n      this.m[0] *= sx;\n      this.m[1] *= sx;\n      this.m[2] *= sy;\n      this.m[3] *= sy;\n    }\n  }, {\n    key: \"transformPoint\",\n    value: function transformPoint(px, py) {\n      var x = px;\n      var y = py;\n\n      px = x * this.m[0] + y * this.m[2] + this.m[4];\n      py = x * this.m[1] + y * this.m[3] + this.m[5];\n\n      return {\n        x: px,\n        y: py\n      };\n    }\n  }]);\n\n  return Transform;\n}();\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (image, viewport, invalidated) {\n  // If we have a cached lut and it has the right values, return it immediately\n  if (image.cachedLut !== undefined && image.cachedLut.windowCenter === viewport.voi.windowCenter && image.cachedLut.windowWidth === viewport.voi.windowWidth && (0, _lutMatches2.default)(image.cachedLut.modalityLUT, viewport.modalityLUT) && (0, _lutMatches2.default)(image.cachedLut.voiLUT, viewport.voiLUT) && image.cachedLut.invert === viewport.invert && invalidated !== true) {\n    return image.cachedLut.lutArray;\n  }\n\n  // Lut is invalid or not present, regenerate it and cache it\n  (0, _generateLut2.default)(image, viewport.voi.windowWidth, viewport.voi.windowCenter, viewport.invert, viewport.modalityLUT, viewport.voiLUT);\n\n  image.cachedLut.windowWidth = viewport.voi.windowWidth;\n  image.cachedLut.windowCenter = viewport.voi.windowCenter;\n  image.cachedLut.invert = viewport.invert;\n  image.cachedLut.voiLUT = viewport.voiLUT;\n  image.cachedLut.modalityLUT = viewport.modalityLUT;\n\n  return image.cachedLut.lutArray;\n};\n\nvar _lutMatches = __webpack_require__(45);\n\nvar _lutMatches2 = _interopRequireDefault(_lutMatches);\n\nvar _generateLut = __webpack_require__(9);\n\nvar _generateLut2 = _interopRequireDefault(_generateLut);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _events = __webpack_require__(14);\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _triggerEvent = __webpack_require__(2);\n\nvar _triggerEvent2 = _interopRequireDefault(_triggerEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n * This module deals with caching image textures in VRAM for WebGL\r\n */\n\nvar imageCache = {};\n\nvar cachedImages = [];\n\nvar maximumSizeInBytes = 1024 * 1024 * 256; // 256 MB\nvar cacheSizeInBytes = 0;\n\nfunction getCacheInfo() {\n  return {\n    maximumSizeInBytes: maximumSizeInBytes,\n    cacheSizeInBytes: cacheSizeInBytes,\n    numberOfImagesCached: cachedImages.length\n  };\n}\n\nfunction purgeCacheIfNecessary() {\n  // If max cache size has not been exceeded, do nothing\n  if (cacheSizeInBytes <= maximumSizeInBytes) {\n    return;\n  }\n\n  // Cache size has been exceeded, create list of images sorted by timeStamp\n  // So we can purge the least recently used image\n  function compare(a, b) {\n    if (a.timeStamp > b.timeStamp) {\n      return -1;\n    }\n    if (a.timeStamp < b.timeStamp) {\n      return 1;\n    }\n\n    return 0;\n  }\n  cachedImages.sort(compare);\n\n  // Remove images as necessary\n  while (cacheSizeInBytes > maximumSizeInBytes) {\n    var lastCachedImage = cachedImages[cachedImages.length - 1];\n\n    cacheSizeInBytes -= lastCachedImage.sizeInBytes;\n    delete imageCache[lastCachedImage.imageId];\n    cachedImages.pop();\n\n    (0, _triggerEvent2.default)(_events2.default, 'CornerstoneWebGLTextureRemoved', { imageId: lastCachedImage.imageId });\n  }\n\n  var cacheInfo = getCacheInfo();\n\n  (0, _triggerEvent2.default)(_events2.default, 'CornerstoneWebGLTextureCacheFull', cacheInfo);\n}\n\nfunction setMaximumSizeBytes(numBytes) {\n  if (numBytes === undefined) {\n    throw new Error('setMaximumSizeBytes: parameter numBytes must not be undefined');\n  }\n  if (numBytes.toFixed === undefined) {\n    throw new Error('setMaximumSizeBytes: parameter numBytes must be a number');\n  }\n\n  maximumSizeInBytes = numBytes;\n  purgeCacheIfNecessary();\n}\n\nfunction putImageTexture(image, imageTexture) {\n  var imageId = image.imageId;\n\n  if (image === undefined) {\n    throw new Error('putImageTexture: image must not be undefined');\n  }\n\n  if (imageId === undefined) {\n    throw new Error('putImageTexture: imageId must not be undefined');\n  }\n\n  if (imageTexture === undefined) {\n    throw new Error('putImageTexture: imageTexture must not be undefined');\n  }\n\n  if (Object.prototype.hasOwnProperty.call(imageCache, imageId) === true) {\n    throw new Error('putImageTexture: imageId already in cache');\n  }\n\n  var cachedImage = {\n    imageId: imageId,\n    imageTexture: imageTexture,\n    timeStamp: new Date(),\n    sizeInBytes: imageTexture.sizeInBytes\n  };\n\n  imageCache[imageId] = cachedImage;\n  cachedImages.push(cachedImage);\n\n  if (imageTexture.sizeInBytes === undefined) {\n    throw new Error('putImageTexture: imageTexture.sizeInBytes must not be undefined');\n  }\n  if (imageTexture.sizeInBytes.toFixed === undefined) {\n    throw new Error('putImageTexture: imageTexture.sizeInBytes is not a number');\n  }\n  cacheSizeInBytes += cachedImage.sizeInBytes;\n  purgeCacheIfNecessary();\n}\n\nfunction getImageTexture(imageId) {\n  if (imageId === undefined) {\n    throw new Error('getImageTexture: imageId must not be undefined');\n  }\n  var cachedImage = imageCache[imageId];\n\n  if (cachedImage === undefined) {\n    return;\n  }\n\n  // Bump time stamp for cached image\n  cachedImage.timeStamp = new Date();\n\n  return cachedImage.imageTexture;\n}\n\nfunction removeImageTexture(imageId) {\n  if (imageId === undefined) {\n    throw new Error('removeImageTexture: imageId must not be undefined');\n  }\n  var cachedImage = imageCache[imageId];\n\n  if (cachedImage === undefined) {\n    throw new Error('removeImageTexture: imageId must not be undefined');\n  }\n  cachedImages.splice(cachedImages.indexOf(cachedImage), 1);\n  cacheSizeInBytes -= cachedImage.sizeInBytes;\n  delete imageCache[imageId];\n\n  return cachedImage.imageTexture;\n}\n\nfunction purgeCache() {\n  while (cachedImages.length > 0) {\n    var removedCachedImage = cachedImages.pop();\n\n    delete imageCache[removedCachedImage.imageId];\n  }\n  cacheSizeInBytes = 0;\n}\n\nexports.default = {\n  purgeCache: purgeCache,\n  getImageTexture: getImageTexture,\n  putImageTexture: putImageTexture,\n  removeImageTexture: removeImageTexture,\n  setMaximumSizeBytes: setMaximumSizeBytes\n};\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar $ = window.$;\n\nvar external = {\n  set $(module) {\n    $ = module;\n  },\n  get $() {\n    return $;\n  }\n};\n\nexports.external = external;\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (gl, vertexShaderSrc, fragShaderSrc) {\n  var vertexShader = compileShader(gl, vertexShaderSrc, gl.VERTEX_SHADER);\n  var fragShader = compileShader(gl, fragShaderSrc, gl.FRAGMENT_SHADER);\n\n  return createProgram(gl, vertexShader, fragShader);\n};\n\n/**\n * Creates and compiles a shader.\n *\n * @param {!WebGLRenderingContext} gl The WebGL Context.\n * @param {string} shaderSource The GLSL source code for the shader.\n * @param {number} shaderType The type of shader, VERTEX_SHADER or FRAGMENT_SHADER.\n *\n * @return {!WebGLShader} The shader.\n */\nfunction compileShader(gl, shaderSource, shaderType) {\n\n  // Create the shader object\n  var shader = gl.createShader(shaderType);\n\n  // Set the shader source code.\n  gl.shaderSource(shader, shaderSource);\n\n  // Compile the shader\n  gl.compileShader(shader);\n\n  // Check if it compiled\n  var success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n\n  if (!success && !gl.isContextLost()) {\n    // Something went wrong during compilation; get the error\n    var infoLog = gl.getShaderInfoLog(shader);\n\n    console.error(\"Could not compile shader:\\n\" + infoLog);\n  }\n\n  return shader;\n}\n\n/**\n * Creates a program from 2 shaders.\n *\n * @param {!WebGLRenderingContext} gl The WebGL context.\n * @param {!WebGLShader} vertexShader A vertex shader.\n * @param {!WebGLShader} fragmentShader A fragment shader.\n * @return {!WebGLProgram} A program.\n */\nfunction createProgram(gl, vertexShader, fragmentShader) {\n\n  // Create a program.\n  var program = gl.createProgram();\n\n  // Attach the shaders.\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader);\n\n  // Link the program.\n  gl.linkProgram(program);\n\n  // Check if it linked.\n  var success = gl.getProgramParameter(program, gl.LINK_STATUS);\n\n  if (!success && !gl.isContextLost()) {\n    // Something went wrong with the link\n    var infoLog = gl.getProgramInfoLog(program);\n\n    console.error(\"WebGL program filed to link:\\n\" + infoLog);\n  }\n\n  return program;\n}\n\n/**\n * Creates a program from 2 shaders source (Strings)\n * @param  {!WebGLRenderingContext} gl              The WebGL context.\n * @param  {!WebGLShader} vertexShaderSrc   Vertex shader string\n * @param  {!WebGLShader} fragShaderSrc Fragment shader string\n * @return {!WebGLProgram}                 A program\n */\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.renderWebImage = renderWebImage;\n\nvar _setToPixelCoordinateSystem = __webpack_require__(7);\n\nvar _setToPixelCoordinateSystem2 = _interopRequireDefault(_setToPixelCoordinateSystem);\n\nvar _renderColorImage = __webpack_require__(8);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * API function to draw a standard web image (PNG, JPG) to an enabledImage\n *\n * @param {EnabledElement} enabledElement The Cornerstone Enabled Element to redraw\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n */\n/**\n * This module is responsible for drawing an image to an enabled elements canvas element\n */\nfunction renderWebImage(enabledElement, invalidated) {\n  if (enabledElement === undefined) {\n    throw new Error('renderWebImage: enabledElement parameter must not be undefined');\n  }\n\n  var image = enabledElement.image;\n\n  if (image === undefined) {\n    throw new Error('renderWebImage: image must be loaded before it can be drawn');\n  }\n\n  // If the viewport ww/wc and invert all match the initial state of the image, we can draw the image\n  // Directly. If any of those are changed, we call renderColorImage() to apply the lut\n  if (enabledElement.viewport.voi.windowWidth === enabledElement.image.windowWidth && enabledElement.viewport.voi.windowCenter === enabledElement.image.windowCenter && enabledElement.viewport.invert === false) {\n\n    // Get the canvas context and reset the transform\n    var context = enabledElement.canvas.getContext('2d');\n\n    context.setTransform(1, 0, 0, 1, 0, 0);\n\n    // Clear the canvas\n    context.fillStyle = 'black';\n    context.fillRect(0, 0, enabledElement.canvas.width, enabledElement.canvas.height);\n\n    // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n    context.imageSmoothingEnabled = !enabledElement.viewport.pixelReplication;\n    context.mozImageSmoothingEnabled = context.imageSmoothingEnabled;\n\n    // Save the canvas context state and apply the viewport properties\n    (0, _setToPixelCoordinateSystem2.default)(enabledElement, context);\n\n    context.drawImage(image.getImage(), 0, 0, image.width, image.height, 0, 0, image.width, image.height);\n  } else {\n    (0, _renderColorImage.renderColorImage)(enabledElement, invalidated);\n  }\n}\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _triggerEvent = __webpack_require__(2);\n\nvar _triggerEvent2 = _interopRequireDefault(_triggerEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction applyTransform(enabledElement) {\n  console.time('applyTransform');\n  var element = enabledElement.element,\n      image = enabledElement.image,\n      viewport = enabledElement.viewport,\n      canvas = enabledElement.canvas;\n\n  // Obtain the translation\n\n  var _viewport$translation = viewport.translation,\n      x = _viewport$translation.x,\n      y = _viewport$translation.y;\n\n  var cssTranslateX = x === 0 ? '-50%' : 'calc(' + x + 'px - 50%)';\n  var cssTranslateY = y === 0 ? '-50%' : 'calc(' + y + 'px - 50%)';\n  var translate = 'translate(' + cssTranslateX + ',' + cssTranslateY + ')';\n\n  // We don't need to translate to center to apply scale/rotation thanks to transform-origin\n  // heavy test for small optimisation ?\n  var rotate = '';\n\n  if (viewport.rotation % 360 !== 0) {\n    rotate = 'rotate(' + viewport.rotation + 'deg)';\n  }\n\n  // Use rotation for flip so we can animate it\n  var vflipDegrees = viewport.vflip ? 180 : 0;\n  var hflipDegrees = viewport.hflip ? 180 : 0;\n  var flipX = 'rotateX(' + vflipDegrees + 'deg)';\n  var flipY = 'rotateY(' + hflipDegrees + 'deg)';\n\n  // Scale\n  var widthScale = viewport.scale;\n  var heightScale = viewport.scale;\n\n  if (image) {\n    if (image.rowPixelSpacing < image.columnPixelSpacing) {\n      widthScale *= image.columnPixelSpacing / image.rowPixelSpacing;\n    } else if (image.columnPixelSpacing < image.rowPixelSpacing) {\n      heightScale *= image.rowPixelSpacing / image.columnPixelSpacing;\n    }\n  }\n\n  var scale = 'scale(' + widthScale + ',' + heightScale + ')';\n\n  canvas.style.transform = translate + ' ' + rotate + ' ' + flipX + ' ' + flipY + ' ' + scale;\n\n  /*const detail = {\n    viewport,\n    element,\n    image,\n    enabledElement,\n    canvasContext\n  };*/\n\n  //triggerEvent(element, 'cornerstonetransformupdated', detail);\n\n  console.timeEnd('applyTransform');\n}\n\n// module exports\nexports.default = applyTransform;\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (element, fitViewportToWindow) {\n\n  var enabledElement = (0, _enabledElements.getEnabledElement)(element);\n  var image = enabledElement.image,\n      canvas = enabledElement.canvas;\n\n\n  if (!image) {\n    return;\n  }\n\n  // Avoid setting the same value because it flashes the canvas with IE and Edge\n  if (canvas.width !== image.columns) {\n    canvas.width = image.columns;\n    canvas.style.width = image.columns + 'px';\n  }\n  // Avoid setting the same value because it flashes the canvas with IE and Edge\n  if (canvas.height !== image.rows) {\n    canvas.height = image.rows;\n    canvas.style.height = image.rows + 'px';\n  }\n\n  var eventData = {\n    element: element\n  };\n\n  (0, _triggerEvent2.default)(element, 'CornerstoneElementResized', eventData);\n\n  if (fitViewportToWindow === true) {\n    (0, _fitToWindow2.default)(element);\n  } else {\n    (0, _updateImage2.default)(element);\n  }\n};\n\nvar _enabledElements = __webpack_require__(0);\n\nvar _fitToWindow = __webpack_require__(38);\n\nvar _fitToWindow2 = _interopRequireDefault(_fitToWindow);\n\nvar _updateImage = __webpack_require__(3);\n\nvar _updateImage2 = _interopRequireDefault(_updateImage);\n\nvar _triggerEvent = __webpack_require__(2);\n\nvar _triggerEvent2 = _interopRequireDefault(_triggerEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (element) {\n  var enabledElement = (0, _enabledElements.getEnabledElement)(element);\n  var imageSize = getImageSize(enabledElement);\n\n  var verticalScale = enabledElement.canvas.height / imageSize.height;\n  var horizontalScale = enabledElement.canvas.width / imageSize.width;\n\n  // The new scale is the minimum of the horizontal and vertical scale values\n  enabledElement.viewport.scale = Math.min(horizontalScale, verticalScale);\n\n  enabledElement.viewport.translation.x = 0;\n  enabledElement.viewport.translation.y = 0;\n  (0, _updateImage2.default)(element);\n};\n\nvar _enabledElements = __webpack_require__(0);\n\nvar _updateImage = __webpack_require__(3);\n\nvar _updateImage2 = _interopRequireDefault(_updateImage);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Retrieves the current image dimensions given an enabled element\n *\n * @param {EnabledElement} enabledElement The Cornerstone Enabled Element\n * @return {{width, height}} The Image dimensions\n */\nfunction getImageSize(enabledElement) {\n  if (enabledElement.viewport.rotation === 0 || enabledElement.viewport.rotation === 180) {\n    return {\n      width: enabledElement.image.width,\n      height: enabledElement.image.height\n    };\n  }\n\n  return {\n    width: enabledElement.image.height,\n    height: enabledElement.image.width\n  };\n}\n\n/**\n * Adjusts an image's scale and translation so the image is centered and all pixels\n * in the image are viewable.\n *\n * @param {HTMLElement} element The Cornerstone element to update\n * @returns {void}\n */\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (element, x, y, width, height) {\n  if (element === undefined) {\n    throw new Error('getStoredPixels: parameter element must not be undefined');\n  }\n\n  x = Math.round(x);\n  y = Math.round(y);\n  var enabledElement = (0, _enabledElements.getEnabledElement)(element);\n  var storedPixels = [];\n  var index = 0;\n  var pixelData = enabledElement.image.getPixelData();\n\n  for (var row = 0; row < height; row++) {\n    for (var column = 0; column < width; column++) {\n      var spIndex = (row + y) * enabledElement.image.columns + (column + x);\n\n      storedPixels[index++] = pixelData[spIndex];\n    }\n  }\n\n  return storedPixels;\n};\n\nvar _enabledElements = __webpack_require__(0);\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cachedImages = undefined;\nexports.setMaximumSizeBytes = setMaximumSizeBytes;\nexports.putImagePromise = putImagePromise;\nexports.getImagePromise = getImagePromise;\nexports.removeImagePromise = removeImagePromise;\nexports.getCacheInfo = getCacheInfo;\nexports.purgeCache = purgeCache;\nexports.changeImageIdCacheSize = changeImageIdCacheSize;\n\nvar _events = __webpack_require__(14);\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _triggerEvent = __webpack_require__(2);\n\nvar _triggerEvent2 = _interopRequireDefault(_triggerEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * This module deals with caching images\n */\nvar maximumSizeInBytes = 1024 * 1024 * 1024; // 1 GB\nvar cacheSizeInBytes = 0;\n\n// Dictionary of imageId to cachedImage objects\nvar imageCacheDict = {};\n\n// Array of cachedImage objects\nvar cachedImages = exports.cachedImages = [];\n\nfunction setMaximumSizeBytes(numBytes) {\n  if (numBytes === undefined) {\n    throw new Error('setMaximumSizeBytes: parameter numBytes must not be undefined');\n  }\n  if (numBytes.toFixed === undefined) {\n    throw new Error('setMaximumSizeBytes: parameter numBytes must be a number');\n  }\n\n  maximumSizeInBytes = numBytes;\n\n  (0, _triggerEvent2.default)(_events2.default, 'CornerstoneImageCacheMaximumSizeChanged');\n\n  purgeCacheIfNecessary();\n}\n\nfunction purgeCacheIfNecessary() {\n  // If max cache size has not been exceeded, do nothing\n  if (cacheSizeInBytes <= maximumSizeInBytes) {\n    return;\n  }\n\n  // Cache size has been exceeded, create list of images sorted by timeStamp\n  // So we can purge the least recently used image\n  function compare(a, b) {\n    if (a.timeStamp > b.timeStamp) {\n      return -1;\n    }\n    if (a.timeStamp < b.timeStamp) {\n      return 1;\n    }\n\n    return 0;\n  }\n  cachedImages.sort(compare);\n\n  // Remove images as necessary)\n  while (cacheSizeInBytes > maximumSizeInBytes) {\n    var lastCachedImage = cachedImages[cachedImages.length - 1];\n    var imageId = lastCachedImage.imageId;\n\n    removeImagePromise(imageId);\n\n    (0, _triggerEvent2.default)(_events2.default, 'CornerstoneImageCachePromiseRemoved', { imageId: imageId });\n  }\n\n  var cacheInfo = getCacheInfo();\n\n  (0, _triggerEvent2.default)(_events2.default, 'CornerstoneImageCacheFull', cacheInfo);\n}\n\nfunction putImagePromise(imageId, imagePromise) {\n  if (imageId === undefined) {\n    throw new Error('putImagePromise: imageId must not be undefined');\n  }\n  if (imagePromise === undefined) {\n    throw new Error('putImagePromise: imagePromise must not be undefined');\n  }\n  if (imageCacheDict.hasOwnProperty(imageId) === true) {\n    throw new Error('putImagePromise: imageId already in cache');\n  }\n\n  var cachedImage = {\n    loaded: false,\n    imageId: imageId,\n    sharedCacheKey: undefined, // The sharedCacheKey for this imageId.  undefined by default\n    imagePromise: imagePromise,\n    timeStamp: Date.now(),\n    sizeInBytes: 0\n  };\n\n  imageCacheDict[imageId] = cachedImage;\n  cachedImages.push(cachedImage);\n\n  imagePromise.then(function (image) {\n    if (cachedImages.indexOf(cachedImage) === -1) {\n      // If the image has been purged before being loaded, we stop here.\n      return;\n    }\n\n    cachedImage.loaded = true;\n    cachedImage.image = image;\n\n    if (image.sizeInBytes === undefined) {\n      throw new Error('putImagePromise: sizeInBytes must not be undefined');\n    }\n    if (image.sizeInBytes.toFixed === undefined) {\n      throw new Error('putImagePromise: image.sizeInBytes is not a number');\n    }\n\n    cachedImage.sizeInBytes = image.sizeInBytes;\n    cacheSizeInBytes += cachedImage.sizeInBytes;\n\n    var eventDetails = {\n      action: 'addImage',\n      image: cachedImage\n    };\n\n    (0, _triggerEvent2.default)(_events2.default, 'CornerstoneImageCacheChanged', eventDetails);\n\n    cachedImage.sharedCacheKey = image.sharedCacheKey;\n\n    purgeCacheIfNecessary();\n  });\n}\n\nfunction getImagePromise(imageId) {\n  if (imageId === undefined) {\n    throw new Error('getImagePromise: imageId must not be undefined');\n  }\n  var cachedImage = imageCacheDict[imageId];\n\n  if (cachedImage === undefined) {\n    return;\n  }\n\n  // Bump time stamp for cached image\n  cachedImage.timeStamp = Date.now();\n\n  return cachedImage.imagePromise;\n}\n\nfunction removeImagePromise(imageId) {\n  if (imageId === undefined) {\n    throw new Error('removeImagePromise: imageId must not be undefined');\n  }\n  var cachedImage = imageCacheDict[imageId];\n\n  if (cachedImage === undefined) {\n    throw new Error('removeImagePromise: imageId was not present in imageCache');\n  }\n\n  cachedImage.imagePromise.reject();\n  cachedImages.splice(cachedImages.indexOf(cachedImage), 1);\n  cacheSizeInBytes -= cachedImage.sizeInBytes;\n\n  var eventDetails = {\n    action: 'deleteImage',\n    image: cachedImage\n  };\n\n  (0, _triggerEvent2.default)(_events2.default, 'CornerstoneImageCacheChanged', eventDetails);\n  decache(cachedImage.imagePromise);\n\n  delete imageCacheDict[imageId];\n}\n\nfunction getCacheInfo() {\n  return {\n    maximumSizeInBytes: maximumSizeInBytes,\n    cacheSizeInBytes: cacheSizeInBytes,\n    numberOfImagesCached: cachedImages.length\n  };\n}\n\n// This method should only be called by `removeImagePromise` because it's\n// The one that knows how to deal with shared cache keys and cache size.\nfunction decache(imagePromise) {\n  imagePromise.then(function (image) {\n    if (image.decache) {\n      image.decache();\n    }\n  });\n}\n\nfunction purgeCache() {\n  while (cachedImages.length > 0) {\n    var removedCachedImage = cachedImages[0];\n\n    removeImagePromise(removedCachedImage.imageId);\n  }\n}\n\nfunction changeImageIdCacheSize(imageId, newCacheSize) {\n  var cacheEntry = imageCacheDict[imageId];\n\n  if (cacheEntry) {\n    cacheEntry.imagePromise.then(function (image) {\n      var cacheSizeDifference = newCacheSize - image.sizeInBytes;\n\n      image.sizeInBytes = newCacheSize;\n      cacheEntry.sizeInBytes = newCacheSize;\n      cacheSizeInBytes += cacheSizeDifference;\n\n      var eventDetails = {\n        action: 'changeImageSize',\n        image: image\n      };\n\n      (0, _triggerEvent2.default)(_events2.default, 'CornerstoneImageCacheChanged', eventDetails);\n    });\n  }\n}\n\nexports.default = {\n  imageCache: imageCacheDict,\n  cachedImages: cachedImages,\n  setMaximumSizeBytes: setMaximumSizeBytes,\n  putImagePromise: putImagePromise,\n  getImagePromise: getImagePromise,\n  removeImagePromise: removeImagePromise,\n  getCacheInfo: getCacheInfo,\n  purgeCache: purgeCache,\n  changeImageIdCacheSize: changeImageIdCacheSize\n};\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (image, lookupTable) {\n  if (image.color && !image.falseColor) {\n    throw new Error('Color transforms are not implemented yet');\n  }\n\n  var minPixelValue = image.minPixelValue;\n  var canvasImageDataIndex = 0;\n  var storedPixelDataIndex = 0;\n  var numPixels = image.width * image.height;\n  var origPixelData = image.origPixelData || image.getPixelData();\n  var storedColorPixelData = new Uint8Array(numPixels * 4);\n  var sp = void 0;\n  var mapped = void 0;\n\n  image.color = true;\n  image.falseColor = true;\n  image.origPixelData = origPixelData;\n\n  if (lookupTable instanceof _index2.default.LookupTable) {\n    lookupTable.build();\n\n    while (storedPixelDataIndex < numPixels) {\n      sp = origPixelData[storedPixelDataIndex++];\n      mapped = lookupTable.mapValue(sp);\n      storedColorPixelData[canvasImageDataIndex++] = mapped[0];\n      storedColorPixelData[canvasImageDataIndex++] = mapped[1];\n      storedColorPixelData[canvasImageDataIndex++] = mapped[2];\n      storedColorPixelData[canvasImageDataIndex++] = mapped[3];\n    }\n  } else if (minPixelValue < 0) {\n    while (storedPixelDataIndex < numPixels) {\n      sp = origPixelData[storedPixelDataIndex++];\n      storedColorPixelData[canvasImageDataIndex++] = lookupTable[sp + -minPixelValue][0]; // Red\n      storedColorPixelData[canvasImageDataIndex++] = lookupTable[sp + -minPixelValue][1]; // Green\n      storedColorPixelData[canvasImageDataIndex++] = lookupTable[sp + -minPixelValue][2]; // Blue\n      storedColorPixelData[canvasImageDataIndex++] = lookupTable[sp + -minPixelValue][3]; // Alpha\n    }\n  } else {\n    while (storedPixelDataIndex < numPixels) {\n      sp = origPixelData[storedPixelDataIndex++];\n      storedColorPixelData[canvasImageDataIndex++] = lookupTable[sp][0]; // Red\n      storedColorPixelData[canvasImageDataIndex++] = lookupTable[sp][1]; // Green\n      storedColorPixelData[canvasImageDataIndex++] = lookupTable[sp][2]; // Blue\n      storedColorPixelData[canvasImageDataIndex++] = lookupTable[sp][3]; // Alpha\n    }\n  }\n\n  image.rgba = true;\n  image.cachedLut = undefined;\n  image.render = undefined;\n  image.slope = 1;\n  image.intercept = 0;\n  image.minPixelValue = 0;\n  image.maxPixelValue = 255;\n  image.windowWidth = 255;\n  image.windowCenter = 128;\n  image.getPixelData = function () {\n    return storedColorPixelData;\n  };\n};\n\nvar _index = __webpack_require__(6);\n\nvar _index2 = _interopRequireDefault(_index);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _drawImage = __webpack_require__(4);\n\nObject.defineProperty(exports, 'drawImage', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_drawImage).default;\n  }\n});\n\nvar _generateLut = __webpack_require__(9);\n\nObject.defineProperty(exports, 'generateLut', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_generateLut).default;\n  }\n});\n\nvar _getDefaultViewport = __webpack_require__(5);\n\nObject.defineProperty(exports, 'getDefaultViewport', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_getDefaultViewport).default;\n  }\n});\n\nvar _requestAnimationFrame = __webpack_require__(16);\n\nObject.defineProperty(exports, 'requestAnimationFrame', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_requestAnimationFrame).default;\n  }\n});\n\nvar _storedPixelDataToCanvasImageData = __webpack_require__(17);\n\nObject.defineProperty(exports, 'storedPixelDataToCanvasImageData', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_storedPixelDataToCanvasImageData).default;\n  }\n});\n\nvar _storedColorPixelDataToCanvasImageData = __webpack_require__(18);\n\nObject.defineProperty(exports, 'storedColorPixelDataToCanvasImageData', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_storedColorPixelDataToCanvasImageData).default;\n  }\n});\n\nvar _storedPixelDataToCanvasImageDataColorLUT = __webpack_require__(19);\n\nObject.defineProperty(exports, 'storedPixelDataToCanvasImageDataColorLUT', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_storedPixelDataToCanvasImageDataColorLUT).default;\n  }\n});\n\nvar _storedPixelDataToCanvasImageDataPseudocolorLUT = __webpack_require__(20);\n\nObject.defineProperty(exports, 'storedPixelDataToCanvasImageDataPseudocolorLUT', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_storedPixelDataToCanvasImageDataPseudocolorLUT).default;\n  }\n});\n\nvar _index = __webpack_require__(44);\n\nObject.defineProperty(exports, 'internal', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_index).default;\n  }\n});\n\nvar _renderLabelMapImage = __webpack_require__(22);\n\nObject.defineProperty(exports, 'renderLabelMapImage', {\n  enumerable: true,\n  get: function get() {\n    return _renderLabelMapImage.renderLabelMapImage;\n  }\n});\n\nvar _renderPseudoColorImage = __webpack_require__(24);\n\nObject.defineProperty(exports, 'renderPseudoColorImage', {\n  enumerable: true,\n  get: function get() {\n    return _renderPseudoColorImage.renderPseudoColorImage;\n  }\n});\n\nvar _renderColorImage = __webpack_require__(8);\n\nObject.defineProperty(exports, 'renderColorImage', {\n  enumerable: true,\n  get: function get() {\n    return _renderColorImage.renderColorImage;\n  }\n});\n\nvar _renderGrayscaleImage = __webpack_require__(15);\n\nObject.defineProperty(exports, 'renderGrayscaleImage', {\n  enumerable: true,\n  get: function get() {\n    return _renderGrayscaleImage.renderGrayscaleImage;\n  }\n});\n\nvar _renderWebImage = __webpack_require__(35);\n\nObject.defineProperty(exports, 'renderWebImage', {\n  enumerable: true,\n  get: function get() {\n    return _renderWebImage.renderWebImage;\n  }\n});\n\nvar _canvasToPixel = __webpack_require__(55);\n\nObject.defineProperty(exports, 'canvasToPixel', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_canvasToPixel).default;\n  }\n});\n\nvar _disable = __webpack_require__(56);\n\nObject.defineProperty(exports, 'disable', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_disable).default;\n  }\n});\n\nvar _displayImage = __webpack_require__(57);\n\nObject.defineProperty(exports, 'displayImage', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_displayImage).default;\n  }\n});\n\nvar _draw = __webpack_require__(59);\n\nObject.defineProperty(exports, 'draw', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_draw).default;\n  }\n});\n\nvar _drawInvalidated = __webpack_require__(60);\n\nObject.defineProperty(exports, 'drawInvalidated', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_drawInvalidated).default;\n  }\n});\n\nvar _enable = __webpack_require__(61);\n\nObject.defineProperty(exports, 'enable', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_enable).default;\n  }\n});\n\nvar _enabledElementData = __webpack_require__(64);\n\nObject.defineProperty(exports, 'getElementData', {\n  enumerable: true,\n  get: function get() {\n    return _enabledElementData.getElementData;\n  }\n});\nObject.defineProperty(exports, 'removeElementData', {\n  enumerable: true,\n  get: function get() {\n    return _enabledElementData.removeElementData;\n  }\n});\n\nvar _enabledElements = __webpack_require__(0);\n\nObject.defineProperty(exports, 'getEnabledElement', {\n  enumerable: true,\n  get: function get() {\n    return _enabledElements.getEnabledElement;\n  }\n});\nObject.defineProperty(exports, 'addEnabledElement', {\n  enumerable: true,\n  get: function get() {\n    return _enabledElements.addEnabledElement;\n  }\n});\nObject.defineProperty(exports, 'getEnabledElementsByImageId', {\n  enumerable: true,\n  get: function get() {\n    return _enabledElements.getEnabledElementsByImageId;\n  }\n});\nObject.defineProperty(exports, 'getEnabledElements', {\n  enumerable: true,\n  get: function get() {\n    return _enabledElements.getEnabledElements;\n  }\n});\n\nvar _layers = __webpack_require__(25);\n\nObject.defineProperty(exports, 'addLayer', {\n  enumerable: true,\n  get: function get() {\n    return _layers.addLayer;\n  }\n});\nObject.defineProperty(exports, 'removeLayer', {\n  enumerable: true,\n  get: function get() {\n    return _layers.removeLayer;\n  }\n});\nObject.defineProperty(exports, 'getLayer', {\n  enumerable: true,\n  get: function get() {\n    return _layers.getLayer;\n  }\n});\nObject.defineProperty(exports, 'getLayers', {\n  enumerable: true,\n  get: function get() {\n    return _layers.getLayers;\n  }\n});\nObject.defineProperty(exports, 'getVisibleLayers', {\n  enumerable: true,\n  get: function get() {\n    return _layers.getVisibleLayers;\n  }\n});\nObject.defineProperty(exports, 'setActiveLayer', {\n  enumerable: true,\n  get: function get() {\n    return _layers.setActiveLayer;\n  }\n});\nObject.defineProperty(exports, 'getActiveLayer', {\n  enumerable: true,\n  get: function get() {\n    return _layers.getActiveLayer;\n  }\n});\nObject.defineProperty(exports, 'setLayerImage', {\n  enumerable: true,\n  get: function get() {\n    return _layers.setLayerImage;\n  }\n});\n\nvar _fitToWindow = __webpack_require__(38);\n\nObject.defineProperty(exports, 'fitToWindow', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_fitToWindow).default;\n  }\n});\n\nvar _getDefaultViewportForImage = __webpack_require__(65);\n\nObject.defineProperty(exports, 'getDefaultViewportForImage', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_getDefaultViewportForImage).default;\n  }\n});\n\nvar _getImage = __webpack_require__(66);\n\nObject.defineProperty(exports, 'getImage', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_getImage).default;\n  }\n});\n\nvar _getPixels = __webpack_require__(67);\n\nObject.defineProperty(exports, 'getPixels', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_getPixels).default;\n  }\n});\n\nvar _getStoredPixels = __webpack_require__(39);\n\nObject.defineProperty(exports, 'getStoredPixels', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_getStoredPixels).default;\n  }\n});\n\nvar _getViewport = __webpack_require__(68);\n\nObject.defineProperty(exports, 'getViewport', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_getViewport).default;\n  }\n});\n\nvar _imageLoader = __webpack_require__(69);\n\nObject.defineProperty(exports, 'loadImage', {\n  enumerable: true,\n  get: function get() {\n    return _imageLoader.loadImage;\n  }\n});\nObject.defineProperty(exports, 'loadAndCacheImage', {\n  enumerable: true,\n  get: function get() {\n    return _imageLoader.loadAndCacheImage;\n  }\n});\nObject.defineProperty(exports, 'registerImageLoader', {\n  enumerable: true,\n  get: function get() {\n    return _imageLoader.registerImageLoader;\n  }\n});\nObject.defineProperty(exports, 'registerUnknownImageLoader', {\n  enumerable: true,\n  get: function get() {\n    return _imageLoader.registerUnknownImageLoader;\n  }\n});\n\nvar _invalidate = __webpack_require__(70);\n\nObject.defineProperty(exports, 'invalidate', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_invalidate).default;\n  }\n});\n\nvar _invalidateImageId = __webpack_require__(71);\n\nObject.defineProperty(exports, 'invalidateImageId', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_invalidateImageId).default;\n  }\n});\n\nvar _pageToPixel = __webpack_require__(72);\n\nObject.defineProperty(exports, 'pageToPixel', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_pageToPixel).default;\n  }\n});\n\nvar _pixelToCanvas = __webpack_require__(73);\n\nObject.defineProperty(exports, 'pixelToCanvas', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_pixelToCanvas).default;\n  }\n});\n\nvar _reset = __webpack_require__(74);\n\nObject.defineProperty(exports, 'reset', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_reset).default;\n  }\n});\n\nvar _resize = __webpack_require__(37);\n\nObject.defineProperty(exports, 'resize', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_resize).default;\n  }\n});\n\nvar _setToPixelCoordinateSystem = __webpack_require__(7);\n\nObject.defineProperty(exports, 'setToPixelCoordinateSystem', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_setToPixelCoordinateSystem).default;\n  }\n});\n\nvar _setViewport = __webpack_require__(75);\n\nObject.defineProperty(exports, 'setViewport', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_setViewport).default;\n  }\n});\n\nvar _updateImage = __webpack_require__(3);\n\nObject.defineProperty(exports, 'updateImage', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_updateImage).default;\n  }\n});\n\nvar _pixelDataToFalseColorData = __webpack_require__(41);\n\nObject.defineProperty(exports, 'pixelDataToFalseColorData', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_pixelDataToFalseColorData).default;\n  }\n});\n\nvar _index2 = __webpack_require__(76);\n\nObject.defineProperty(exports, 'rendering', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_index2).default;\n  }\n});\n\nvar _imageCache = __webpack_require__(40);\n\nObject.defineProperty(exports, 'imageCache', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_imageCache).default;\n  }\n});\n\nvar _metaData = __webpack_require__(77);\n\nObject.defineProperty(exports, 'metaData', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_metaData).default;\n  }\n});\n\nvar _index3 = __webpack_require__(13);\n\nObject.defineProperty(exports, 'webGL', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_index3).default;\n  }\n});\n\nvar _index4 = __webpack_require__(6);\n\nObject.defineProperty(exports, 'colors', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_index4).default;\n  }\n});\n\nvar _falseColorMapping = __webpack_require__(78);\n\nObject.defineProperty(exports, 'convertImageToFalseColorImage', {\n  enumerable: true,\n  get: function get() {\n    return _falseColorMapping.convertImageToFalseColorImage;\n  }\n});\nObject.defineProperty(exports, 'convertToFalseColorImage', {\n  enumerable: true,\n  get: function get() {\n    return _falseColorMapping.convertToFalseColorImage;\n  }\n});\nObject.defineProperty(exports, 'restoreImage', {\n  enumerable: true,\n  get: function get() {\n    return _falseColorMapping.restoreImage;\n  }\n});\n\nvar _events = __webpack_require__(14);\n\nObject.defineProperty(exports, 'events', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_events).default;\n  }\n});\n\nvar _triggerEvent = __webpack_require__(2);\n\nObject.defineProperty(exports, 'triggerEvent', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_triggerEvent).default;\n  }\n});\n\nvar _externalModules = __webpack_require__(33);\n\nObject.defineProperty(exports, 'external', {\n  enumerable: true,\n  get: function get() {\n    return _externalModules.external;\n  }\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (windowWidth, windowCenter, voiLUT) {\n  if (voiLUT) {\n    return generateNonLinearVOILUT(voiLUT);\n  }\n\n  return generateLinearVOILUT(windowWidth, windowCenter);\n};\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n/* eslint no-bitwise: 0 */\n\n/**\n * Volume of Interest Lookup Table Function\n *\n * @typedef {Function} VOILUTFunction\n *\n * @param {Number} modalityLutValue\n * @returns {Number} transformed value\n */\n\n/**\n *\n * @param {Number} windowWidth Window Width\n * @param {Number} windowCenter Window Center\n * @returns {VOILUTFunction} VOI LUT mapping function\n */\nfunction generateLinearVOILUT(windowWidth, windowCenter) {\n  return function (modalityLutValue) {\n    return ((modalityLutValue - windowCenter) / windowWidth + 0.5) * 255.0;\n  };\n}\n\n/**\n * Generate a non-linear volume of interest lookup table\n *\n * @param {LUT} voiLUT Volume of Interest Lookup Table Object\n *\n * @returns {VOILUTFunction} VOI LUT mapping function\n */\nfunction generateNonLinearVOILUT(voiLUT) {\n  // We don't trust the voiLUT.numBitsPerEntry, mainly thanks to Agfa!\n  var bitsPerEntry = Math.max.apply(Math, _toConsumableArray(voiLUT.lut)).toString(2).length;\n  var shift = bitsPerEntry - 8;\n  var minValue = voiLUT.lut[0] >> shift;\n  var maxValue = voiLUT.lut[voiLUT.lut.length - 1] >> shift;\n  var maxValueMapped = voiLUT.firstValueMapped + voiLUT.lut.length - 1;\n\n  return function (modalityLutValue) {\n    if (modalityLutValue < voiLUT.firstValueMapped) {\n      return minValue;\n    } else if (modalityLutValue >= maxValueMapped) {\n      return maxValue;\n    }\n\n    return voiLUT.lut[modalityLutValue - voiLUT.firstValueMapped] >> shift;\n  };\n}\n\n/**\n * Retrieve a VOI LUT mapping function given the current windowing settings\n * and the VOI LUT for the image\n *\n * @param {Number} windowWidth Window Width\n * @param {Number} windowCenter Window Center\n * @param {LUT} [voiLUT] Volume of Interest Lookup Table Object\n *\n * @return {VOILUTFunction} VOI LUT mapping function\n */\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _drawImage = __webpack_require__(4);\n\nvar _drawImage2 = _interopRequireDefault(_drawImage);\n\nvar _generateLut = __webpack_require__(9);\n\nvar _generateLut2 = _interopRequireDefault(_generateLut);\n\nvar _getDefaultViewport = __webpack_require__(5);\n\nvar _getDefaultViewport2 = _interopRequireDefault(_getDefaultViewport);\n\nvar _requestAnimationFrame = __webpack_require__(16);\n\nvar _requestAnimationFrame2 = _interopRequireDefault(_requestAnimationFrame);\n\nvar _storedPixelDataToCanvasImageData = __webpack_require__(17);\n\nvar _storedPixelDataToCanvasImageData2 = _interopRequireDefault(_storedPixelDataToCanvasImageData);\n\nvar _storedPixelDataToCanvasImageDataRGBA = __webpack_require__(29);\n\nvar _storedPixelDataToCanvasImageDataRGBA2 = _interopRequireDefault(_storedPixelDataToCanvasImageDataRGBA);\n\nvar _storedColorPixelDataToCanvasImageData = __webpack_require__(18);\n\nvar _storedColorPixelDataToCanvasImageData2 = _interopRequireDefault(_storedColorPixelDataToCanvasImageData);\n\nvar _storedPixelDataToCanvasImageDataColorLUT = __webpack_require__(19);\n\nvar _storedPixelDataToCanvasImageDataColorLUT2 = _interopRequireDefault(_storedPixelDataToCanvasImageDataColorLUT);\n\nvar _storedPixelDataToCanvasImageDataPseudocolorLUT = __webpack_require__(20);\n\nvar _storedPixelDataToCanvasImageDataPseudocolorLUT2 = _interopRequireDefault(_storedPixelDataToCanvasImageDataPseudocolorLUT);\n\nvar _getTransform = __webpack_require__(10);\n\nvar _getTransform2 = _interopRequireDefault(_getTransform);\n\nvar _calculateTransform = __webpack_require__(21);\n\nvar _calculateTransform2 = _interopRequireDefault(_calculateTransform);\n\nvar _transform = __webpack_require__(30);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n  drawImage: _drawImage2.default,\n  generateLut: _generateLut2.default,\n  getDefaultViewport: _getDefaultViewport2.default,\n  requestAnimationFrame: _requestAnimationFrame2.default,\n  storedPixelDataToCanvasImageData: _storedPixelDataToCanvasImageData2.default,\n  storedPixelDataToCanvasImageDataRGBA: _storedPixelDataToCanvasImageDataRGBA2.default,\n  storedPixelDataToCanvasImageDataColorLUT: _storedPixelDataToCanvasImageDataColorLUT2.default,\n  storedPixelDataToCanvasImageDataPseudocolorLUT: _storedPixelDataToCanvasImageDataPseudocolorLUT2.default,\n  storedColorPixelDataToCanvasImageData: _storedColorPixelDataToCanvasImageData2.default,\n  getTransform: _getTransform2.default,\n  calculateTransform: _calculateTransform2.default,\n  Transform: _transform.Transform\n};\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (a, b) {\n  // If undefined, they are equal\n  if (!a && !b) {\n    return true;\n  }\n  // If one is undefined, not equal\n  if (!a || !b) {\n    return false;\n  }\n\n  // Check the unique ids\n  return a.id === b.id;\n};\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (image, lut, canvasImageDataData) {\n\n  var start = (0, _now2.default)();\n  var pixelData = image.getPixelData();\n\n  image.stats.lastGetPixelDataTime = (0, _now2.default)() - start;\n\n  var minPixelValue = image.minPixelValue;\n  var canvasImageDataIndex = 0;\n  var storedPixelDataIndex = 0;\n  var numPixels = pixelData.length;\n\n  // NOTE: As of Nov 2014, most javascript engines have lower performance when indexing negative indexes.\n  // We have a special code path for this case that improves performance.  Thanks to @jpambrun for this enhancement\n  start = (0, _now2.default)();\n  if (minPixelValue < 0) {\n    while (storedPixelDataIndex < numPixels) {\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++] + -minPixelValue]; // Red\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++] + -minPixelValue]; // Green\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++] + -minPixelValue]; // Blue\n      canvasImageDataData[canvasImageDataIndex++] = pixelData[storedPixelDataIndex++];\n    }\n  } else {\n    while (storedPixelDataIndex < numPixels) {\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++]]; // Red\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++]]; // Green\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++]]; // Blue\n      canvasImageDataData[canvasImageDataIndex++] = pixelData[storedPixelDataIndex++];\n    }\n  }\n  image.stats.lastStoredPixelDataToCanvasImageDataTime = (0, _now2.default)() - start;\n};\n\nvar _now = __webpack_require__(1);\n\nvar _now2 = _interopRequireDefault(_now);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isWebGLInitialized = undefined;\nexports.getRenderCanvas = getRenderCanvas;\nexports.initRenderer = initRenderer;\nexports.render = render;\nexports.isWebGLAvailable = isWebGLAvailable;\n\nvar _index = __webpack_require__(48);\n\nvar _vertexShader = __webpack_require__(54);\n\nvar _textureCache = __webpack_require__(32);\n\nvar _textureCache2 = _interopRequireDefault(_textureCache);\n\nvar _createProgramFromString = __webpack_require__(34);\n\nvar _createProgramFromString2 = _interopRequireDefault(_createProgramFromString);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint no-bitwise: 0 */\n\nvar renderCanvas = document.createElement('canvas');\nvar gl = void 0;\nvar texCoordBuffer = void 0;\nvar positionBuffer = void 0;\nvar isWebGLInitialized = false;\n\nexports.isWebGLInitialized = isWebGLInitialized;\nfunction getRenderCanvas() {\n  return renderCanvas;\n}\n\nfunction initShaders() {\n  for (var id in _index.shaders) {\n    // Console.log(\"WEBGL: Loading shader\", id);\n    var shader = _index.shaders[id];\n\n    shader.attributes = {};\n    shader.uniforms = {};\n    shader.vert = _vertexShader.vertexShader;\n\n    shader.program = (0, _createProgramFromString2.default)(gl, shader.vert, shader.frag);\n\n    shader.attributes.texCoordLocation = gl.getAttribLocation(shader.program, 'a_texCoord');\n    gl.enableVertexAttribArray(shader.attributes.texCoordLocation);\n\n    shader.attributes.positionLocation = gl.getAttribLocation(shader.program, 'a_position');\n    gl.enableVertexAttribArray(shader.attributes.positionLocation);\n\n    shader.uniforms.resolutionLocation = gl.getUniformLocation(shader.program, 'u_resolution');\n  }\n}\n\nfunction initRenderer() {\n  if (isWebGLInitialized === true) {\n    // Console.log(\"WEBGL Renderer already initialized\");\n    return;\n  }\n\n  if (initWebGL(renderCanvas)) {\n    initBuffers();\n    initShaders();\n    // Console.log(\"WEBGL Renderer initialized!\");\n    exports.isWebGLInitialized = isWebGLInitialized = true;\n  }\n}\n\nfunction updateRectangle(gl, width, height) {\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([width, height, 0, height, width, 0, 0, 0]), gl.STATIC_DRAW);\n}\n\nfunction handleLostContext(event) {\n  event.preventDefault();\n  console.warn('WebGL Context Lost!');\n}\n\nfunction handleRestoredContext(event) {\n  event.preventDefault();\n  exports.isWebGLInitialized = isWebGLInitialized = false;\n  _textureCache2.default.purgeCache();\n  initRenderer();\n  // Console.log('WebGL Context Restored.');\n}\n\nfunction initWebGL(canvas) {\n\n  gl = null;\n  try {\n    // Try to grab the standard context. If it fails, fallback to experimental.\n    var options = {\n      preserveDrawingBuffer: true // Preserve buffer so we can copy to display canvas element\n    };\n\n    // ---------------- Testing purposes -------------\n    // If (debug === true && WebGLDebugUtils) {\n    //    RenderCanvas = WebGLDebugUtils.makeLostContextSimulatingCanvas(renderCanvas);\n    // }\n    // ---------------- Testing purposes -------------\n\n    gl = canvas.getContext('webgl', options) || canvas.getContext('experimental-webgl', options);\n\n    // Set up event listeners for context lost / context restored\n    canvas.removeEventListener('webglcontextlost', handleLostContext, false);\n    canvas.addEventListener('webglcontextlost', handleLostContext, false);\n\n    canvas.removeEventListener('webglcontextrestored', handleRestoredContext, false);\n    canvas.addEventListener('webglcontextrestored', handleRestoredContext, false);\n  } catch (error) {\n    throw new Error('Error creating WebGL context');\n  }\n\n  // If we don't have a GL context, give up now\n  if (!gl) {\n    console.error('Unable to initialize WebGL. Your browser may not support it.');\n    gl = null;\n  }\n\n  return gl;\n}\n\nfunction getImageDataType(image) {\n  if (image.color) {\n    return 'rgb';\n  }\n\n  var datatype = 'int';\n\n  if (image.minPixelValue >= 0) {\n    datatype = 'u' + datatype;\n  }\n\n  if (image.maxPixelValue > 255) {\n    datatype += '16';\n  } else {\n    datatype += '8';\n  }\n\n  return datatype;\n}\n\nfunction getShaderProgram(image) {\n\n  var datatype = getImageDataType(image);\n  // We need a mechanism for\n  // Choosing the shader based on the image datatype\n  // Console.log(\"Datatype: \" + datatype);\n\n  if (_index.shaders.hasOwnProperty(datatype)) {\n    return _index.shaders[datatype];\n  }\n\n  return _index.shaders.rgb;\n}\n\nfunction generateTexture(image) {\n  var TEXTURE_FORMAT = {\n    uint8: gl.LUMINANCE,\n    int8: gl.LUMINANCE_ALPHA,\n    uint16: gl.LUMINANCE_ALPHA,\n    int16: gl.RGB,\n    rgb: gl.RGB\n  };\n\n  var TEXTURE_BYTES = {\n    int8: 1, // Luminance\n    uint16: 2, // Luminance + Alpha\n    int16: 3, // RGB\n    rgb: 3 // RGB\n  };\n\n  var imageDataType = getImageDataType(image);\n  var format = TEXTURE_FORMAT[imageDataType];\n\n  // GL texture configuration\n  var texture = gl.createTexture();\n\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n  gl.pixelStorei(gl.UNPACK_ALIGNMENT, 1);\n\n  var imageData = _index.dataUtilities[imageDataType].storedPixelDataToImageData(image, image.width, image.height);\n\n  gl.texImage2D(gl.TEXTURE_2D, 0, format, image.width, image.height, 0, format, gl.UNSIGNED_BYTE, imageData);\n\n  // Calculate the size in bytes of this image in memory\n  var sizeInBytes = image.width * image.height * TEXTURE_BYTES[imageDataType];\n\n  return {\n    texture: texture,\n    sizeInBytes: sizeInBytes\n  };\n}\n\nfunction getImageTexture(image) {\n  var imageTexture = _textureCache2.default.getImageTexture(image.imageId);\n\n  if (!imageTexture) {\n    // Console.log(\"Generating texture for imageid: \", image.imageId);\n    imageTexture = generateTexture(image);\n    _textureCache2.default.putImageTexture(image, imageTexture);\n  }\n\n  return imageTexture.texture;\n}\n\nfunction initBuffers() {\n  positionBuffer = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1, 1, 0, 1, 1, 0, 0, 0]), gl.STATIC_DRAW);\n\n  texCoordBuffer = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([1.0, 1.0, 0.0, 1.0, 1.0, 0.0, 0.0, 0.0]), gl.STATIC_DRAW);\n}\n\nfunction renderQuad(shader, parameters, texture, width, height) {\n  gl.clearColor(1.0, 0.0, 0.0, 1.0);\n  gl.viewport(0, 0, width, height);\n\n  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n  gl.useProgram(shader.program);\n\n  gl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);\n  gl.vertexAttribPointer(shader.attributes.texCoordLocation, 2, gl.FLOAT, false, 0, 0);\n\n  gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n  gl.vertexAttribPointer(shader.attributes.positionLocation, 2, gl.FLOAT, false, 0, 0);\n\n  for (var key in parameters) {\n    var uniformLocation = gl.getUniformLocation(shader.program, key);\n\n    if (!uniformLocation) {\n      continue;\n\n      // Disabling this error for now since RGB requires minPixelValue\n      // but the other shaders do not.\n      // throw `Could not access location for uniform: ${key}`;\n    }\n\n    var uniform = parameters[key];\n\n    var type = uniform.type;\n    var value = uniform.value;\n\n    if (type === 'i') {\n      gl.uniform1i(uniformLocation, value);\n    } else if (type === 'f') {\n      gl.uniform1f(uniformLocation, value);\n    } else if (type === '2f') {\n      gl.uniform2f(uniformLocation, value[0], value[1]);\n    }\n  }\n\n  updateRectangle(gl, width, height);\n\n  gl.activeTexture(gl.TEXTURE0);\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n}\n\nfunction render(enabledElement) {\n  // Resize the canvas\n  var image = enabledElement.image;\n\n  renderCanvas.width = image.width;\n  renderCanvas.height = image.height;\n\n  var viewport = enabledElement.viewport;\n\n  // Render the current image\n  var shader = getShaderProgram(image);\n  var texture = getImageTexture(image);\n  var parameters = {\n    u_resolution: { type: '2f',\n      value: [image.width, image.height] },\n    wc: { type: 'f',\n      value: viewport.voi.windowCenter },\n    ww: { type: 'f',\n      value: viewport.voi.windowWidth },\n    slope: { type: 'f',\n      value: image.slope },\n    intercept: { type: 'f',\n      value: image.intercept },\n    minPixelValue: { type: 'f',\n      value: image.minPixelValue },\n    invert: { type: 'i',\n      value: viewport.invert ? 1 : 0 }\n  };\n\n  renderQuad(shader, parameters, texture, image.width, image.height);\n\n  return renderCanvas;\n}\n\nfunction isWebGLAvailable() {\n  // Adapted from\n  // http://stackoverflow.com/questions/9899807/three-js-detect-webgl-support-and-fallback-to-regular-canvas\n\n  var options = {\n    failIfMajorPerformanceCaveat: true\n  };\n\n  try {\n    var canvas = document.createElement('canvas');\n\n    return Boolean(window.WebGLRenderingContext) && (canvas.getContext('webgl', options) || canvas.getContext('experimental-webgl', options));\n  } catch (e) {\n    return false;\n  }\n}\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.dataUtilities = exports.shaders = undefined;\n\nvar _int = __webpack_require__(49);\n\nvar _int2 = __webpack_require__(50);\n\nvar _rgb = __webpack_require__(51);\n\nvar _uint = __webpack_require__(52);\n\nvar _uint2 = __webpack_require__(53);\n\nvar shaders = {\n  int16: _int.int16Shader,\n  int8: _int2.int8Shader,\n  rgb: _rgb.rgbShader,\n  uint16: _uint.uint16Shader,\n  uint8: _uint2.uint8Shader\n};\n\nvar dataUtilities = {\n  int16: _int.int16DataUtilities,\n  int8: _int2.int8DataUtilities,\n  rgb: _rgb.rgbDataUtilities,\n  uint16: _uint.uint16DataUtilities,\n  uint8: _uint2.uint8DataUtilities\n};\n\nexports.shaders = shaders;\nexports.dataUtilities = dataUtilities;\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/* eslint no-bitwise: 0 */\n\nvar int16Shader = {};\n\n/**\n * Convert stored pixel data to image data.\n *\n * Pack int16 into three uint8 channels (r, g, b)\n *\n * @param {Image} image A Cornerstone Image Object\n * @returns {Uint8Array} The image data for use by the WebGL shader\n */\nfunction storedPixelDataToImageData(image) {\n\n    // Transfer image data to alpha and luminance channels of WebGL texture\n    // Credit to @jpambrun and @fernandojsg\n\n    // Pack int16 into three uint8 channels (r, g, b)\n    var pixelData = image.getPixelData();\n    var numberOfChannels = 3;\n    var data = new Uint8Array(image.width * image.height * numberOfChannels);\n    var offset = 0;\n\n    for (var i = 0; i < pixelData.length; i++) {\n        var val = Math.abs(pixelData[i]);\n\n        data[offset++] = val & 0xFF;\n        data[offset++] = val >> 8;\n        data[offset++] = pixelData[i] < 0 ? 0 : 1; // 0 For negative, 1 for positive\n    }\n\n    return data;\n}\n\nvar int16DataUtilities = exports.int16DataUtilities = {\n    storedPixelDataToImageData: storedPixelDataToImageData\n};\n\nint16Shader.frag = 'precision mediump float;' + 'uniform sampler2D u_image;' + 'uniform float ww;' + 'uniform float wc;' + 'uniform float slope;' + 'uniform float intercept;' + 'uniform int invert;' + 'varying vec2 v_texCoord;' + 'void main() {' +\n// Get texture\n'vec4 color = texture2D(u_image, v_texCoord);' +\n\n// Calculate luminance from packed texture\n'float intensity = color.r*256.0 + color.g*65536.0;' + 'if (color.b == 0.0)' + 'intensity = -intensity;' +\n\n// Rescale based on slope and window settings\n'intensity = intensity * slope + intercept;' + 'float center0 = wc - 0.5;' + 'float width0 = max(ww, 1.0);' + 'intensity = (intensity - center0) / width0 + 0.5;' +\n\n// Clamp intensity\n'intensity = clamp(intensity, 0.0, 1.0);' +\n\n// RGBA output\n'gl_FragColor = vec4(intensity, intensity, intensity, 1.0);' +\n\n// Apply any inversion necessary\n'if (invert == 1)' + 'gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;' + '}';\n\nexports.int16Shader = int16Shader;\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar int8Shader = {};\n\n/**\n * Convert stored pixel data to image data.\n *\n * Store data in Uint8Array\n *\n * @param {Image} image A Cornerstone Image Object\n * @returns {Uint8Array} The image data for use by the WebGL shader\n */\nfunction storedPixelDataToImageData(image) {\n    // Transfer image data to alpha channel of WebGL texture\n    // Store data in Uint8Array\n    var pixelData = image.getPixelData();\n    var numberOfChannels = 2;\n    var data = new Uint8Array(image.width * image.height * numberOfChannels);\n    var offset = 0;\n\n    for (var i = 0; i < pixelData.length; i++) {\n        data[offset++] = pixelData[i];\n        data[offset++] = pixelData[i] < 0 ? 0 : 1; // 0 For negative, 1 for positive\n    }\n\n    return data;\n}\n\nvar int8DataUtilities = exports.int8DataUtilities = {\n    storedPixelDataToImageData: storedPixelDataToImageData\n};\n\nint8Shader.frag = 'precision mediump float;' + 'uniform sampler2D u_image;' + 'uniform float ww;' + 'uniform float wc;' + 'uniform float slope;' + 'uniform float intercept;' + 'uniform int invert;' + 'varying vec2 v_texCoord;' + 'void main() {' +\n// Get texture\n'vec4 color = texture2D(u_image, v_texCoord);' +\n\n// Calculate luminance from packed texture\n'float intensity = color.r*256.;' + 'if (color.a == 0.0)' + 'intensity = -intensity;' +\n\n// Rescale based on slope and window settings\n'intensity = intensity * slope + intercept;' + 'float center0 = wc - 0.5;' + 'float width0 = max(ww, 1.0);' + 'intensity = (intensity - center0) / width0 + 0.5;' +\n\n// Clamp intensity\n'intensity = clamp(intensity, 0.0, 1.0);' +\n\n// RGBA output\n'gl_FragColor = vec4(intensity, intensity, intensity, 1.0);' +\n\n// Apply any inversion necessary\n'if (invert == 1)' + 'gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;' + '}';\n\nexports.int8Shader = int8Shader;\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar rgbShader = {};\n\n/**\n * Convert stored pixel data to image data.\n *\n * Pack RGB images into a 3-channel RGB texture\n *\n * @param {Image} image A Cornerstone Image Object\n * @returns {Uint8Array} The image data for use by the WebGL shader\n */\nfunction storedPixelDataToImageData(image) {\n  var minPixelValue = image.minPixelValue;\n  var canvasImageDataIndex = 0;\n  var storedPixelDataIndex = 0;\n  // Only 3 channels, since we use WebGL's RGB texture format\n  var numStoredPixels = image.width * image.height * 4;\n  var numOutputPixels = image.width * image.height * 3;\n  var storedPixelData = image.getPixelData();\n  var data = new Uint8Array(numOutputPixels);\n\n  // NOTE: As of Nov 2014, most javascript engines have lower performance when indexing negative indexes.\n  // We have a special code path for this case that improves performance.  Thanks to @jpambrun for this enhancement\n  if (minPixelValue < 0) {\n    while (storedPixelDataIndex < numStoredPixels) {\n      data[canvasImageDataIndex++] = storedPixelData[storedPixelDataIndex++] + -minPixelValue; // Red\n      data[canvasImageDataIndex++] = storedPixelData[storedPixelDataIndex++] + -minPixelValue; // Green\n      data[canvasImageDataIndex++] = storedPixelData[storedPixelDataIndex++] + -minPixelValue; // Blue\n      storedPixelDataIndex += 1; // The stored pixel data has 4 channels\n    }\n  } else {\n    while (storedPixelDataIndex < numStoredPixels) {\n      data[canvasImageDataIndex++] = storedPixelData[storedPixelDataIndex++]; // Red\n      data[canvasImageDataIndex++] = storedPixelData[storedPixelDataIndex++]; // Green\n      data[canvasImageDataIndex++] = storedPixelData[storedPixelDataIndex++]; // Blue\n      storedPixelDataIndex += 1; // The stored pixel data has 4 channels\n    }\n  }\n\n  return data;\n}\n\nvar rgbDataUtilities = exports.rgbDataUtilities = {\n  storedPixelDataToImageData: storedPixelDataToImageData\n};\n\nrgbShader.frag = 'precision mediump float;' + 'uniform sampler2D u_image;' + 'uniform float ww;' + 'uniform float wc;' + 'uniform float slope;' + 'uniform float intercept;' + 'uniform float minPixelValue;' + 'uniform int invert;' + 'varying vec2 v_texCoord;' + 'void main() {' +\n\n// Get texture\n'vec3 color = texture2D(u_image, v_texCoord).xyz;' +\n\n// Rescale based on slope and intercept\n'color = color * 256.0 * slope + intercept;' +\n\n// Apply window settings\n'float center0 = wc - 0.5 - minPixelValue;' + 'float width0 = max(ww, 1.0);' + 'color = (color - center0) / width0 + 0.5;' +\n\n// RGBA output\n'gl_FragColor = vec4(color, 1);' +\n\n// Apply any inversion necessary\n'if (invert == 1)' + 'gl_FragColor.rgb = 1. - gl_FragColor.rgb;' + '}';\n\nexports.rgbShader = rgbShader;\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/* eslint no-bitwise: 0 */\n\nvar uint16Shader = {};\n\n/**\n * Convert stored pixel data to image data.\n *\n * For uint16 pack uint16 into two uint8 channels (r and a).\n *\n * @param {Image} image A Cornerstone Image Object\n * @returns {Uint8Array} The image data for use by the WebGL shader\n */\nfunction storedPixelDataToImageData(image) {\n\n  // Transfer image data to alpha and luminance channels of WebGL texture\n  // Credit to @jpambrun and @fernandojsg\n\n  // Pack uint16 into two uint8 channels (r and a)\n  var pixelData = image.getPixelData();\n  var numberOfChannels = 2;\n  var data = new Uint8Array(image.width * image.height * numberOfChannels);\n  var offset = 0;\n\n  for (var i = 0; i < pixelData.length; i++) {\n    var val = pixelData[i];\n\n    data[offset++] = val & 0xFF;\n    data[offset++] = val >> 8;\n  }\n\n  return data;\n}\n\nvar uint16DataUtilities = exports.uint16DataUtilities = {\n  storedPixelDataToImageData: storedPixelDataToImageData\n};\n\nuint16Shader.frag = 'precision mediump float;' + 'uniform sampler2D u_image;' + 'uniform float ww;' + 'uniform float wc;' + 'uniform float slope;' + 'uniform float intercept;' + 'uniform int invert;' + 'varying vec2 v_texCoord;' + 'void main() {' +\n// Get texture\n'vec4 color = texture2D(u_image, v_texCoord);' +\n\n// Calculate luminance from packed texture\n'float intensity = color.r*256.0 + color.a*65536.0;' +\n\n// Rescale based on slope and window settings\n'intensity = intensity * slope + intercept;' + 'float center0 = wc - 0.5;' + 'float width0 = max(ww, 1.0);' + 'intensity = (intensity - center0) / width0 + 0.5;' +\n\n// Clamp intensity\n'intensity = clamp(intensity, 0.0, 1.0);' +\n\n// RGBA output\n'gl_FragColor = vec4(intensity, intensity, intensity, 1.0);' +\n\n// Apply any inversion necessary\n'if (invert == 1)' + 'gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;' + '}';\n\nexports.uint16Shader = uint16Shader;\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar uint8Shader = {};\n\n/**\n * Convert stored pixel data to image data. Here we will store\n * all data in the alpha channel.\n *\n * @param {Image} image A Cornerstone Image Object\n * @returns {Uint8Array} The image data for use by the WebGL shader\n */\nfunction storedPixelDataToImageData(image) {\n    // Transfer image data to alpha channel of WebGL texture\n    return image.getPixelData();\n}\n\nvar uint8DataUtilities = exports.uint8DataUtilities = {\n    storedPixelDataToImageData: storedPixelDataToImageData\n};\n\nuint8Shader.frag = 'precision mediump float;' + 'uniform sampler2D u_image;' + 'uniform float ww;' + 'uniform float wc;' + 'uniform float slope;' + 'uniform float intercept;' + 'uniform int invert;' + 'varying vec2 v_texCoord;' + 'void main() {' +\n// Get texture\n'vec4 color = texture2D(u_image, v_texCoord);' +\n\n// Calculate luminance from packed texture\n'float intensity = color.r*256.0;' +\n\n// Rescale based on slope and window settings\n'intensity = intensity * slope + intercept;' + 'float center0 = wc - 0.5;' + 'float width0 = max(ww, 1.0);' + 'intensity = (intensity - center0) / width0 + 0.5;' +\n\n// Clamp intensity\n'intensity = clamp(intensity, 0.0, 1.0);' +\n\n// RGBA output\n'gl_FragColor = vec4(intensity, intensity, intensity, 1.0);' +\n\n// Apply any inversion necessary\n'if (invert == 1)' + 'gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;' + '}';\n\nexports.uint8Shader = uint8Shader;\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar vertexShader = exports.vertexShader = 'attribute vec2 a_position;' + 'attribute vec2 a_texCoord;' + 'uniform vec2 u_resolution;' + 'varying vec2 v_texCoord;' + 'void main() {' + 'vec2 zeroToOne = a_position / u_resolution;' + 'vec2 zeroToTwo = zeroToOne * 2.0;' + 'vec2 clipSpace = zeroToTwo - 1.0;' + 'gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);' + 'v_texCoord = a_texCoord;' + '}';\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (element, pt) {\n  var enabledElement = (0, _enabledElements.getEnabledElement)(element);\n  var transform = (0, _getTransform2.default)(enabledElement);\n\n  transform.invert();\n\n  return transform.transformPoint(pt.x, pt.y);\n};\n\nvar _enabledElements = __webpack_require__(0);\n\nvar _getTransform = __webpack_require__(10);\n\nvar _getTransform2 = _interopRequireDefault(_getTransform);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (element) {\n  if (element === undefined) {\n    throw new Error('disable: element must not be undefined');\n  }\n\n  // Search for this element in this list of enabled elements\n  var enabledElements = (0, _enabledElements.getEnabledElements)();\n\n  for (var i = 0; i < enabledElements.length; i++) {\n    if (enabledElements[i].element === element) {\n      // We found it!\n\n      // Fire an event so dependencies can cleanup\n      var eventData = {\n        element: element\n      };\n\n      (0, _triggerEvent2.default)(element, 'CornerstoneElementDisabled', eventData);\n\n      // Remove the child DOM elements that we created (e.g.canvas)\n      enabledElements[i].element.removeChild(enabledElements[i].canvas);\n      enabledElements[i].canvas = undefined;\n\n      // Remove this element from the list of enabled elements\n      enabledElements.splice(i, 1);\n\n      break;\n    }\n  }\n};\n\nvar _enabledElements = __webpack_require__(0);\n\nvar _triggerEvent = __webpack_require__(2);\n\nvar _triggerEvent2 = _interopRequireDefault(_triggerEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (element, image, viewport) {\n  if (element === undefined) {\n    throw new Error('displayImage: parameter element must not be undefined');\n  }\n  if (image === undefined) {\n    throw new Error('displayImage: parameter image must not be undefined');\n  }\n\n  var enabledElement = (0, _enabledElements.getEnabledElement)(element);\n  var canvas = enabledElement.canvas;\n  var oldImage = enabledElement.image;\n\n  enabledElement.image = image;\n\n  if (enabledElement.layers && enabledElement.layers.length) {\n    (0, _layers.setLayerImage)(element, image);\n  }\n\n  if (enabledElement.viewport === undefined) {\n    enabledElement.viewport = (0, _getDefaultViewport2.default)(enabledElement);\n  }\n\n  // Merge viewport\n  if (viewport) {\n    for (var attrname in viewport) {\n      if (viewport[attrname] !== null) {\n        enabledElement.viewport[attrname] = viewport[attrname];\n      }\n    }\n  }\n\n  var frameRate = void 0;\n\n  if (enabledElement.lastImageTimeStamp !== undefined) {\n    var timeSinceLastImage = (0, _now2.default)() - enabledElement.lastImageTimeStamp;\n\n    frameRate = (1000 / timeSinceLastImage).toFixed();\n  }\n\n  enabledElement.lastImageTimeStamp = (0, _now2.default)();\n\n  var newImageEventData = {\n    viewport: enabledElement.viewport,\n    element: enabledElement.element,\n    image: enabledElement.image,\n    oldImage: oldImage,\n    enabledElement: enabledElement,\n    frameRate: frameRate\n  };\n\n  // Avoid setting the same value because it flashes the canvas with IE and Edge\n  if (canvas.width !== image.columns) {\n    canvas.width = image.columns;\n    canvas.style.width = image.columns + 'px';\n  }\n  // Avoid setting the same value because it flashes the canvas with IE and Edge\n  if (canvas.height !== image.rows) {\n    canvas.height = image.rows;\n    canvas.style.height = image.rows + 'px';\n  }\n\n  (0, _applyTransform2.default)(enabledElement);\n\n  (0, _triggerEvent2.default)(enabledElement.element, 'CornerstoneNewImage', newImageEventData);\n\n  (0, _updateImage2.default)(element);\n};\n\nvar _enabledElements = __webpack_require__(0);\n\nvar _getDefaultViewport = __webpack_require__(5);\n\nvar _getDefaultViewport2 = _interopRequireDefault(_getDefaultViewport);\n\nvar _updateImage = __webpack_require__(3);\n\nvar _updateImage2 = _interopRequireDefault(_updateImage);\n\nvar _now = __webpack_require__(1);\n\nvar _now2 = _interopRequireDefault(_now);\n\nvar _layers = __webpack_require__(25);\n\nvar _triggerEvent = __webpack_require__(2);\n\nvar _triggerEvent2 = _interopRequireDefault(_triggerEvent);\n\nvar _applyTransform = __webpack_require__(36);\n\nvar _applyTransform2 = _interopRequireDefault(_applyTransform);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function () {\n  return s4() + s4() + \"-\" + s4() + \"-\" + s4() + \"-\" + s4() + \"-\" + s4() + s4() + s4();\n};\n\nfunction s4() {\n  return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n}\n\n/**\n * Generate a unique identifier\n *\n * @return {string} A unique identifier\n */\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (element) {\n  var enabledElement = (0, _enabledElements.getEnabledElement)(element);\n\n  if (enabledElement.image === undefined) {\n    throw new Error('draw: image has not been loaded yet');\n  }\n\n  (0, _drawImage2.default)(enabledElement);\n};\n\nvar _enabledElements = __webpack_require__(0);\n\nvar _drawImage = __webpack_require__(4);\n\nvar _drawImage2 = _interopRequireDefault(_drawImage);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function () {\n  var enabledElements = (0, _enabledElements.getEnabledElements)();\n\n  for (var i = 0; i < enabledElements.length; i++) {\n    var ee = enabledElements[i];\n\n    if (ee.invalid === true) {\n      (0, _drawImage2.default)(ee, true);\n    }\n  }\n};\n\nvar _enabledElements = __webpack_require__(0);\n\nvar _drawImage = __webpack_require__(4);\n\nvar _drawImage2 = _interopRequireDefault(_drawImage);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (element, options) {\n  if (element === undefined) {\n    throw new Error('enable: parameter element cannot be undefined');\n  }\n\n  // If this enabled element has the option set for WebGL, we should\n  // Check if this device actually supports it\n  if (options && options.renderer && options.renderer.toLowerCase() === 'webgl') {\n    if (_index2.default.renderer.isWebGLAvailable()) {\n      // If WebGL is available on the device, initialize the renderer\n      // And return the renderCanvas from the WebGL rendering path\n      _index2.default.renderer.initRenderer();\n      options.renderer = 'webgl';\n    } else {\n      // If WebGL is not available on this device, we will fall back\n      // To using the Canvas renderer\n      console.error('WebGL not available, falling back to Canvas renderer');\n      delete options.renderer;\n    }\n  }\n\n  var canvas = document.createElement('canvas');\n\n  canvas.style.position = 'absolute';\n  canvas.style.top = '50%';\n  canvas.style.left = '50%';\n\n  element.appendChild(canvas);\n\n  var enabledElement = {\n    element: element,\n    canvas: canvas,\n    image: undefined, // Will be set once image is loaded\n    invalid: false, // True if image needs to be drawn, false if not\n    needsRedraw: true,\n    options: options,\n    layers: [],\n    data: {},\n    renderingTools: {}\n  };\n\n  (0, _enabledElements.addEnabledElement)(enabledElement);\n\n  (0, _resize2.default)(element, true);\n\n  /**\r\n   * Draw the image immediately\r\n   *\r\n   * @param {DOMHighResTimeStamp} timestamp The current time for when requestAnimationFrame starts to fire callbacks\r\n   * @returns {void}\r\n   */\n  function draw(timestamp) {\n    if (enabledElement.canvas === undefined) {\n      return;\n    }\n\n    var eventDetails = {\n      enabledElement: enabledElement,\n      timestamp: timestamp\n    };\n\n    (0, _triggerEvent2.default)(enabledElement.element, 'CornerstonePreRender', eventDetails);\n\n    if (enabledElement.needsRedraw && hasImageOrLayers(enabledElement)) {\n      (0, _drawImageSync2.default)(enabledElement, enabledElement.invalid);\n    }\n\n    (0, _requestAnimationFrame2.default)(draw);\n  }\n\n  draw();\n};\n\nvar _enabledElements = __webpack_require__(0);\n\nvar _resize = __webpack_require__(37);\n\nvar _resize2 = _interopRequireDefault(_resize);\n\nvar _drawImageSync = __webpack_require__(62);\n\nvar _drawImageSync2 = _interopRequireDefault(_drawImageSync);\n\nvar _requestAnimationFrame = __webpack_require__(16);\n\nvar _requestAnimationFrame2 = _interopRequireDefault(_requestAnimationFrame);\n\nvar _index = __webpack_require__(13);\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _triggerEvent = __webpack_require__(2);\n\nvar _triggerEvent2 = _interopRequireDefault(_triggerEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n * This module is responsible for enabling an element to display images with cornerstone\r\n */\n\nfunction hasImageOrLayers(enabledElement) {\n  return enabledElement.image !== undefined || enabledElement.layers.length;\n}\n\n/**\r\n * Enable an HTML Element for use in Cornerstone\r\n *\r\n * @param {HTMLElement} element An HTML Element enabled for Cornerstone\r\n * @param {Object} options Options for the enabledElement\r\n *\r\n * @return {void}\r\n */\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (enabledElement, invalidated) {\n  var image = enabledElement.image;\n  var element = enabledElement.element;\n  var layers = enabledElement.layers || [];\n\n  // Check if enabledElement can be redrawn\n  if (!enabledElement.canvas || !(enabledElement.image || layers.length)) {\n    return;\n  }\n\n  // Start measuring the time needed to draw the image/layers\n  var start = (0, _now2.default)();\n\n  image.stats = {\n    lastGetPixelDataTime: -1.0,\n    lastStoredPixelDataToCanvasImageDataTime: -1.0,\n    lastPutImageDataTime: -1.0,\n    lastRenderTime: -1.0,\n    lastLutGenerateTime: -1.0\n  };\n\n  var imageWasRendered = false;\n\n  if (layers && layers.length) {\n    imageWasRendered = (0, _drawCompositeImage2.default)(enabledElement, invalidated);\n  } else if (image) {\n    var render = image.render;\n\n    if (!render) {\n      if (enabledElement.viewport.colormap && enabledElement.viewport.colormap !== '' && enabledElement.image.labelmap === true) {\n        render = _renderLabelMapImage.renderLabelMapImage;\n      } else if (enabledElement.viewport.colormap && enabledElement.viewport.colormap !== '') {\n        render = _renderPseudoColorImage.renderPseudoColorImage;\n      } else if (image.color) {\n        render = _renderColorImage.renderColorImage;\n      } else {\n        render = _renderGrayscaleImage.renderGrayscaleImage;\n      }\n    }\n\n    if ((0, _doesImageNeedToBeRendered2.default)(enabledElement, image) === true || invalidated === true) {\n      console.log('calling Render');\n      render(enabledElement, invalidated);\n      imageWasRendered = true;\n    }\n  }\n\n  if (!imageWasRendered) {\n    return;\n  }\n\n  // Calculate how long it took to draw the image/layers\n  var renderTimeInMs = (0, _now2.default)() - start;\n\n  var eventData = {\n    viewport: enabledElement.viewport,\n    element: element,\n    image: image,\n    enabledElement: enabledElement,\n    canvasContext: enabledElement.canvas.getContext('2d'),\n    renderTimeInMs: renderTimeInMs\n  };\n\n  image.stats.lastRenderTime = renderTimeInMs;\n\n  enabledElement.invalid = false;\n  enabledElement.needsRedraw = false;\n\n  (0, _triggerEvent2.default)(element, 'CornerstoneImageRendered', eventData);\n};\n\nvar _now = __webpack_require__(1);\n\nvar _now2 = _interopRequireDefault(_now);\n\nvar _drawCompositeImage = __webpack_require__(63);\n\nvar _drawCompositeImage2 = _interopRequireDefault(_drawCompositeImage);\n\nvar _renderColorImage = __webpack_require__(8);\n\nvar _renderGrayscaleImage = __webpack_require__(15);\n\nvar _renderPseudoColorImage = __webpack_require__(24);\n\nvar _renderLabelMapImage = __webpack_require__(22);\n\nvar _doesImageNeedToBeRendered = __webpack_require__(12);\n\nvar _doesImageNeedToBeRendered2 = _interopRequireDefault(_doesImageNeedToBeRendered);\n\nvar _triggerEvent = __webpack_require__(2);\n\nvar _triggerEvent2 = _interopRequireDefault(_triggerEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (enabledElement, invalidated) {\n  var element = enabledElement.element;\n  var allLayers = (0, _layers.getLayers)(element);\n  var activeLayer = (0, _layers.getActiveLayer)(element);\n  var visibleLayers = (0, _layers.getVisibleLayers)(element);\n  var resynced = !enabledElement.lastSyncViewportsState && enabledElement.syncViewports;\n\n  // This state will help us to determine if the user has re-synced the\n  // layers allowing us to make a new copy of the viewports\n  enabledElement.lastSyncViewportsState = enabledElement.syncViewports;\n\n  // Stores a copy of all viewports if the user has just synced them then we can use the\n  // copies to calculate anything later (ratio, translation offset, rotation offset, etc)\n  if (resynced) {\n    allLayers.forEach(function (layer) {\n      if (layer.viewport) {\n        originalViewportScale[layer.layerId] = layer.viewport.scale;\n      }\n    });\n  }\n\n  // Sync all viewports in case it's activated\n  if (enabledElement.syncViewports === true) {\n    syncViewports(visibleLayers, activeLayer);\n  }\n\n  // Get the enabled element's canvas so we can draw to it\n  var context = enabledElement.canvas.getContext('2d');\n\n  context.setTransform(1, 0, 0, 1, 0, 0);\n\n  // Clear the canvas\n  context.fillStyle = 'black';\n  context.fillRect(0, 0, enabledElement.canvas.width, enabledElement.canvas.height);\n\n  // Render all visible layers\n  renderLayers(context, visibleLayers, invalidated);\n};\n\nvar _layers = __webpack_require__(25);\n\nvar _renderGrayscaleImage = __webpack_require__(15);\n\nvar _renderColorImage = __webpack_require__(8);\n\nvar _renderPseudoColorImage = __webpack_require__(24);\n\nvar _renderLabelMapImage = __webpack_require__(22);\n\nvar _setToPixelCoordinateSystem = __webpack_require__(7);\n\nvar _setToPixelCoordinateSystem2 = _interopRequireDefault(_setToPixelCoordinateSystem);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// This is used to keep each of the layers' viewports in sync with the active layer\nvar originalViewportScale = {};\n\nfunction getViewportRatio(baseLayerId, targetLayerId) {\n  return originalViewportScale[targetLayerId] / originalViewportScale[baseLayerId];\n}\n\n// Sync all viewports based on active layer's viewport\nfunction syncViewports(layers, activeLayer) {\n  // If we intend to keep the viewport's scale, translation and rotation in sync,\n  // loop through the layers\n  layers.forEach(function (layer) {\n    // Don't do anything to the active layer\n    // Don't do anything if this layer has no viewport\n    if (layer === activeLayer || !layer.viewport || !activeLayer.viewport) {\n      return;\n    }\n\n    if (!originalViewportScale[layer.layerId]) {\n      originalViewportScale[layer.layerId] = layer.viewport.scale;\n    }\n\n    var viewportRatio = getViewportRatio(activeLayer.layerId, layer.layerId);\n\n    // Update the layer's translation and scale to keep them in sync with the first image\n    // based on the ratios between the images\n    layer.viewport.scale = activeLayer.viewport.scale * viewportRatio;\n    layer.viewport.rotation = activeLayer.viewport.rotation;\n    layer.viewport.translation = {\n      x: activeLayer.viewport.translation.x / viewportRatio,\n      y: activeLayer.viewport.translation.y / viewportRatio\n    };\n    layer.viewport.hflip = activeLayer.viewport.hflip;\n    layer.viewport.vflip = activeLayer.viewport.vflip;\n  });\n}\n\n/**\n * Internal function to render all layers for a Cornerstone enabled element\n *\n * @param {CanvasRenderingContext2D} context Canvas context to draw upon\n * @param {EnabledElementLayer[]} layers The array of all layers for this enabled element\n * @param {Boolean} invalidated A boolean whether or not this image has been invalidated and must be redrawn\n * @returns {void}\n */\nfunction renderLayers(context, layers, invalidated) {\n  // Loop through each layer and draw it to the canvas\n  layers.forEach(function (layer, index) {\n    if (!layer.image) {\n      return;\n    }\n\n    context.save();\n\n    // Set the layer's canvas to the pixel coordinate system\n    layer.canvas = context.canvas;\n    (0, _setToPixelCoordinateSystem2.default)(layer, context);\n\n    // Render into the layer's canvas\n    var colormap = layer.viewport.colormap || layer.options.colormap;\n    var labelmap = layer.viewport.labelmap;\n    var isInvalid = layer.invalid || invalidated;\n\n    if (colormap && colormap !== '' && labelmap === true) {\n      (0, _renderLabelMapImage.addLabelMapLayer)(layer, isInvalid);\n    } else if (colormap && colormap !== '') {\n      (0, _renderPseudoColorImage.addPseudoColorLayer)(layer, isInvalid);\n    } else if (layer.image.color === true) {\n      (0, _renderColorImage.addColorLayer)(layer, isInvalid);\n    } else {\n      // If this is the base layer, use the alpha channel for rendering of the grayscale image\n      var useAlphaChannel = index === 0;\n\n      (0, _renderGrayscaleImage.addGrayscaleLayer)(layer, isInvalid, useAlphaChannel);\n    }\n\n    // Apply any global opacity settings that have been defined for this layer\n    if (layer.options && layer.options.opacity) {\n      context.globalAlpha = layer.options.opacity;\n    } else {\n      context.globalAlpha = 1;\n    }\n\n    if (layer.options && layer.options.fillStyle) {\n      context.fillStyle = layer.options.fillStyle;\n    }\n\n    // Set the pixelReplication property before drawing from the layer into the\n    // composite canvas\n    context.imageSmoothingEnabled = !layer.viewport.pixelReplication;\n    context.mozImageSmoothingEnabled = context.imageSmoothingEnabled;\n\n    // Draw from the current layer's canvas onto the enabled element's canvas\n    var _layer$image = layer.image,\n        width = _layer$image.width,\n        height = _layer$image.height;\n\n\n    context.drawImage(layer.canvas, 0, 0, width, height, 0, 0, width, height);\n    context.restore();\n\n    layer.invalid = false;\n  });\n}\n\n/**\n * Internal API function to draw a composite image to a given enabled element\n *\n * @param {EnabledElement} enabledElement An enabled element to draw into\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n */\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getElementData = getElementData;\nexports.removeElementData = removeElementData;\n\nvar _enabledElements = __webpack_require__(0);\n\n/**\n * Retrieves any data for a Cornerstone enabledElement for a specific string\n * dataType\n *\n * @param {HTMLElement} element An HTML Element enabled for Cornerstone\n * @param {string} dataType A string name for an arbitrary set of data\n * @returns {*} Whatever data is stored for this enabled element\n */\nfunction getElementData(element, dataType) {\n  var ee = (0, _enabledElements.getEnabledElement)(element);\n\n  if (ee.data.hasOwnProperty(dataType) === false) {\n    ee.data[dataType] = {};\n  }\n\n  return ee.data[dataType];\n}\n\n/**\n * Clears any data for a Cornerstone enabledElement for a specific string\n * dataType\n *\n * @param {HTMLElement} element An HTML Element enabled for Cornerstone\n * @param {string} dataType A string name for an arbitrary set of data\n *\n * @returns {void}\n */\nfunction removeElementData(element, dataType) {\n  var ee = (0, _enabledElements.getEnabledElement)(element);\n\n  delete ee.data[dataType];\n}\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (element, image) {\n  var enabledElement = (0, _enabledElements.getEnabledElement)(element);\n\n  return (0, _getDefaultViewport2.default)(enabledElement);\n};\n\nvar _enabledElements = __webpack_require__(0);\n\nvar _getDefaultViewport = __webpack_require__(5);\n\nvar _getDefaultViewport2 = _interopRequireDefault(_getDefaultViewport);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (element) {\n  var enabledElement = (0, _enabledElements.getEnabledElement)(element);\n\n  return enabledElement.image;\n};\n\nvar _enabledElements = __webpack_require__(0);\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (element, x, y, width, height) {\n  var storedPixels = (0, _getStoredPixels2.default)(element, x, y, width, height);\n  var ee = (0, _enabledElements.getEnabledElement)(element);\n  var mlutfn = (0, _getModalityLUT2.default)(ee.image.slope, ee.image.intercept, ee.viewport.modalityLUT);\n\n  return storedPixels.map(mlutfn);\n};\n\nvar _enabledElements = __webpack_require__(0);\n\nvar _getStoredPixels = __webpack_require__(39);\n\nvar _getStoredPixels2 = _interopRequireDefault(_getStoredPixels);\n\nvar _getModalityLUT = __webpack_require__(26);\n\nvar _getModalityLUT2 = _interopRequireDefault(_getModalityLUT);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (element) {\n  var enabledElement = (0, _enabledElements.getEnabledElement)(element);\n  var viewport = enabledElement.viewport;\n\n  if (viewport === undefined) {\n    return;\n  }\n\n  // Return a copy of the viewport\n  return Object.assign({}, viewport);\n};\n\nvar _enabledElements = __webpack_require__(0);\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.loadImage = loadImage;\nexports.loadAndCacheImage = loadAndCacheImage;\nexports.registerImageLoader = registerImageLoader;\nexports.registerUnknownImageLoader = registerUnknownImageLoader;\n\nvar _imageCache = __webpack_require__(40);\n\nvar _events = __webpack_require__(14);\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _triggerEvent = __webpack_require__(2);\n\nvar _triggerEvent2 = _interopRequireDefault(_triggerEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n * This module deals with ImageLoaders, loading images and caching images\r\n */\n\nvar imageLoaders = {};\n\nvar unknownImageLoader = void 0;\n\n/**\r\n * Load an image using a registered Cornerstone Image Loader.\r\n *\r\n * The image loader that is used will be\r\n * determined by the image loader scheme matching against the imageId.\r\n *\r\n * @param {String} imageId A Cornerstone Image Object's imageId\r\n * @param {Object} [options] Options to be passed to the Image Loader\r\n *\r\n * @returns {Deferred} A jQuery Deferred which can be used to act after an image is loaded or loading fails\r\n */\nfunction loadImageFromImageLoader(imageId, options) {\n  var colonIndex = imageId.indexOf(':');\n  var scheme = imageId.substring(0, colonIndex);\n  var loader = imageLoaders[scheme];\n  var imagePromise = void 0;\n\n  if (loader === undefined || loader === null) {\n    if (unknownImageLoader !== undefined) {\n      imagePromise = unknownImageLoader(imageId);\n\n      return imagePromise;\n    }\n\n    throw new Error('loadImageFromImageLoader: no image loader for imageId');\n  }\n\n  imagePromise = loader(imageId, options);\n\n  // Broadcast an image loaded event once the image is loaded\n  imagePromise.then(function (image) {\n    (0, _triggerEvent2.default)(_events2.default, 'CornerstoneImageLoaded', { image: image });\n  });\n\n  return imagePromise;\n}\n\n/**\r\n * Loads an image given an imageId and optional priority and returns a promise which will resolve to\r\n * the loaded image object or fail if an error occurred.  The loaded image is not stored in the cache.\r\n *\r\n * @param {String} imageId A Cornerstone Image Object's imageId\r\n * @param {Object} [options] Options to be passed to the Image Loader\r\n *\r\n * @returns {Deferred} A jQuery Deferred which can be used to act after an image is loaded or loading fails\r\n */\nfunction loadImage(imageId, options) {\n  if (imageId === undefined) {\n    throw new Error('loadImage: parameter imageId must not be undefined');\n  }\n\n  var imagePromise = (0, _imageCache.getImagePromise)(imageId);\n\n  if (imagePromise !== undefined) {\n    return imagePromise;\n  }\n\n  imagePromise = loadImageFromImageLoader(imageId, options);\n\n  return imagePromise;\n}\n\n//\n\n/**\r\n * Loads an image given an imageId and optional priority and returns a promise which will resolve to\r\n * the loaded image object or fail if an error occurred. The image is stored in the cache.\r\n *\r\n * @param {String} imageId A Cornerstone Image Object's imageId\r\n * @param {Object} [options] Options to be passed to the Image Loader\r\n *\r\n * @returns {Deferred} A jQuery Deferred which can be used to act after an image is loaded or loading fails\r\n */\nfunction loadAndCacheImage(imageId, options) {\n  if (imageId === undefined) {\n    throw new Error('loadAndCacheImage: parameter imageId must not be undefined');\n  }\n\n  var imagePromise = (0, _imageCache.getImagePromise)(imageId);\n\n  if (imagePromise !== undefined) {\n    return imagePromise;\n  }\n\n  imagePromise = loadImageFromImageLoader(imageId, options);\n\n  (0, _imageCache.putImagePromise)(imageId, imagePromise);\n\n  return imagePromise;\n}\n\n/**\r\n * Registers an imageLoader plugin with cornerstone for the specified scheme\r\n *\r\n * @param {String} scheme The scheme to use for this image loader (e.g. 'dicomweb', 'wadouri', 'http')\r\n * @param {Function} imageLoader A Cornerstone Image Loader function\r\n * @returns {void}\r\n */\nfunction registerImageLoader(scheme, imageLoader) {\n  imageLoaders[scheme] = imageLoader;\n}\n\n/**\r\n * Registers a new unknownImageLoader and returns the previous one\r\n *\r\n * @param {Function} imageLoader A Cornerstone Image Loader\r\n *\r\n * @returns {Function|Undefined} The previous Unknown Image Loader\r\n */\nfunction registerUnknownImageLoader(imageLoader) {\n  var oldImageLoader = unknownImageLoader;\n\n  unknownImageLoader = imageLoader;\n\n  return oldImageLoader;\n}\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (element) {\n  var enabledElement = (0, _enabledElements.getEnabledElement)(element);\n\n  enabledElement.invalid = true;\n  enabledElement.needsRedraw = true;\n  var eventData = {\n    element: element\n  };\n\n  (0, _triggerEvent2.default)(element, 'CornerstoneInvalidated', eventData);\n};\n\nvar _enabledElements = __webpack_require__(0);\n\nvar _triggerEvent = __webpack_require__(2);\n\nvar _triggerEvent2 = _interopRequireDefault(_triggerEvent);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (imageId) {\n\n  var enabledElements = (0, _enabledElements.getEnabledElementsByImageId)(imageId);\n\n  enabledElements.forEach(function (enabledElement) {\n    (0, _drawImage2.default)(enabledElement, true);\n  });\n};\n\nvar _enabledElements = __webpack_require__(0);\n\nvar _drawImage = __webpack_require__(4);\n\nvar _drawImage2 = _interopRequireDefault(_drawImage);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (element, pageX, pageY) {\n  var enabledElement = (0, _enabledElements.getEnabledElement)(element);\n\n  if (enabledElement.image === undefined) {\n    throw new Error('image has not been loaded yet');\n  }\n\n  // Convert the pageX and pageY to the canvas client coordinates\n  var rect = element.getBoundingClientRect();\n  var clientX = pageX - rect.left - window.pageXOffset;\n  var clientY = pageY - rect.top - window.pageYOffset;\n\n  var pt = { x: clientX,\n    y: clientY };\n  var transform = (0, _getTransform2.default)(enabledElement);\n\n  transform.invert();\n\n  return transform.transformPoint(pt.x, pt.y);\n};\n\nvar _enabledElements = __webpack_require__(0);\n\nvar _getTransform = __webpack_require__(10);\n\nvar _getTransform2 = _interopRequireDefault(_getTransform);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 73 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (element, pt) {\n  var enabledElement = (0, _enabledElements.getEnabledElement)(element);\n  var transform = (0, _getTransform2.default)(enabledElement);\n\n  return transform.transformPoint(pt.x, pt.y);\n};\n\nvar _enabledElements = __webpack_require__(0);\n\nvar _getTransform = __webpack_require__(10);\n\nvar _getTransform2 = _interopRequireDefault(_getTransform);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (element) {\n  var enabledElement = (0, _enabledElements.getEnabledElement)(element);\n\n  enabledElement.viewport = (0, _getDefaultViewport2.default)(enabledElement);\n  (0, _updateImage2.default)(element);\n};\n\nvar _enabledElements = __webpack_require__(0);\n\nvar _getDefaultViewport = __webpack_require__(5);\n\nvar _getDefaultViewport2 = _interopRequireDefault(_getDefaultViewport);\n\nvar _updateImage = __webpack_require__(3);\n\nvar _updateImage2 = _interopRequireDefault(_updateImage);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (element, viewport) {\n  var enabledElement = (0, _enabledElements.getEnabledElement)(element);\n\n  enabledElement.viewport.translation.x = viewport.translation.x;\n  enabledElement.viewport.translation.y = viewport.translation.y;\n  enabledElement.viewport.voi.windowCenter = viewport.voi.windowCenter;\n  enabledElement.viewport.invert = viewport.invert;\n  enabledElement.viewport.pixelReplication = viewport.pixelReplication;\n  enabledElement.viewport.rotation = viewport.rotation;\n  enabledElement.viewport.hflip = viewport.hflip;\n  enabledElement.viewport.vflip = viewport.vflip;\n  enabledElement.viewport.modalityLUT = viewport.modalityLUT;\n  enabledElement.viewport.voiLUT = viewport.voiLUT;\n  enabledElement.viewport.colormap = viewport.colormap;\n  enabledElement.viewport.labelmap = viewport.labelmap;\n\n  // Prevent window width from being too small (note that values close to zero are valid and can occur with\n  // PET images in particular)\n  enabledElement.viewport.voi.windowWidth = Math.max(viewport.voi.windowWidth, MIN_WINDOW_WIDTH);\n\n  // Prevent scale from getting too small\n  enabledElement.viewport.scale = Math.max(viewport.scale, MIN_VIEWPORT_SCALE);\n\n  // Normalize the rotation value to a positive rotation in degrees\n  enabledElement.viewport.rotation %= 360;\n  if (enabledElement.viewport.rotation < 0) {\n    enabledElement.viewport.rotation += 360;\n  }\n\n  element.style.background = enabledElement.viewport.invert ? '#fff' : '#000';\n\n  (0, _applyTransform2.default)(enabledElement);\n\n  // Force the image to be updated since the viewport has been modified\n  (0, _updateImage2.default)(element);\n};\n\nvar _enabledElements = __webpack_require__(0);\n\nvar _updateImage = __webpack_require__(3);\n\nvar _updateImage2 = _interopRequireDefault(_updateImage);\n\nvar _applyTransform = __webpack_require__(36);\n\nvar _applyTransform2 = _interopRequireDefault(_applyTransform);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar MIN_WINDOW_WIDTH = 0.000001;\nvar MIN_VIEWPORT_SCALE = 0.0001;\n\n/**\n * Sets the viewport for an element and corrects invalid values\n *\n * @param {HTMLElement} element - DOM element of the enabled element\n * @param {Viewport} viewport - Object containing the viewport properties\n * @returns {void}\n */\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _renderColorImage = __webpack_require__(8);\n\nvar _renderGrayscaleImage = __webpack_require__(15);\n\nvar _renderWebImage = __webpack_require__(35);\n\nexports.default = {\n  colorImage: _renderColorImage.renderColorImage,\n  grayscaleImage: _renderGrayscaleImage.renderGrayscaleImage,\n  webImage: _renderWebImage.renderWebImage\n};\n\n/***/ }),\n/* 77 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addProvider = addProvider;\nexports.removeProvider = removeProvider;\n// This module defines a way to access various metadata about an imageId.  This layer of abstraction exists\n// So metadata can be provided in different ways (e.g. by parsing DICOM P10 or by a WADO-RS document)\n\nvar providers = [];\n\n/**\n * Adds a metadata provider with the specified priority\n * @param {Function} provider Metadata provider function\n * @param {Number} [priority=0] - 0 is default/normal, > 0 is high, < 0 is low\n *\n * @returns {void}\n */\nfunction addProvider(provider) {\n  var priority = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n  var i = void 0;\n\n  // Find the right spot to insert this provider based on priority\n  for (i = 0; i < providers.length; i++) {\n    if (providers[i].priority <= priority) {\n      break;\n    }\n  }\n\n  // Insert the decode task at position i\n  providers.splice(i, 0, {\n    priority: priority,\n    provider: provider\n  });\n}\n\n/**\n * Removes the specified provider\n *\n * @param {Function} provider Metadata provider function\n *\n * @returns {void}\n */\nfunction removeProvider(provider) {\n  for (var i = 0; i < providers.length; i++) {\n    if (providers[i].provider === provider) {\n      providers.splice(i, 1);\n\n      break;\n    }\n  }\n}\n\n/**\n * Gets metadata from the registered metadata providers.  Will call each one from highest priority to lowest\n * until one responds\n *\n * @param {String} type The type of metadata requested from the metadata store\n * @param {String} imageId The Cornerstone Image Object's imageId\n *\n * @returns {*} The metadata retrieved from the metadata store\n */\nfunction getMetaData(type, imageId) {\n  // Invoke each provider in priority order until one returns something\n  for (var i = 0; i < providers.length; i++) {\n    var result = providers[i].provider(type, imageId);\n\n    if (result !== undefined) {\n      return result;\n    }\n  }\n}\n\nexports.default = {\n  addProvider: addProvider,\n  removeProvider: removeProvider,\n  get: getMetaData\n};\n\n/***/ }),\n/* 78 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.restoreImage = exports.convertToFalseColorImage = exports.convertImageToFalseColorImage = undefined;\n\nvar _enabledElements = __webpack_require__(0);\n\nvar _pixelDataToFalseColorData = __webpack_require__(41);\n\nvar _pixelDataToFalseColorData2 = _interopRequireDefault(_pixelDataToFalseColorData);\n\nvar _colormap = __webpack_require__(27);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Retrieves the minimum and maximum pixel values from an Array of pixel data\n *\n * @param {Array} pixelData The input pixel data array\n *\n * @returns {{minPixelValue: Number, maxPixelValue: Number}} The minimum and maximum pixel values in the input Array\n */\nfunction getPixelValues(pixelData) {\n  var minPixelValue = Number.MAX_VALUE;\n  var maxPixelValue = Number.MIN_VALUE;\n  var len = pixelData.length;\n  var pixel = void 0;\n\n  for (var i = 0; i < len; i++) {\n    pixel = pixelData[i];\n    minPixelValue = minPixelValue < pixel ? minPixelValue : pixel;\n    maxPixelValue = maxPixelValue > pixel ? maxPixelValue : pixel;\n  }\n\n  return {\n    minPixelValue: minPixelValue,\n    maxPixelValue: maxPixelValue\n  };\n}\n\n/**\n * Retrieve a function that will allow an image object to be reset to its original form\n * after a false color mapping transformation\n *\n * @param {Image} image A Cornerstone Image Object\n *\n * @return {Function} A function for resetting an Image Object to its original form\n */\nfunction getRestoreImageMethod(image) {\n  if (image.restore) {\n    return image.restore;\n  }\n\n  var color = image.color;\n  var rgba = image.rgba;\n  var cachedLut = image.cachedLut;\n  var slope = image.slope;\n  var windowWidth = image.windowWidth;\n  var windowCenter = image.windowCenter;\n  var minPixelValue = image.minPixelValue;\n  var maxPixelValue = image.maxPixelValue;\n\n  return function () {\n    image.color = color;\n    image.rgba = rgba;\n    image.cachedLut = cachedLut;\n    image.slope = slope;\n    image.windowWidth = windowWidth;\n    image.windowCenter = windowCenter;\n    image.minPixelValue = minPixelValue;\n    image.maxPixelValue = maxPixelValue;\n\n    if (image.origPixelData) {\n      var pixelData = image.origPixelData;\n\n      image.getPixelData = function () {\n        return pixelData;\n      };\n    }\n\n    // Remove some attributes added by false color mapping\n    image.origPixelData = undefined;\n    image.colormapId = undefined;\n    image.falseColor = undefined;\n  };\n}\n\n//\n// Then we need to make sure it will be converted into a colormap object if it's as string.\n\n/**\n * User can pass a colormap or its id as string to some of these public functions.\n * Then we need to make sure it will be converted into a colormap object if it's a string.\n *\n * @param {*} colormap A colormap ID or Object\n * @return {*} The colormap\n */\nfunction ensuresColormap(colormap) {\n  if (colormap && typeof colormap === 'string') {\n    colormap = (0, _colormap.getColormap)(colormap);\n  }\n\n  return colormap;\n}\n\n/**\n * Restores a false color image to its original version\n *\n * @param {Image} image A Cornerstone Image Object\n * @returns {Boolean} True if the image object had a valid restore function, which was run. Otherwise, false.\n */\nfunction restoreImage(image) {\n  if (image.restore && typeof image.restore === 'function') {\n    image.restore();\n\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * Convert an image to a false color image\n *\n * @param {Image} image A Cornerstone Image Object\n * @param {String|Object} colormap - it can be a colormap object or a colormap id (string)\n *\n * @returns {Boolean} - Whether or not the image has been converted to a false color image\n */\nfunction convertImageToFalseColorImage(image, colormap) {\n  if (image.color && !image.falseColor) {\n    throw new Error('Color transforms are not implemented yet');\n  }\n\n  // User can pass a colormap id or a colormap object\n  colormap = ensuresColormap(colormap);\n\n  var colormapId = colormap.getId();\n\n  // Doesn't do anything if colormapId hasn't changed\n  if (image.colormapId === colormapId) {\n    // It has already being converted into a false color image\n    // Using the colormapId passed as parameter\n    return false;\n  }\n\n  // Restore the image attributes updated when converting to a false color image\n  restoreImage(image);\n\n  // Convert the image to a false color image\n  if (colormapId) {\n    var minPixelValue = image.minPixelValue || 0;\n    var maxPixelValue = image.maxPixelValue || 255;\n\n    image.restore = getRestoreImageMethod(image);\n\n    var lookupTable = colormap.createLookupTable();\n\n    lookupTable.setTableRange(minPixelValue, maxPixelValue);\n\n    // Update the pixel data and render the new image\n    (0, _pixelDataToFalseColorData2.default)(image, lookupTable);\n\n    // Update min and max pixel values\n    var pixelValues = getPixelValues(image.getPixelData());\n\n    image.minPixelValue = pixelValues.minPixelValue;\n    image.maxPixelValue = pixelValues.maxPixelValue;\n\n    image.windowWidth = 255;\n    image.windowCenter = 128;\n\n    // Cache the last colormapId used for performance\n    // Then it doesn't need to be re-rendered on next\n    // Time if the user hasn't updated it\n    image.colormapId = colormapId;\n  }\n\n  // Return `true` to tell the caller that the image has got updated\n  return true;\n}\n\n/**\n * Convert the image of a element to a false color image\n *\n * @param {HTMLElement} element The Cornerstone element\n * @param {*} colormap - it can be a colormap object or a colormap id (string)\n *\n * @returns {void}\n */\nfunction convertToFalseColorImage(element, colormap) {\n  var enabledElement = (0, _enabledElements.getEnabledElement)(element);\n\n  return convertImageToFalseColorImage(enabledElement.image, colormap);\n}\n\nexports.convertImageToFalseColorImage = convertImageToFalseColorImage;\nexports.convertToFalseColorImage = convertToFalseColorImage;\nexports.restoreImage = restoreImage;\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// cornerstone.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 42);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap adda4191952c3649184c","const enabledElements = [];\n\n/**\n * A two-dimensional vector\n *\n * @typedef {Object} vec2\n * @param {Number} x - The x distance\n * @param {Number} y - The y distance\n */\n\n/**\n * VOI\n *\n * @typedef {Object} VOI\n * @param {Number} windowWidth - Window Width for display\n * @param {Number} windowCenter - Window Center for display\n */\n\n/**\n * Lookup Table Array\n *\n * @typedef {Object} LUT\n * @property {Number} firstValueMapped\n * @property {Number} numBitsPerEntry\n * @property {Array} lut\n */\n\n/**\n * Image Statistics Object\n *\n * @typedef {Object} ImageStats\n *\n * @property {Number} [lastGetPixelDataTime] The time in ms taken to retrieve stored pixels required to draw the image\n * @property {Number} [lastStoredPixelDataToCanvasImageDataTime] The time in ms taken to map from stored pixel array to canvas pixel array\n * @property {Number} [lastPutImageDataTime] The time in ms taken for putImageData to put the canvas pixel data into the canvas context\n * @property {Number} [lastRenderTime] The total time in ms taken for the entire rendering function to run\n * @property {Number} [lastLutGenerateTime] The time in ms taken to generate the lookup table for the image\n */\n\n/**\n * An Image Object in Cornerstone\n *\n * @typedef {Object} Image\n *\n * @property {string} imageId - The imageId associated with this image object\n * @property {Number} minPixelValue - the minimum stored pixel value in the image\n * @property {Number} maxPixelValue - the maximum stored pixel value in the image\n * @property {Number} slope - the rescale slope to convert stored pixel values to modality pixel values or 1 if not specified\n * @property {Number} intercept - the rescale intercept used to convert stored pixel values to modality values or 0 if not specified\n * @property {Number} windowCenter - the default windowCenter to apply to the image\n * @property {Number} windowWidth - the default windowWidth to apply to the image\n * @property {function} getPixelData - a function that returns the underlying pixel data. An array of integers for grayscale and an array of RGBA for color\n * @property {function} getImageData - a function that returns a canvas imageData object for the image. This is only needed for color images\n * @property {function} getCanvas - a function that returns a canvas element with the image loaded into it. This is only needed for color images.\n * @property {function} getImage - a function that returns a JavaScript Image object with the image data. This is optional and typically used for images encoded in standard web JPEG and PNG formats\n * @property {Number} rows - number of rows in the image. This is the same as height but duplicated for convenience\n * @property {Number} columns - number of columns in the image. This is the same as width but duplicated for convenience\n * @property {Number} height - the height of the image. This is the same as rows but duplicated for convenience\n * @property {Number} width - the width of the image. This is the same as columns but duplicated for convenience\n * @property {Boolean} color - true if pixel data is RGB, false if grayscale\n * @property {Object} lut - The Lookup Table\n * @property {Boolean} rgba - Is the color pixel data stored in RGBA?\n * @property {Number} columnPixelSpacing - horizontal distance between the middle of each pixel (or width of each pixel) in mm or undefined if not known\n * @property {Number} rowPixelSpacing - vertical distance between the middle of each pixel (or heigh of each pixel) in mm or undefined if not known\n * @property {Boolean} invert - true if the the image should initially be displayed be inverted, false if not. This is here mainly to support DICOM images with a photometric interpretation of MONOCHROME1\n * @property {Number} sizeInBytes - the number of bytes used to store the pixels for this image.\n * @property {Boolean} [falseColor=false] - Whether or not the image has undergone false color mapping\n * @property {Array} [origPixelData] - Original pixel data for an image after it has undergone false color mapping\n * @property {ImageStats} [stats] - Statistics for the last redraw of the image\n * @property {Object} cachedLut - Cached Lookup Table for this image.\n * @property {String|Colormap} [colormap] - an optional colormap ID or colormap object (from colors/colormap.js). This will be applied during rendering to convert the image to pseudocolor\n * @property {Boolean} [labelmap=false] - whether or not to render this image as a label map (i.e. skip modality and VOI LUT pipelines and use only a color lookup table)\n */\n\n/**\n * A Viewport Settings Object Cornerstone\n *\n * @typedef {Object} Viewport\n *\n * @property {Number} [scale=1.0] - The scale applied to the image. A scale of 1.0 will display no zoom (one image pixel takes up one screen pixel). A scale of 2.0 will be double zoom and a scale of .5 will be zoomed out by 2x\n * @param {vec2} [translation] - An object with properties x and y which describe the translation to apply in the pixel coordinate system. Note that the image is initially displayed centered in the enabled element with a x and y translation of 0 and 0 respectively.\n * @param {VOI} [voi] - an object with properties windowWidth and windowCenter.\n * @property {boolean} [invert=false] - Whether or not the image is inverted.\n * @property {boolean} [pixelReplication=false] - true if the image smooth / interpolation should be used when zoomed in on the image or false if pixel replication should be used.\n * @property {boolean} [hflip=false] - true if the image is flipped horizontally. Default is false\n * @property {boolean} [vflip=false] - true if the image is flipped vertically. Default is false\n * @property {Number} [rotation=0] - the rotation of the image (90 degree increments). Default is 0\n * @property {LUT} [modalityLUT] - the modality LUT to apply or undefined if none\n * @property {LUT} [voiLUT] - the modality LUT to apply or undefined if none\n * @property {String|Colormap} [colormap] - an optional colormap ID or colormap object (from colors/colormap.js). This will be applied during rendering to convert the image to pseudocolor\n * @property {Boolean} [labelmap=false] - whether or not to render this image as a label map (i.e. skip modality and VOI LUT pipelines and use only a color lookup table)\n */\n\n/**\n * An Enabled Element in Cornerstone\n *\n * @typedef {Object} EnabledElement\n *\n * @property {HTMLElement} element - The DOM element which has been enabled for use by Cornerstone\n * @property {Image} [image] - The image currently displayed in the enabledElement\n * @property {Viewport} [viewport] - The current viewport settings of the enabledElement\n * @property {HTMLCanvasElement} [canvas] - The current canvas for this enabledElement\n * @property {Boolean} invalid - Whether or not the image pixel data underlying the enabledElement has been changed, necessitating a redraw\n * @property {Boolean} needsRedraw - A flag for triggering a redraw of the canvas without re-retrieving the pixel data, since it remains valid\n * @property {EnabledElementLayer[]} [layers] - The layers that have been added to the enabledElement\n * @property {Boolean} [syncViewports] - Whether or not to synchronize the viewport parameters\n * for each of the enabled element's layers\n * @property {Boolean} [lastSyncViewportsState] - The previous state for the sync viewport boolean\n */\n\n/**\n * An Enabled Element Layer in Cornerstone\n *\n * @typedef {Object} EnabledElementLayer\n *\n * @property {HTMLElement} element - The DOM element which has been enabled for use by Cornerstone\n * @property {Image} [image] - The image currently displayed in the enabledElement\n * @property {Viewport} [viewport] - The current viewport settings of the enabledElement\n * @property {HTMLCanvasElement} [canvas] - The current canvas for this enabledElement\n * @property {Object} [options] - Layer drawing options\n * @property {Boolean} invalid - Whether or not the image pixel data underlying the enabledElement has been changed, necessitating a redraw\n * @property {Boolean} needsRedraw - A flag for triggering a redraw of the canvas without re-retrieving the pixel data, since it remains valid\n */\n\n\n/**\n * Retrieves a Cornerstone Enabled Element object\n *\n * @param {HTMLElement} element An HTML Element enabled for Cornerstone\n *\n * @returns {EnabledElement} A Cornerstone Enabled Element\n */\nexport function getEnabledElement (element) {\n  if (element === undefined) {\n    throw new Error('getEnabledElement: parameter element must not be undefined');\n  }\n  for (let i = 0; i < enabledElements.length; i++) {\n    if (enabledElements[i].element === element) {\n      return enabledElements[i];\n    }\n  }\n\n  throw new Error('element not enabled');\n}\n\n/**\n * Adds a Cornerstone Enabled Element object to the central store of enabledElements\n *\n * @param {EnabledElement} enabledElement A Cornerstone enabledElement Object\n * @returns {void}\n */\nexport function addEnabledElement (enabledElement) {\n  if (enabledElement === undefined) {\n    throw new Error('getEnabledElement: enabledElement element must not be undefined');\n  }\n\n  enabledElements.push(enabledElement);\n}\n\n/**\n * Adds a Cornerstone Enabled Element object to the central store of enabledElements\n *\n * @param {string} imageId A Cornerstone Image ID\n * @returns {EnabledElement[]} An Array of Cornerstone enabledElement Objects\n */\nexport function getEnabledElementsByImageId (imageId) {\n  const ees = [];\n\n  enabledElements.forEach(function (enabledElement) {\n    if (enabledElement.image && enabledElement.image.imageId === imageId) {\n      ees.push(enabledElement);\n    }\n  });\n\n  return ees;\n}\n\n/**\n * Retrieve all of the currently enabled Cornerstone elements\n *\n * @return {EnabledElement[]} An Array of Cornerstone enabledElement Objects\n */\nexport function getEnabledElements () {\n  return enabledElements;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./enabledElements.js","/**\n * Use the performance.now() method if possible, and if not, use Date.now()\n *\n * @return {number} Time elapsed since the time origin\n */\nexport default function () {\n  if (window.performance) {\n    return performance.now();\n  }\n\n  return Date.now();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./internal/now.js","import { external } from './externalModules.js';\n\n/**\n * Trigger a CustomEvent\n *\n * @param {EventTarget} el The element or EventTarget to trigger the event upon\n * @param {String} type The event type name\n * @param {Object|null} detail=null The event data to be sent\n * @returns {void}\n */\nexport default function triggerEvent (el, type, detail = null) {\n  let event;\n\n  // This check is needed to polyfill CustomEvent on IE11-\n  if (typeof window.CustomEvent === 'function') {\n    event = new CustomEvent(type.toLocaleLowerCase(), { detail });\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(type.toLocaleLowerCase(), true, true, detail);\n  }\n\n  // TODO: remove jQuery event triggers\n  external.$(el).trigger(type, detail);\n  el.dispatchEvent(event);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./triggerEvent.js","import { getEnabledElement } from './enabledElements.js';\nimport drawImage from './internal/drawImage.js';\n\n/**\n * Forces the image to be updated/redrawn for the specified enabled element\n * @param {HTMLElement} element An HTML Element enabled for Cornerstone\n * @param {Boolean} [invalidated=false] Whether or not the image pixel data has been changed, necessitating a redraw\n *\n * @returns {void}\n */\nexport default function (element, invalidated = false) {\n  const enabledElement = getEnabledElement(element);\n\n  if (enabledElement.image === undefined && !enabledElement.layers.length) {\n    throw new Error('updateImage: image has not been loaded yet');\n  }\n\n  drawImage(enabledElement, invalidated);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./updateImage.js","/**\n * Internal API function to draw an image to a given enabled element\n *\n * @param {EnabledElement} enabledElement The Cornerstone Enabled Element to redraw\n * @param {Boolean} [invalidated] - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n */\nexport default function (enabledElement, invalidated = false) {\n  enabledElement.needsRedraw = true;\n  if (invalidated) {\n    enabledElement.invalid = true;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./internal/drawImage.js","/**\n * Creates a new viewport object containing default values for the image and canvas\n *\n * @returns {Viewport} viewport object\n */\nexport default function (enabledElement) {\n  const { canvas, image, element } = enabledElement;\n\n  if (canvas === undefined) {\n    throw new Error('getDefaultViewport: parameter canvas must not be undefined');\n  }\n\n  if (image === undefined) {\n    return {\n      scale: 1,\n      translation: {\n        x: 0,\n        y: 0\n      },\n      voi: {\n        windowWidth: undefined,\n        windowCenter: undefined\n      },\n      invert: false,\n      pixelReplication: false,\n      rotation: 0,\n      hflip: false,\n      vflip: false,\n      modalityLUT: undefined,\n      voiLUT: undefined,\n      colormap: undefined,\n      labelmap: false\n    };\n  }\n\n  // Fit image to window\n  const verticalScale = element.offsetHeight / image.rows;\n  const horizontalScale = element.offsetWidth / image.columns;\n  const scale = Math.min(horizontalScale, verticalScale);\n\n  return {\n    scale,\n    translation: {\n      x: 0,\n      y: 0\n    },\n    voi: {\n      windowWidth: image.windowWidth,\n      windowCenter: image.windowCenter\n    },\n    invert: image.invert,\n    pixelReplication: false,\n    rotation: 0,\n    hflip: false,\n    vflip: false,\n    modalityLUT: image.modalityLUT,\n    voiLUT: image.voiLUT,\n    colormap: image.colormap,\n    labelmap: Boolean(image.labelmap)\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./internal/getDefaultViewport.js","import { getColormap, getColormapsList } from './colormap.js';\nimport LookupTable from './lookupTable.js';\n\nexport default {\n  getColormap,\n  getColormapsList,\n  LookupTable\n};\n\n\n\n// WEBPACK FOOTER //\n// ./colors/index.js","/**\n * This module contains a function that will set the canvas context to the pixel coordinates system\n * making it easy to draw geometry on the image\n */\n\nimport calculateTransform from './internal/calculateTransform.js';\n\n/**\n * Sets the canvas context transformation matrix to the pixel coordinate system.  This allows\n * geometry to be driven using the canvas context using coordinates in the pixel coordinate system\n * @param {EnabledElement} enabledElement The\n * @param {CanvasRenderingContext2D} context The CanvasRenderingContext2D for the enabledElement's Canvas\n * @param {Number} [scale] Optional scale to apply\n * @returns {void}\n */\nexport default function (enabledElement, context, scale) {\n  if (enabledElement === undefined) {\n    throw new Error('setToPixelCoordinateSystem: parameter enabledElement must not be undefined');\n  }\n  if (context === undefined) {\n    throw new Error('setToPixelCoordinateSystem: parameter context must not be undefined');\n  }\n\n  const transform = calculateTransform(enabledElement, scale);\n\n  context.setTransform(transform.m[0], transform.m[1], transform.m[2], transform.m[3], transform.m[4], transform.m[5]);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./setToPixelCoordinateSystem.js","/**\n * This module is responsible for drawing an image to an enabled elements canvas element\n */\nimport now from '../internal/now.js';\nimport generateLut from '../internal/generateLut.js';\nimport storedColorPixelDataToCanvasImageData from '../internal/storedColorPixelDataToCanvasImageData.js';\nimport storedRGBAPixelDataToCanvasImageData from '../internal/storedRGBAPixelDataToCanvasImageData.js';\nimport setToPixelCoordinateSystem from '../setToPixelCoordinateSystem.js';\nimport webGL from '../webgl/index.js';\nimport doesImageNeedToBeRendered from './doesImageNeedToBeRendered.js';\nimport initializeRenderCanvas from './initializeRenderCanvas.js';\nimport saveLastRendered from './saveLastRendered.js';\n\nfunction getLut (image, viewport) {\n  // If we have a cached lut and it has the right values, return it immediately\n  if (image.cachedLut !== undefined &&\n        image.cachedLut.windowCenter === viewport.voi.windowCenter &&\n        image.cachedLut.windowWidth === viewport.voi.windowWidth &&\n        image.cachedLut.invert === viewport.invert) {\n    return image.cachedLut.lutArray;\n  }\n\n  // Lut is invalid or not present, regenerate it and cache it\n  generateLut(image, viewport.voi.windowWidth, viewport.voi.windowCenter, viewport.invert);\n  image.cachedLut.windowWidth = viewport.voi.windowWidth;\n  image.cachedLut.windowCenter = viewport.voi.windowCenter;\n  image.cachedLut.invert = viewport.invert;\n\n  return image.cachedLut.lutArray;\n}\n\nfunction getRenderCanvas (enabledElement, image, invalidated) {\n  if (!enabledElement.renderingTools.renderCanvas) {\n    enabledElement.renderingTools.renderCanvas = document.createElement('canvas');\n  }\n\n  const renderCanvas = enabledElement.renderingTools.renderCanvas;\n\n  // The ww/wc is identity and not inverted - get a canvas with the image rendered into it for\n  // Fast drawing\n  if (enabledElement.viewport.voi.windowWidth === 255 &&\n        enabledElement.viewport.voi.windowCenter === 128 &&\n        enabledElement.viewport.invert === false &&\n        image.getCanvas &&\n        image.getCanvas()\n  ) {\n    return image.getCanvas();\n  }\n\n  // Apply the lut to the stored pixel data onto the render canvas\n  if (doesImageNeedToBeRendered(enabledElement, image) === false && invalidated !== true) {\n    return renderCanvas;\n  }\n\n  // If our render canvas does not match the size of this image reset it\n  // NOTE: This might be inefficient if we are updating multiple images of different\n  // Sizes frequently.\n  if (renderCanvas.width !== image.width || renderCanvas.height !== image.height) {\n    initializeRenderCanvas(enabledElement, image);\n  }\n\n  // Get the lut to use\n  let start = now();\n  const colorLut = getLut(image, enabledElement.viewport);\n\n  image.stats = image.stats || {};\n  image.stats.lastLutGenerateTime = now() - start;\n\n  const renderCanvasData = enabledElement.renderingTools.renderCanvasData;\n  const renderCanvasContext = enabledElement.renderingTools.renderCanvasContext;\n\n  // The color image voi/invert has been modified - apply the lut to the underlying\n  // Pixel data and put it into the renderCanvas\n  if (image.rgba) {\n    storedRGBAPixelDataToCanvasImageData(image, colorLut, renderCanvasData.data);\n  } else {\n    storedColorPixelDataToCanvasImageData(image, colorLut, renderCanvasData.data);\n  }\n\n  start = now();\n  renderCanvasContext.putImageData(renderCanvasData, 0, 0);\n  image.stats.lastPutImageDataTime = now() - start;\n\n  return renderCanvas;\n}\n\n/**\n * API function to render a color image to an enabled element\n *\n * @param {EnabledElement} enabledElement The Cornerstone Enabled Element to redraw\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n */\nexport function renderColorImage (enabledElement, invalidated) {\n  if (enabledElement === undefined) {\n    throw new Error('renderColorImage: enabledElement parameter must not be undefined');\n  }\n\n  const image = enabledElement.image;\n\n  if (image === undefined) {\n    throw new Error('renderColorImage: image must be loaded before it can be drawn');\n  }\n\n  // Get the canvas context and reset the transform\n  const context = enabledElement.canvas.getContext('2d');\n\n  context.setTransform(1, 0, 0, 1, 0, 0);\n\n  // Clear the canvas\n  context.fillStyle = 'black';\n  context.fillRect(0, 0, enabledElement.canvas.width, enabledElement.canvas.height);\n\n  // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n  context.imageSmoothingEnabled = !enabledElement.viewport.pixelReplication;\n  context.mozImageSmoothingEnabled = context.imageSmoothingEnabled;\n\n  // Save the canvas context state and apply the viewport properties\n  setToPixelCoordinateSystem(enabledElement, context);\n\n  let renderCanvas;\n\n  if (enabledElement.options && enabledElement.options.renderer &&\n    enabledElement.options.renderer.toLowerCase() === 'webgl') {\n    // If this enabled element has the option set for WebGL, we should\n    // User it as our renderer.\n    renderCanvas = webGL.renderer.render(enabledElement);\n  } else {\n    // If no options are set we will retrieve the renderCanvas through the\n    // Normal Canvas rendering path\n    renderCanvas = getRenderCanvas(enabledElement, image, invalidated);\n  }\n\n  context.drawImage(renderCanvas, 0, 0, image.width, image.height, 0, 0, image.width, image.height);\n\n  enabledElement.renderingTools = saveLastRendered(enabledElement);\n}\n\nexport function addColorLayer (layer, invalidated) {\n  if (layer === undefined) {\n    throw new Error('addColorLayer: layer parameter must not be undefined');\n  }\n\n  const image = layer.image;\n\n  if (image === undefined) {\n    throw new Error('addColorLayer: image must be loaded before it can be drawn');\n  }\n\n  // All multi-layer images should include the alpha value\n  image.rgba = true;\n  layer.canvas = getRenderCanvas(layer, image, invalidated);\n\n  const context = layer.canvas.getContext('2d');\n\n  // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n  context.imageSmoothingEnabled = !layer.viewport.pixelReplication;\n  context.mozImageSmoothingEnabled = context.imageSmoothingEnabled;\n\n  layer.renderingTools = saveLastRendered(layer);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./rendering/renderColorImage.js","import getModalityLUT from './getModalityLUT.js';\r\nimport getVOILUT from './getVOILut.js';\r\n\r\n/**\r\n * Creates a LUT used while rendering to convert stored pixel values to\r\n * display pixels\r\n *\r\n * @param {Image} image A Cornerstone Image Object\r\n * @param {Number} windowWidth The Window Width\r\n * @param {Number} windowCenter The Window Center\r\n * @param {Boolean} invert A boolean describing whether or not the image has been inverted\r\n * @param {Array} [modalityLUT] A modality Lookup Table\r\n * @param {Array} [voiLUT] A Volume of Interest Lookup Table\r\n *\r\n * @returns {Uint8ClampedArray} A lookup table to apply to the image\r\n */\r\nexport default function (image, windowWidth, windowCenter, invert, modalityLUT, voiLUT) {\r\n  const maxPixelValue = image.maxPixelValue;\r\n  const minPixelValue = image.minPixelValue;\r\n  const offset = Math.min(minPixelValue, 0);\r\n\r\n  if (image.cachedLut === undefined) {\r\n    const length = maxPixelValue - offset + 1;\r\n\r\n    image.cachedLut = {};\r\n    image.cachedLut.lutArray = new Uint8ClampedArray(length);\r\n  }\r\n\r\n  const lut = image.cachedLut.lutArray;\r\n  const mlutfn = getModalityLUT(image.slope, image.intercept, modalityLUT);\r\n  const vlutfn = getVOILUT(windowWidth, windowCenter, voiLUT);\r\n\r\n  if (invert === true) {\r\n    for (let storedValue = minPixelValue; storedValue <= maxPixelValue; storedValue++) {\r\n      lut[storedValue + (-offset)] = 255 - vlutfn(mlutfn(storedValue));\r\n    }\r\n  } else {\r\n    for (let storedValue = minPixelValue; storedValue <= maxPixelValue; storedValue++) {\r\n      lut[storedValue + (-offset)] = vlutfn(mlutfn(storedValue));\r\n    }\r\n  }\r\n\r\n  return lut;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./internal/generateLut.js","import calculateTransform from './calculateTransform.js';\n\nexport default function (enabledElement) {\n  // For now we will calculate it every time it is requested.\n  // In the future, we may want to cache it in the enabled element to speed things up.\n  return calculateTransform(enabledElement);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./internal/getTransform.js","export default function (enabledElement) {\n  const imageId = enabledElement.image.imageId;\n  const viewport = enabledElement.viewport;\n\n  enabledElement.renderingTools.lastRenderedImageId = imageId;\n  enabledElement.renderingTools.lastRenderedViewport = {\n    windowCenter: viewport.voi.windowCenter,\n    windowWidth: viewport.voi.windowWidth,\n    invert: viewport.invert,\n    rotation: viewport.rotation,\n    hflip: viewport.hflip,\n    vflip: viewport.vflip,\n    modalityLUT: viewport.modalityLUT,\n    voiLUT: viewport.voiLUT,\n    colormap: viewport.colormap\n  };\n\n  return enabledElement.renderingTools;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./rendering/saveLastRendered.js","export default function (enabledElement, image) {\n  const lastRenderedImageId = enabledElement.renderingTools.lastRenderedImageId;\n  const lastRenderedViewport = enabledElement.renderingTools.lastRenderedViewport;\n\n  return (\n    image.imageId !== lastRenderedImageId ||\n    !lastRenderedViewport ||\n    lastRenderedViewport.windowCenter !== enabledElement.viewport.voi.windowCenter ||\n    lastRenderedViewport.windowWidth !== enabledElement.viewport.voi.windowWidth ||\n    lastRenderedViewport.invert !== enabledElement.viewport.invert ||\n    lastRenderedViewport.modalityLUT !== enabledElement.viewport.modalityLUT ||\n    lastRenderedViewport.voiLUT !== enabledElement.viewport.voiLUT ||\n    lastRenderedViewport.colormap !== enabledElement.viewport.colormap\n  );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./rendering/doesImageNeedToBeRendered.js","import { render, initRenderer, getRenderCanvas, isWebGLAvailable, isWebGLInitialized } from './renderer.js';\nimport createProgramFromString from './createProgramFromString.js';\nimport textureCache from './textureCache.js';\n\nconst mod = {\n  createProgramFromString,\n  renderer: {\n    render,\n    initRenderer,\n    getRenderCanvas,\n    isWebGLAvailable\n  },\n  textureCache\n};\n\nObject.defineProperty(mod, 'isWebGLInitialized', {\n  enumerable: true,\n  configurable: false,\n  get: () => isWebGLInitialized\n});\n\nexport default mod;\n\n\n\n// WEBPACK FOOTER //\n// ./webgl/index.js","class EventTarget {\n  constructor () {\n    this.listeners = {};\n  }\n\n  addEventListener (type, callback) {\n    if (!(type in this.listeners)) {\n      this.listeners[type] = [];\n    }\n\n    this.listeners[type].push(callback);\n  }\n\n  removeEventListener (type, callback) {\n    if (!(type in this.listeners)) {\n      return;\n    }\n\n    const stack = this.listeners[type];\n\n    for (let i = 0, l = stack.length; i < l; i++) {\n      if (stack[i] === callback) {\n        stack.splice(i, 1);\n\n        return;\n      }\n    }\n  }\n\n  dispatchEvent (event) {\n    if (!(event.type in this.listeners)) {\n      return true;\n    }\n\n    const stack = this.listeners[event.type];\n\n    for (let i = 0, l = stack.length; i < l; i++) {\n      stack[i].call(this, event);\n    }\n\n    return !event.defaultPrevented;\n  }\n}\n\n\nconst events = new EventTarget();\n\nexport default events;\n\n\n\n// WEBPACK FOOTER //\n// ./events.js","import storedPixelDataToCanvasImageData from '../internal/storedPixelDataToCanvasImageData.js';\nimport storedPixelDataToCanvasImageDataRGBA from '../internal/storedPixelDataToCanvasImageDataRGBA.js';\nimport now from '../internal/now.js';\nimport webGL from '../webgl/index.js';\nimport getLut from './getLut.js';\nimport saveLastRendered from './saveLastRendered.js';\n\n/**\n * API function to draw a grayscale image to a given enabledElement\n *\n * @param {EnabledElement} enabledElement The Cornerstone Enabled Element to redraw\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n */\nexport function renderGrayscaleImage (enabledElement, invalidated) {\n  if (enabledElement === undefined) {\n    throw new Error('drawImage: enabledElement parameter must not be undefined');\n  }\n\n  const image = enabledElement.image;\n\n  if (image === undefined) {\n    throw new Error('drawImage: image must be loaded before it can be drawn');\n  }\n\n  // Get the canvas context and reset the transform\n  const context = enabledElement.canvas.getContext('2d');\n  const canvas = enabledElement.canvas;\n\n  context.setTransform(1, 0, 0, 1, 0, 0);\n\n  // Clear the canvas\n  context.fillStyle = 'white';\n  context.fillRect(0, 0, canvas.width, canvas.height);\n\n  // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n  context.imageSmoothingEnabled = !enabledElement.viewport.pixelReplication;\n  context.mozImageSmoothingEnabled = context.imageSmoothingEnabled;\n\n  const useAlphaChannel = true;\n  const canvasData = context.getImageData(0, 0, canvas.width, canvas.height);\n\n  // Get the lut to use\n  let start = now();\n  const lut = getLut(image, enabledElement.viewport, invalidated);\n\n  image.stats = image.stats || {};\n  image.stats.lastLutGenerateTime = now() - start;\n\n  // Gray scale image - apply the lut and put the resulting image onto the render canvas\n  if (useAlphaChannel) {\n    storedPixelDataToCanvasImageData(image, lut, canvasData.data);\n  } else {\n    storedPixelDataToCanvasImageDataRGBA(image, lut, canvasData.data);\n  }\n\n  start = now();\n  context.putImageData(canvasData, 0, 0);\n  image.stats.lastPutImageDataTime = now() - start;\n\n  enabledElement.renderingTools = saveLastRendered(enabledElement);\n}\n\n/**\n * API function to draw a grayscale image to a given layer\n *\n * @param {EnabledElementLayer} layer The layer that the image will be added to\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @param {Boolean} [useAlphaChannel] - Whether or not to render the grayscale image using only the alpha channel.\n                                        This does not work if this layer is not the first layer in the enabledElement.\n * @returns {void}\n */\nexport function addGrayscaleLayer (layer, invalidated, useAlphaChannel = false) {\n  if (layer === undefined) {\n    throw new Error('addGrayscaleLayer: layer parameter must not be undefined');\n  }\n\n  const image = layer.image;\n\n  if (image === undefined) {\n    throw new Error('addGrayscaleLayer: image must be loaded before it can be drawn');\n  }\n\n  // layer.canvas = getRenderCanvas(layer, image, invalidated, useAlphaChannel);\n\n  const context = layer.canvas.getContext('2d');\n\n  // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n  context.imageSmoothingEnabled = !layer.viewport.pixelReplication;\n  context.mozImageSmoothingEnabled = context.imageSmoothingEnabled;\n\n  layer.renderingTools = saveLastRendered(layer);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./rendering/renderGrayscaleImage.js","function requestFrame (callback) {\n  window.setTimeout(callback, 1000 / 60);\n}\n\n/**\n * Polyfills requestAnimationFrame for older browsers.\n *\n * @param {Function} callback A parameter specifying a function to call when it's time to update your animation for the next repaint. The callback has one single argument, a DOMHighResTimeStamp, which indicates the current time (the time returned from performance.now() ) for when requestAnimationFrame starts to fire callbacks.\n *\n * @return {Number} A long integer value, the request id, that uniquely identifies the entry in the callback list. This is a non-zero value, but you may not make any other assumptions about its value. You can pass this value to window.cancelAnimationFrame() to cancel the refresh callback request.\n */\nexport default function (callback) {\n  return window.requestAnimationFrame(callback) ||\n    window.webkitRequestAnimationFrame(callback) ||\n    window.mozRequestAnimationFrame(callback) ||\n    window.oRequestAnimationFrame(callback) ||\n    window.msRequestAnimationFrame(callback) ||\n    requestFrame(callback);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./internal/requestAnimationFrame.js","import now from './now.js';\n\n/**\n * This function transforms stored pixel values into a canvas image data buffer\n * by using a LUT.  This is the most performance sensitive code in cornerstone and\n * we use a special trick to make this go as fast as possible.  Specifically we\n * use the alpha channel only to control the luminance rather than the red, green and\n * blue channels which makes it over 3x faster. The canvasImageDataData buffer needs\n * to be previously filled with white pixels.\n *\n * NOTE: Attribution would be appreciated if you use this technique!\n *\n * @param {Image} image A Cornerstone Image Object\n * @param {Array} lut Lookup table array\n * @param {Uint8ClampedArray} canvasImageDataData canvasImageData.data buffer filled with white pixels\n *\n * @returns {void}\n */\nexport default function (image, lut, canvasImageDataData) {\n  let start = now();\n  const pixelData = image.getPixelData();\n\n  image.stats.lastGetPixelDataTime = now() - start;\n\n  const numPixels = pixelData.length;\n  const minPixelValue = image.minPixelValue;\n  let canvasImageDataIndex = 3;\n  let storedPixelDataIndex = 0;\n\n\n  // NOTE: As of Nov 2014, most javascript engines have lower performance when indexing negative indexes.\n  // We have a special code path for this case that improves performance.  Thanks to @jpambrun for this enhancement\n\n  // Added two paths (Int16Array, Uint16Array) to avoid polymorphic deoptimization in chrome.\n  start = now();\n  if (pixelData instanceof Int16Array) {\n    if (minPixelValue < 0) {\n      while (storedPixelDataIndex < numPixels) {\n        canvasImageDataData[canvasImageDataIndex] = lut[pixelData[storedPixelDataIndex++] + (-minPixelValue)]; // Alpha\n        canvasImageDataIndex += 4;\n      }\n    } else {\n      while (storedPixelDataIndex < numPixels) {\n        canvasImageDataData[canvasImageDataIndex] = lut[pixelData[storedPixelDataIndex++]]; // Alpha\n        canvasImageDataIndex += 4;\n      }\n    }\n  } else if (pixelData instanceof Uint16Array) {\n    while (storedPixelDataIndex < numPixels) {\n      canvasImageDataData[canvasImageDataIndex] = lut[pixelData[storedPixelDataIndex++]]; // Alpha\n      canvasImageDataIndex += 4;\n    }\n  } else if (minPixelValue < 0) {\n    while (storedPixelDataIndex < numPixels) {\n      canvasImageDataData[canvasImageDataIndex] = lut[pixelData[storedPixelDataIndex++] + (-minPixelValue)]; // Alpha\n      canvasImageDataIndex += 4;\n    }\n  } else {\n    while (storedPixelDataIndex < numPixels) {\n      canvasImageDataData[canvasImageDataIndex] = lut[pixelData[storedPixelDataIndex++]]; // Alpha\n      canvasImageDataIndex += 4;\n    }\n  }\n\n  image.stats.lastStoredPixelDataToCanvasImageDataTime = now() - start;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./internal/storedPixelDataToCanvasImageData.js","import now from './now.js';\n\n/**\n * Converts stored color pixel values to display pixel values using a LUT.\n *\n * Note: Skips alpha value for any input image pixel data.\n *\n * @param {Image} image A Cornerstone Image Object\n * @param {Array} lut Lookup table array\n * @param {Uint8ClampedArray} canvasImageDataData canvasImageData.data buffer filled with white pixels\n *\n * @returns {void}\n */\nexport default function (image, lut, canvasImageDataData) {\n\n  let start = now();\n  const pixelData = image.getPixelData();\n\n  image.stats.lastGetPixelDataTime = now() - start;\n\n  const minPixelValue = image.minPixelValue;\n  let canvasImageDataIndex = 0;\n  let storedPixelDataIndex = 0;\n  const numPixels = pixelData.length;\n\n  // NOTE: As of Nov 2014, most javascript engines have lower performance when indexing negative indexes.\n  // We have a special code path for this case that improves performance.  Thanks to @jpambrun for this enhancement\n  start = now();\n  if (minPixelValue < 0) {\n    while (storedPixelDataIndex < numPixels) {\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++] + (-minPixelValue)]; // Red\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++] + (-minPixelValue)]; // Green\n      canvasImageDataData[canvasImageDataIndex] = lut[pixelData[storedPixelDataIndex] + (-minPixelValue)]; // Blue\n      storedPixelDataIndex += 2;\n      canvasImageDataIndex += 2;\n    }\n  } else {\n    while (storedPixelDataIndex < numPixels) {\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++]]; // Red\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++]]; // Green\n      canvasImageDataData[canvasImageDataIndex] = lut[pixelData[storedPixelDataIndex]]; // Blue\n      storedPixelDataIndex += 2;\n      canvasImageDataIndex += 2;\n    }\n  }\n  image.stats.lastStoredPixelDataToCanvasImageDataTime = now() - start;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./internal/storedColorPixelDataToCanvasImageData.js","import colors from '../colors/index.js';\nimport now from './now.js';\n\n/**\n *\n * @param {Image} image A Cornerstone Image Object\n * @param {LookupTable|Array} colorLut Lookup table array\n * @param {Uint8ClampedArray} canvasImageDataData canvasImageData.data buffer filled with white pixels\n *\n * @returns {void}\n */\nfunction storedPixelDataToCanvasImageDataColorLUT (image, colorLut, canvasImageDataData) {\n  let start = now();\n  const pixelData = image.getPixelData();\n\n  image.stats.lastGetPixelDataTime = now() - start;\n\n  const numPixels = pixelData.length;\n  const minPixelValue = image.minPixelValue;\n  let canvasImageDataIndex = 0;\n  let storedPixelDataIndex = 0;\n  let rgba;\n  let clut;\n\n  start = now();\n\n  if (colorLut instanceof colors.LookupTable) {\n    clut = colorLut.Table;\n  } else {\n    clut = colorLut;\n  }\n\n  if (minPixelValue < 0) {\n    while (storedPixelDataIndex < numPixels) {\n      rgba = clut[pixelData[storedPixelDataIndex++] + (-minPixelValue)];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[0];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[1];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[2];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[3];\n    }\n  } else {\n    while (storedPixelDataIndex < numPixels) {\n      rgba = clut[pixelData[storedPixelDataIndex++]];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[0];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[1];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[2];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[3];\n    }\n  }\n\n  image.stats.lastStoredPixelDataToCanvasImageDataTime = now() - start;\n}\n\nexport default storedPixelDataToCanvasImageDataColorLUT;\n\n\n\n// WEBPACK FOOTER //\n// ./internal/storedPixelDataToCanvasImageDataColorLUT.js","import colors from '../colors/index.js';\nimport now from './now.js';\n\n/**\n *\n * @param {Image} image A Cornerstone Image Object\n * @param {Array} grayscaleLut Lookup table array\n * @param {LookupTable|Array} colorLut Lookup table array\n * @param {Uint8ClampedArray} canvasImageDataData canvasImageData.data buffer filled with white pixels\n *\n * @returns {void}\n */\nfunction storedPixelDataToCanvasImageDataPseudocolorLUT (image, grayscaleLut, colorLut, canvasImageDataData) {\n  let start = now();\n  const pixelData = image.getPixelData();\n\n  image.stats.lastGetPixelDataTime = now() - start;\n\n  const numPixels = pixelData.length;\n  const minPixelValue = image.minPixelValue;\n  let canvasImageDataIndex = 0;\n  let storedPixelDataIndex = 0;\n  let grayscale;\n  let rgba;\n  let clut;\n\n  start = now();\n\n  if (colorLut instanceof colors.LookupTable) {\n    clut = colorLut.Table;\n  } else {\n    clut = colorLut;\n  }\n\n  if (minPixelValue < 0) {\n    while (storedPixelDataIndex < numPixels) {\n      grayscale = grayscaleLut[pixelData[storedPixelDataIndex++] + (-minPixelValue)];\n      rgba = clut[grayscale];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[0];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[1];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[2];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[3];\n    }\n  } else {\n    while (storedPixelDataIndex < numPixels) {\n      grayscale = grayscaleLut[pixelData[storedPixelDataIndex++]];\n      rgba = clut[grayscale];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[0];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[1];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[2];\n      canvasImageDataData[canvasImageDataIndex++] = rgba[3];\n    }\n  }\n\n  image.stats.lastStoredPixelDataToCanvasImageDataTime = now() - start;\n}\n\nexport default storedPixelDataToCanvasImageDataPseudocolorLUT;\n\n\n\n// WEBPACK FOOTER //\n// ./internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js","import { Transform } from './transform.js';\n\n/**\n * Calculate the transform for a Cornerstone enabled element\n *\n * @param {EnabledElement} enabledElement The Cornerstone Enabled Element\n * @param {Number} [scale] The viewport scale\n * @return {Transform} The current transform\n */\nexport default function (enabledElement, scale = 1) {\n\n  const transform = new Transform();\n\n  transform.translate(-enabledElement.canvas.width / 2, -enabledElement.canvas.height / 2);\n\n  // Apply the rotation before scaling for non square pixels\n  const angle = enabledElement.viewport.rotation;\n\n  if (angle !== 0) {\n    transform.rotate(angle * Math.PI / 180);\n  }\n\n  // Apply the scale\n  let widthScale = enabledElement.viewport.scale;\n  let heightScale = enabledElement.viewport.scale;\n\n  if (enabledElement.image.rowPixelSpacing < enabledElement.image.columnPixelSpacing) {\n    widthScale *= (enabledElement.image.columnPixelSpacing / enabledElement.image.rowPixelSpacing);\n  } else if (enabledElement.image.columnPixelSpacing < enabledElement.image.rowPixelSpacing) {\n    heightScale *= (enabledElement.image.rowPixelSpacing / enabledElement.image.columnPixelSpacing);\n  }\n  transform.scale(widthScale, heightScale);\n\n  // Unrotate to so we can translate unrotated\n  if (angle !== 0) {\n    transform.rotate(-angle * Math.PI / 180);\n  }\n\n  // Apply the pan offset\n  transform.translate(enabledElement.viewport.translation.x, enabledElement.viewport.translation.y);\n\n  // Rotate again so we can apply general scale\n  if (angle !== 0) {\n    transform.rotate(angle * Math.PI / 180);\n  }\n\n  const xScale = (enabledElement.viewport.hflip ? -1 : 1) * scale;\n  const yScale = (enabledElement.viewport.vflip ? -1 : 1) * scale;\n\n  transform.scale(xScale, yScale);\n\n  return transform;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./internal/calculateTransform.js","import setToPixelCoordinateSystem from '../setToPixelCoordinateSystem.js';\nimport now from '../internal/now.js';\nimport initializeRenderCanvas from './initializeRenderCanvas.js';\nimport saveLastRendered from './saveLastRendered.js';\nimport doesImageNeedToBeRendered from './doesImageNeedToBeRendered.js';\nimport storedPixelDataToCanvasImageDataColorLUT from '../internal/storedPixelDataToCanvasImageDataColorLUT.js';\nimport colors from '../colors/index.js';\n\nfunction getRenderCanvas (enabledElement, image, invalidated) {\n  if (!enabledElement.renderingTools.renderCanvas) {\n    enabledElement.renderingTools.renderCanvas = document.createElement('canvas');\n  }\n\n  const renderCanvas = enabledElement.renderingTools.renderCanvas;\n\n  // TODO: Deprecate enabledElement.options.colormap\n  let colormap = enabledElement.viewport.colormap || enabledElement.options.colormap;\n\n  if (colormap && (typeof colormap === 'string')) {\n    colormap = colors.getColormap(colormap);\n  }\n\n  if (!colormap) {\n    throw new Error('renderLabelMapImage: colormap not found.');\n  }\n\n  const colormapId = colormap.getId();\n\n  if (doesImageNeedToBeRendered(enabledElement, image) === false && invalidated !== true &&\n    enabledElement.renderingTools.colormapId === colormapId) {\n    return renderCanvas;\n  }\n\n  // If our render canvas does not match the size of this image reset it\n  // NOTE: This might be inefficient if we are updating multiple images of different\n  // Sizes frequently.\n  if (renderCanvas.width !== image.width || renderCanvas.height !== image.height) {\n    initializeRenderCanvas(enabledElement, image);\n  }\n\n  // Get the lut to use\n  let start = now();\n\n  if (!enabledElement.renderingTools.colorLut || invalidated ||\n    enabledElement.renderingTools.colormapId !== colormapId) {\n    enabledElement.renderingTools.colorLut = colormap.createLookupTable();\n    enabledElement.renderingTools.colormapId = colormapId;\n  }\n\n  image.stats = image.stats || {};\n  image.stats.lastLutGenerateTime = now() - start;\n\n  const colorLut = enabledElement.renderingTools.colorLut;\n  const renderCanvasData = enabledElement.renderingTools.renderCanvasData;\n  const renderCanvasContext = enabledElement.renderingTools.renderCanvasContext;\n\n  storedPixelDataToCanvasImageDataColorLUT(image, colorLut, renderCanvasData.data);\n\n  start = now();\n  renderCanvasContext.putImageData(renderCanvasData, 0, 0);\n  image.stats.lastPutImageDataTime = now() - start;\n\n  return renderCanvas;\n}\n\n/**\n * API function to draw a label map image to a given enabledElement\n *\n * @param {EnabledElement} enabledElement The Cornerstone Enabled Element to redraw\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n */\nexport function renderLabelMapImage (enabledElement, invalidated) {\n  if (enabledElement === undefined) {\n    throw new Error('renderLabelMapImage: enabledElement parameter must not be undefined');\n  }\n\n  const image = enabledElement.image;\n\n  if (image === undefined) {\n    throw new Error('renderLabelMapImage: image must be loaded before it can be drawn');\n  }\n\n  // Get the canvas context and reset the transform\n  const context = enabledElement.canvas.getContext('2d');\n\n  context.setTransform(1, 0, 0, 1, 0, 0);\n\n  // Clear the canvas\n  context.fillStyle = 'black';\n  context.fillRect(0, 0, enabledElement.canvas.width, enabledElement.canvas.height);\n\n  // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n  context.imageSmoothingEnabled = !enabledElement.viewport.pixelReplication;\n  context.mozImageSmoothingEnabled = context.imageSmoothingEnabled;\n\n  // Save the canvas context state and apply the viewport properties\n  setToPixelCoordinateSystem(enabledElement, context);\n\n  // If no options are set we will retrieve the renderCanvas through the\n  // Normal Canvas rendering path\n  // TODO: Add WebGL support for label map pipeline\n  const renderCanvas = getRenderCanvas(enabledElement, image, invalidated);\n  const { width, height } = image;\n\n  context.drawImage(renderCanvas, 0, 0, width, height, 0, 0, width, height);\n\n  enabledElement.renderingTools = saveLastRendered(enabledElement);\n}\n\n/**\n * API function to draw a pseudo-color image to a given layer\n *\n * @param {EnabledElementLayer} layer The layer that the image will be added to\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n */\nexport function addLabelMapLayer (layer, invalidated) {\n  if (layer === undefined) {\n    throw new Error('addLabelMapLayer: layer parameter must not be undefined');\n  }\n\n  const image = layer.image;\n\n  if (image === undefined) {\n    throw new Error('addLabelMapLayer: image must be loaded before it can be drawn');\n  }\n\n  layer.canvas = getRenderCanvas(layer, image, invalidated);\n\n  const context = layer.canvas.getContext('2d');\n\n  // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n  context.imageSmoothingEnabled = !layer.viewport.pixelReplication;\n  context.mozImageSmoothingEnabled = context.imageSmoothingEnabled;\n\n  layer.renderingTools = saveLastRendered(layer);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./rendering/renderLabelMapImage.js","export default function (enabledElement, image) {\n  console.log('initializeRenderCanvas');\n  const renderCanvas = enabledElement.renderingTools.renderCanvas;\n\n  // Resize the canvas\n  renderCanvas.width = image.width;\n  renderCanvas.height = image.height;\n\n  const canvasContext = renderCanvas.getContext('2d');\n\n  // NOTE - we need to fill the render canvas with white pixels since we\n  // control the luminance using the alpha channel to improve rendering performance.\n  canvasContext.fillStyle = 'white';\n  canvasContext.fillRect(0, 0, renderCanvas.width, renderCanvas.height);\n\n  const renderCanvasData = canvasContext.getImageData(0, 0, image.width, image.height);\n\n  enabledElement.renderingTools.renderCanvasContext = canvasContext;\n  enabledElement.renderingTools.renderCanvasData = renderCanvasData;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./rendering/initializeRenderCanvas.js","import setToPixelCoordinateSystem from '../setToPixelCoordinateSystem.js';\nimport now from '../internal/now.js';\nimport initializeRenderCanvas from './initializeRenderCanvas.js';\nimport getLut from './getLut.js';\nimport saveLastRendered from './saveLastRendered.js';\nimport doesImageNeedToBeRendered from './doesImageNeedToBeRendered.js';\nimport storedPixelDataToCanvasImageDataPseudocolorLUT from '../internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js';\nimport colors from '../colors/index.js';\n\nfunction getRenderCanvas (enabledElement, image, invalidated) {\n  if (!enabledElement.renderingTools.renderCanvas) {\n    enabledElement.renderingTools.renderCanvas = document.createElement('canvas');\n  }\n\n  const renderCanvas = enabledElement.renderingTools.renderCanvas;\n\n  // TODO: Deprecate enabledElement.options.colormap\n  let colormap = enabledElement.viewport.colormap || enabledElement.options.colormap;\n\n  if (colormap && (typeof colormap === 'string')) {\n    colormap = colors.getColormap(colormap);\n  }\n\n  if (!colormap) {\n    throw new Error('renderPseudoColorImage: colormap not found.');\n  }\n\n  const colormapId = colormap.getId();\n\n  if (doesImageNeedToBeRendered(enabledElement, image) === false && invalidated !== true &&\n    enabledElement.renderingTools.colormapId === colormapId) {\n    return renderCanvas;\n  }\n\n  // If our render canvas does not match the size of this image reset it\n  // NOTE: This might be inefficient if we are updating multiple images of different\n  // Sizes frequently.\n  if (renderCanvas.width !== image.width || renderCanvas.height !== image.height) {\n    initializeRenderCanvas(enabledElement, image);\n  }\n\n  // Get the lut to use\n  let start = now();\n\n  if (!enabledElement.renderingTools.colorLut || invalidated ||\n       enabledElement.renderingTools.colormapId !== colormapId) {\n    colormap.setNumberOfColors(256);\n    enabledElement.renderingTools.colorLut = colormap.createLookupTable();\n    enabledElement.renderingTools.colormapId = colormapId;\n  }\n\n  const lut = getLut(image, enabledElement.viewport, invalidated);\n\n  image.stats = image.stats || {};\n  image.stats.lastLutGenerateTime = now() - start;\n\n  const colorLut = enabledElement.renderingTools.colorLut;\n  const renderCanvasData = enabledElement.renderingTools.renderCanvasData;\n  const renderCanvasContext = enabledElement.renderingTools.renderCanvasContext;\n\n  storedPixelDataToCanvasImageDataPseudocolorLUT(image, lut, colorLut, renderCanvasData.data);\n\n  start = now();\n  renderCanvasContext.putImageData(renderCanvasData, 0, 0);\n  image.stats.lastPutImageDataTime = now() - start;\n\n  return renderCanvas;\n}\n\n/**\n * API function to draw a pseudo-color image to a given enabledElement\n *\n * @param {EnabledElement} enabledElement The Cornerstone Enabled Element to redraw\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n */\nexport function renderPseudoColorImage (enabledElement, invalidated) {\n  if (enabledElement === undefined) {\n    throw new Error('drawImage: enabledElement parameter must not be undefined');\n  }\n\n  const image = enabledElement.image;\n\n  if (image === undefined) {\n    throw new Error('drawImage: image must be loaded before it can be drawn');\n  }\n\n  // Get the canvas context and reset the transform\n  const context = enabledElement.canvas.getContext('2d');\n\n  context.setTransform(1, 0, 0, 1, 0, 0);\n\n  // Clear the canvas\n  context.fillStyle = 'black';\n  context.fillRect(0, 0, enabledElement.canvas.width, enabledElement.canvas.height);\n\n  // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n  context.imageSmoothingEnabled = !enabledElement.viewport.pixelReplication;\n  context.mozImageSmoothingEnabled = context.imageSmoothingEnabled;\n\n  // Save the canvas context state and apply the viewport properties\n  setToPixelCoordinateSystem(enabledElement, context);\n\n\n  // If no options are set we will retrieve the renderCanvas through the\n  // Normal Canvas rendering path\n  // TODO: Add WebGL support for pseudocolor pipeline\n  const renderCanvas = getRenderCanvas(enabledElement, image, invalidated);\n  const { width, height } = image;\n\n  context.drawImage(renderCanvas, 0, 0, width, height, 0, 0, width, height);\n\n  enabledElement.renderingTools = saveLastRendered(enabledElement);\n}\n\n/**\n * API function to draw a pseudo-color image to a given layer\n *\n * @param {EnabledElementLayer} layer The layer that the image will be added to\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n */\nexport function addPseudoColorLayer (layer, invalidated) {\n  if (layer === undefined) {\n    throw new Error('addPseudoColorLayer: layer parameter must not be undefined');\n  }\n\n  const image = layer.image;\n\n  if (image === undefined) {\n    throw new Error('addPseudoColorLayer: image must be loaded before it can be drawn');\n  }\n\n  layer.canvas = getRenderCanvas(layer, image, invalidated);\n\n  const context = layer.canvas.getContext('2d');\n\n  // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n  context.imageSmoothingEnabled = !layer.viewport.pixelReplication;\n  context.mozImageSmoothingEnabled = context.imageSmoothingEnabled;\n\n  layer.renderingTools = saveLastRendered(layer);\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./rendering/renderPseudoColorImage.js","import guid from './internal/guid.js';\nimport { getEnabledElement } from './enabledElements.js';\nimport getDefaultViewport from './internal/getDefaultViewport.js';\nimport updateImage from './updateImage.js';\nimport triggerCustomEvent from './triggerEvent.js';\n\n/**\n * Helper function to trigger an event on a Cornerstone element with\n * a specific layerId\n *\n * @param {String} eventName The event name (e.g. CornerstoneLayerAdded)\n * @param {EnabledElement} enabledElement The Cornerstone enabled element\n * @param {String} layerId The layer's unique identifier\n * @returns {void}\n */\nfunction triggerEvent (eventName, enabledElement, layerId) {\n  const element = enabledElement.element;\n  const eventData = {\n    viewport: enabledElement.viewport,\n    element: enabledElement.element,\n    image: enabledElement.image,\n    enabledElement,\n    layerId\n  };\n\n  triggerCustomEvent(element, eventName, eventData);\n}\n\n/**\n * Rescale the target layer to the base layer based on the\n * relative size of each image and their pixel dimensions.\n *\n * This function will update the Viewport parameters of the\n * target layer to a new scale.\n *\n * @param {EnabledElementLayer} baseLayer The base layer\n * @param {EnabledElementLayer} targetLayer The target layer to rescale\n * @returns {void}\n */\nexport function rescaleImage (baseLayer, targetLayer) {\n  if (baseLayer.layerId === targetLayer.layerId) {\n    throw new Error('rescaleImage: both arguments represent the same layer');\n  }\n\n  const baseImage = baseLayer.image;\n  const targetImage = targetLayer.image;\n\n  // Return if these images don't have an imageId (e.g. for dynamic images)\n  if (!baseImage.imageId || !targetImage.imageId) {\n    return;\n  }\n\n  // Column pixel spacing need to be considered when calculating the\n  // ratio between the layer added and base layer images\n  const colRelative = (targetImage.columnPixelSpacing * targetImage.width) /\n                      (baseImage.columnPixelSpacing * baseImage.width);\n  const viewportRatio = targetLayer.viewport.scale / baseLayer.viewport.scale * colRelative;\n\n  targetLayer.viewport.scale = baseLayer.viewport.scale * viewportRatio;\n}\n\n/**\n * Add a layer to a Cornerstone element\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @param {Image} image A Cornerstone Image object to add as a new layer\n * @param {Object} options Options for the layer\n *\n * @returns {String} layerId The new layer's unique identifier\n */\nexport function addLayer (element, image, options) {\n  const layerId = guid();\n  const enabledElement = getEnabledElement(element);\n  const layers = enabledElement.layers;\n  let viewport;\n\n  if (image) {\n    viewport = getDefaultViewport(enabledElement.canvas, image);\n\n    // Override the defaults if any optional viewport settings\n    // have been specified\n    if (options && options.viewport) {\n      viewport = Object.assign(viewport, options.viewport);\n    }\n  }\n\n  // Set syncViewports to true by default when a new layer is added\n  if (enabledElement.syncViewports !== false) {\n    enabledElement.syncViewports = true;\n  }\n\n  const newLayer = {\n    image,\n    layerId,\n    viewport,\n    options: options || {},\n    renderingTools: {}\n  };\n\n  // Rescale the new layer based on the base layer to make sure\n  // they will have a proportional size (pixel spacing)\n  if (layers.length && image) {\n    rescaleImage(layers[0], newLayer);\n  }\n\n  layers.push(newLayer);\n\n  triggerEvent('CornerstoneLayerAdded', enabledElement, layerId);\n\n  // Set the layer as active if it's the first layer added\n  if (layers.length === 1 && image) {\n    setActiveLayer(element, layerId);\n  }\n\n  return layerId;\n}\n\n/**\n * Remove a layer from a Cornerstone element given a layer ID\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @param {String} layerId The unique identifier for the layer\n * @returns {void}\n */\nexport function removeLayer (element, layerId) {\n  const enabledElement = getEnabledElement(element);\n  const layers = enabledElement.layers;\n  const index = enabledElement.layers.findIndex((layer) => layer.layerId === layerId);\n\n  if (index !== -1) {\n    layers.splice(index, 1);\n\n    // If the current layer is active, and we have other layers,\n    // switch to the first layer that remains in the array\n    if (layerId === enabledElement.activeLayerId && layers.length) {\n      setActiveLayer(element, layers[0].layerId);\n    }\n\n    triggerEvent('CornerstoneLayerRemoved', enabledElement, layerId);\n  }\n}\n\n/**\n * Retrieve a layer from a Cornerstone element given a layer ID\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @param {String} layerId The unique identifier for the layer\n * @return {EnabledElementLayer} The layer\n */\nexport function getLayer (element, layerId) {\n  const enabledElement = getEnabledElement(element);\n\n\n  return enabledElement.layers.find((layer) => layer.layerId === layerId);\n}\n\n/**\n * Retrieve all layers for a Cornerstone element\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n *\n * @return {EnabledElementLayer[]} An array of layers\n */\nexport function getLayers (element) {\n  const enabledElement = getEnabledElement(element);\n\n\n  return enabledElement.layers;\n}\n\n/**\n * Retrieve all visible layers for a Cornerstone element\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n *\n * @return {EnabledElementLayer[]} An array of layers\n */\nexport function getVisibleLayers (element) {\n  const enabledElement = getEnabledElement(element);\n\n  return enabledElement.layers.filter((layer) => layer.options &&\n               layer.options.visible !== false &&\n               layer.options.opacity !== 0);\n}\n\n/**\n * Set the active layer for a Cornerstone element\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @param {String} layerId The unique identifier for the layer\n * @returns {void}\n */\nexport function setActiveLayer (element, layerId) {\n  const enabledElement = getEnabledElement(element);\n\n  // Stop here if this layer is already active\n  if (enabledElement.activeLayerId === layerId) {\n    return;\n  }\n\n  const index = enabledElement.layers.findIndex((layer) => layer.layerId === layerId);\n\n  if (index === -1) {\n    throw new Error('setActiveLayer: layer not found in layers array');\n  }\n\n  const layer = enabledElement.layers[index];\n\n  if (!layer.image) {\n    throw new Error('setActiveLayer: layer with undefined image cannot be set as active.');\n  }\n\n  enabledElement.activeLayerId = layerId;\n  enabledElement.image = layer.image;\n  enabledElement.viewport = layer.viewport;\n\n  updateImage(element);\n  triggerEvent('CornerstoneActiveLayerChanged', enabledElement, layerId);\n}\n\n/**\n * Set a new image for a specific layerId\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @param {Image} image The image to be displayed in this layer\n * @param {String} [layerId] The unique identifier for the layer\n * @returns {void}\n */\nexport function setLayerImage (element, image, layerId) {\n  const enabledElement = getEnabledElement(element);\n  const baseLayer = enabledElement.layers[0];\n\n  let layer;\n\n  if (layerId) {\n    layer = getLayer(element, layerId);\n  } else {\n    layer = getActiveLayer(element);\n  }\n\n  if (!layer) {\n    throw new Error('setLayerImage: Layer not found');\n  }\n\n  layer.image = image;\n\n  if (!image) {\n    layer.viewport = undefined;\n\n    return;\n  }\n\n  if (!layer.viewport) {\n    const defaultViewport = getDefaultViewport(enabledElement);\n\n    // Override the defaults if any optional viewport settings\n    // have been specified\n    if (layer.options && layer.options.viewport) {\n      layer.viewport = Object.assign(defaultViewport, layer.options.viewport);\n    }\n\n    if (baseLayer.layerId !== layerId) {\n      rescaleImage(baseLayer, layer);\n    }\n  }\n}\n\n/**\n * Retrieve the currently active layer for a Cornerstone element\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @return {EnabledElementLayer} The currently active layer\n */\nexport function getActiveLayer (element) {\n  const enabledElement = getEnabledElement(element);\n\n\n  return enabledElement.layers.find((layer) => layer.layerId === enabledElement.activeLayerId);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./layers.js","/**\n * Generates a linear modality transformation function\n *\n * See DICOM PS3.3 C.11.1 Modality LUT Module\n *\n * http://dicom.nema.org/medical/Dicom/current/output/chtml/part03/sect_C.11.html\n *\n * @param {Number} slope m in the equation specified by Rescale Intercept (0028,1052).\n * @param {Number} intercept The value b in relationship between stored values (SV) and the output units specified in Rescale Type (0028,1054).\n\n Output units = m*SV + b.\n * @return {function(*): *} A linear modality LUT function. Given a stored pixel it returns the modality pixel value\n */\nfunction generateLinearModalityLUT (slope, intercept) {\n  return (storedPixelValue) => storedPixelValue * slope + intercept;\n}\n\nfunction generateNonLinearModalityLUT (modalityLUT) {\n  const minValue = modalityLUT.lut[0];\n  const maxValue = modalityLUT.lut[modalityLUT.lut.length - 1];\n  const maxValueMapped = modalityLUT.firstValueMapped + modalityLUT.lut.length;\n\n  return (storedPixelValue) => {\n    if (storedPixelValue < modalityLUT.firstValueMapped) {\n      return minValue;\n    } else if (storedPixelValue >= maxValueMapped) {\n      return maxValue;\n    }\n\n    return modalityLUT.lut[storedPixelValue];\n  };\n}\n\n/**\n * Get the appropriate Modality LUT for the current situation.\n *\n * @param {Number} [slope] m in the equation specified by Rescale Intercept (0028,1052).\n * @param {Number} [intercept] The value b in relationship between stored values (SV) and the output units specified in Rescale Type (0028,1054).\n * @param {Function} [modalityLUT] A modality LUT function. Given a stored pixel it returns the modality pixel value.\n *\n * @return {function(*): *} A modality LUT function. Given a stored pixel it returns the modality pixel value.\n */\nexport default function (slope, intercept, modalityLUT) {\n  if (modalityLUT) {\n    return generateNonLinearModalityLUT(modalityLUT);\n  }\n\n  return generateLinearModalityLUT(slope, intercept);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./internal/getModalityLUT.js","import LookupTable from './lookupTable.js';\n\nconst COLOR_TRANSPARENT = [0, 0, 0, 0];\n\n// Colormaps\n//\n// Hot Iron, PET, Hot Metal Blue and PET 20 Step are color palattes\n// Defined by the DICOM standard\n// http://dicom.nema.org/dicom/2013/output/chtml/part06/chapter_B.html\n//\n// All Linear Segmented Colormaps were copied from matplotlib\n// https://github.com/stefanv/matplotlib/blob/master/lib/matplotlib/_cm.py\n\nconst colormapsData = {\n  hotIron: {\n    name: 'Hot Iron',\n    numOfColors: 256,\n    colors: [\n      [0, 0, 0, 255], [2, 0, 0, 255], [4, 0, 0, 255], [6, 0, 0, 255], [8, 0, 0, 255],\n      [10, 0, 0, 255], [12, 0, 0, 255], [14, 0, 0, 255], [16, 0, 0, 255], [18, 0, 0, 255],\n      [20, 0, 0, 255], [22, 0, 0, 255], [24, 0, 0, 255], [26, 0, 0, 255], [28, 0, 0, 255],\n      [30, 0, 0, 255], [32, 0, 0, 255], [34, 0, 0, 255], [36, 0, 0, 255], [38, 0, 0, 255],\n      [40, 0, 0, 255], [42, 0, 0, 255], [44, 0, 0, 255], [46, 0, 0, 255], [48, 0, 0, 255],\n      [50, 0, 0, 255], [52, 0, 0, 255], [54, 0, 0, 255], [56, 0, 0, 255], [58, 0, 0, 255],\n      [60, 0, 0, 255], [62, 0, 0, 255], [64, 0, 0, 255], [66, 0, 0, 255], [68, 0, 0, 255],\n      [70, 0, 0, 255], [72, 0, 0, 255], [74, 0, 0, 255], [76, 0, 0, 255], [78, 0, 0, 255],\n      [80, 0, 0, 255], [82, 0, 0, 255], [84, 0, 0, 255], [86, 0, 0, 255], [88, 0, 0, 255],\n      [90, 0, 0, 255], [92, 0, 0, 255], [94, 0, 0, 255], [96, 0, 0, 255], [98, 0, 0, 255],\n      [100, 0, 0, 255], [102, 0, 0, 255], [104, 0, 0, 255], [106, 0, 0, 255], [108, 0, 0, 255],\n      [110, 0, 0, 255], [112, 0, 0, 255], [114, 0, 0, 255], [116, 0, 0, 255], [118, 0, 0, 255],\n      [120, 0, 0, 255], [122, 0, 0, 255], [124, 0, 0, 255], [126, 0, 0, 255], [128, 0, 0, 255],\n      [130, 0, 0, 255], [132, 0, 0, 255], [134, 0, 0, 255], [136, 0, 0, 255], [138, 0, 0, 255],\n      [140, 0, 0, 255], [142, 0, 0, 255], [144, 0, 0, 255], [146, 0, 0, 255], [148, 0, 0, 255],\n      [150, 0, 0, 255], [152, 0, 0, 255], [154, 0, 0, 255], [156, 0, 0, 255], [158, 0, 0, 255],\n      [160, 0, 0, 255], [162, 0, 0, 255], [164, 0, 0, 255], [166, 0, 0, 255], [168, 0, 0, 255],\n      [170, 0, 0, 255], [172, 0, 0, 255], [174, 0, 0, 255], [176, 0, 0, 255], [178, 0, 0, 255],\n      [180, 0, 0, 255], [182, 0, 0, 255], [184, 0, 0, 255], [186, 0, 0, 255], [188, 0, 0, 255],\n      [190, 0, 0, 255], [192, 0, 0, 255], [194, 0, 0, 255], [196, 0, 0, 255], [198, 0, 0, 255],\n      [200, 0, 0, 255], [202, 0, 0, 255], [204, 0, 0, 255], [206, 0, 0, 255], [208, 0, 0, 255],\n      [210, 0, 0, 255], [212, 0, 0, 255], [214, 0, 0, 255], [216, 0, 0, 255], [218, 0, 0, 255],\n      [220, 0, 0, 255], [222, 0, 0, 255], [224, 0, 0, 255], [226, 0, 0, 255], [228, 0, 0, 255],\n      [230, 0, 0, 255], [232, 0, 0, 255], [234, 0, 0, 255], [236, 0, 0, 255], [238, 0, 0, 255],\n      [240, 0, 0, 255], [242, 0, 0, 255], [244, 0, 0, 255], [246, 0, 0, 255], [248, 0, 0, 255],\n      [250, 0, 0, 255], [252, 0, 0, 255], [254, 0, 0, 255], [255, 0, 0, 255], [255, 2, 0, 255],\n      [255, 4, 0, 255], [255, 6, 0, 255], [255, 8, 0, 255], [255, 10, 0, 255], [255, 12, 0, 255],\n      [255, 14, 0, 255], [255, 16, 0, 255], [255, 18, 0, 255], [255, 20, 0, 255], [255, 22, 0, 255],\n      [255, 24, 0, 255], [255, 26, 0, 255], [255, 28, 0, 255], [255, 30, 0, 255], [255, 32, 0, 255],\n      [255, 34, 0, 255], [255, 36, 0, 255], [255, 38, 0, 255], [255, 40, 0, 255], [255, 42, 0, 255],\n      [255, 44, 0, 255], [255, 46, 0, 255], [255, 48, 0, 255], [255, 50, 0, 255], [255, 52, 0, 255],\n      [255, 54, 0, 255], [255, 56, 0, 255], [255, 58, 0, 255], [255, 60, 0, 255], [255, 62, 0, 255],\n      [255, 64, 0, 255], [255, 66, 0, 255], [255, 68, 0, 255], [255, 70, 0, 255], [255, 72, 0, 255],\n      [255, 74, 0, 255], [255, 76, 0, 255], [255, 78, 0, 255], [255, 80, 0, 255], [255, 82, 0, 255],\n      [255, 84, 0, 255], [255, 86, 0, 255], [255, 88, 0, 255], [255, 90, 0, 255], [255, 92, 0, 255],\n      [255, 94, 0, 255], [255, 96, 0, 255], [255, 98, 0, 255], [255, 100, 0, 255], [255, 102, 0, 255],\n      [255, 104, 0, 255], [255, 106, 0, 255], [255, 108, 0, 255], [255, 110, 0, 255], [255, 112, 0, 255],\n      [255, 114, 0, 255], [255, 116, 0, 255], [255, 118, 0, 255], [255, 120, 0, 255], [255, 122, 0, 255],\n      [255, 124, 0, 255], [255, 126, 0, 255], [255, 128, 4, 255], [255, 130, 8, 255], [255, 132, 12, 255],\n      [255, 134, 16, 255], [255, 136, 20, 255], [255, 138, 24, 255], [255, 140, 28, 255], [255, 142, 32, 255],\n      [255, 144, 36, 255], [255, 146, 40, 255], [255, 148, 44, 255], [255, 150, 48, 255], [255, 152, 52, 255],\n      [255, 154, 56, 255], [255, 156, 60, 255], [255, 158, 64, 255], [255, 160, 68, 255], [255, 162, 72, 255],\n      [255, 164, 76, 255], [255, 166, 80, 255], [255, 168, 84, 255], [255, 170, 88, 255], [255, 172, 92, 255],\n      [255, 174, 96, 255], [255, 176, 100, 255], [255, 178, 104, 255], [255, 180, 108, 255], [255, 182, 112, 255],\n      [255, 184, 116, 255], [255, 186, 120, 255], [255, 188, 124, 255], [255, 190, 128, 255], [255, 192, 132, 255],\n      [255, 194, 136, 255], [255, 196, 140, 255], [255, 198, 144, 255], [255, 200, 148, 255], [255, 202, 152, 255],\n      [255, 204, 156, 255], [255, 206, 160, 255], [255, 208, 164, 255], [255, 210, 168, 255], [255, 212, 172, 255],\n      [255, 214, 176, 255], [255, 216, 180, 255], [255, 218, 184, 255], [255, 220, 188, 255], [255, 222, 192, 255],\n      [255, 224, 196, 255], [255, 226, 200, 255], [255, 228, 204, 255], [255, 230, 208, 255], [255, 232, 212, 255],\n      [255, 234, 216, 255], [255, 236, 220, 255], [255, 238, 224, 255], [255, 240, 228, 255], [255, 242, 232, 255],\n      [255, 244, 236, 255], [255, 246, 240, 255], [255, 248, 244, 255], [255, 250, 248, 255], [255, 252, 252, 255],\n      [255, 255, 255, 255]\n    ]\n  },\n  pet: {\n    name: 'PET',\n    numColors: 256,\n    colors: [\n      [0, 0, 0, 255], [0, 2, 1, 255], [0, 4, 3, 255], [0, 6, 5, 255], [0, 8, 7, 255],\n      [0, 10, 9, 255], [0, 12, 11, 255], [0, 14, 13, 255], [0, 16, 15, 255], [0, 18, 17, 255],\n      [0, 20, 19, 255], [0, 22, 21, 255], [0, 24, 23, 255], [0, 26, 25, 255], [0, 28, 27, 255],\n      [0, 30, 29, 255], [0, 32, 31, 255], [0, 34, 33, 255], [0, 36, 35, 255], [0, 38, 37, 255],\n      [0, 40, 39, 255], [0, 42, 41, 255], [0, 44, 43, 255], [0, 46, 45, 255], [0, 48, 47, 255],\n      [0, 50, 49, 255], [0, 52, 51, 255], [0, 54, 53, 255], [0, 56, 55, 255], [0, 58, 57, 255],\n      [0, 60, 59, 255], [0, 62, 61, 255], [0, 65, 63, 255], [0, 67, 65, 255], [0, 69, 67, 255],\n      [0, 71, 69, 255], [0, 73, 71, 255], [0, 75, 73, 255], [0, 77, 75, 255], [0, 79, 77, 255],\n      [0, 81, 79, 255], [0, 83, 81, 255], [0, 85, 83, 255], [0, 87, 85, 255], [0, 89, 87, 255],\n      [0, 91, 89, 255], [0, 93, 91, 255], [0, 95, 93, 255], [0, 97, 95, 255], [0, 99, 97, 255],\n      [0, 101, 99, 255], [0, 103, 101, 255], [0, 105, 103, 255], [0, 107, 105, 255], [0, 109, 107, 255],\n      [0, 111, 109, 255], [0, 113, 111, 255], [0, 115, 113, 255], [0, 117, 115, 255], [0, 119, 117, 255],\n      [0, 121, 119, 255], [0, 123, 121, 255], [0, 125, 123, 255], [0, 128, 125, 255], [1, 126, 127, 255],\n      [3, 124, 129, 255], [5, 122, 131, 255], [7, 120, 133, 255], [9, 118, 135, 255], [11, 116, 137, 255],\n      [13, 114, 139, 255], [15, 112, 141, 255], [17, 110, 143, 255], [19, 108, 145, 255], [21, 106, 147, 255],\n      [23, 104, 149, 255], [25, 102, 151, 255], [27, 100, 153, 255], [29, 98, 155, 255], [31, 96, 157, 255],\n      [33, 94, 159, 255], [35, 92, 161, 255], [37, 90, 163, 255], [39, 88, 165, 255], [41, 86, 167, 255],\n      [43, 84, 169, 255], [45, 82, 171, 255], [47, 80, 173, 255], [49, 78, 175, 255], [51, 76, 177, 255],\n      [53, 74, 179, 255], [55, 72, 181, 255], [57, 70, 183, 255], [59, 68, 185, 255], [61, 66, 187, 255],\n      [63, 64, 189, 255], [65, 63, 191, 255], [67, 61, 193, 255], [69, 59, 195, 255], [71, 57, 197, 255],\n      [73, 55, 199, 255], [75, 53, 201, 255], [77, 51, 203, 255], [79, 49, 205, 255], [81, 47, 207, 255],\n      [83, 45, 209, 255], [85, 43, 211, 255], [86, 41, 213, 255], [88, 39, 215, 255], [90, 37, 217, 255],\n      [92, 35, 219, 255], [94, 33, 221, 255], [96, 31, 223, 255], [98, 29, 225, 255], [100, 27, 227, 255],\n      [102, 25, 229, 255], [104, 23, 231, 255], [106, 21, 233, 255], [108, 19, 235, 255], [110, 17, 237, 255],\n      [112, 15, 239, 255], [114, 13, 241, 255], [116, 11, 243, 255], [118, 9, 245, 255], [120, 7, 247, 255],\n      [122, 5, 249, 255], [124, 3, 251, 255], [126, 1, 253, 255], [128, 0, 255, 255], [130, 2, 252, 255],\n      [132, 4, 248, 255], [134, 6, 244, 255], [136, 8, 240, 255], [138, 10, 236, 255], [140, 12, 232, 255],\n      [142, 14, 228, 255], [144, 16, 224, 255], [146, 18, 220, 255], [148, 20, 216, 255], [150, 22, 212, 255],\n      [152, 24, 208, 255], [154, 26, 204, 255], [156, 28, 200, 255], [158, 30, 196, 255], [160, 32, 192, 255],\n      [162, 34, 188, 255], [164, 36, 184, 255], [166, 38, 180, 255], [168, 40, 176, 255], [170, 42, 172, 255],\n      [171, 44, 168, 255], [173, 46, 164, 255], [175, 48, 160, 255], [177, 50, 156, 255], [179, 52, 152, 255],\n      [181, 54, 148, 255], [183, 56, 144, 255], [185, 58, 140, 255], [187, 60, 136, 255], [189, 62, 132, 255],\n      [191, 64, 128, 255], [193, 66, 124, 255], [195, 68, 120, 255], [197, 70, 116, 255], [199, 72, 112, 255],\n      [201, 74, 108, 255], [203, 76, 104, 255], [205, 78, 100, 255], [207, 80, 96, 255], [209, 82, 92, 255],\n      [211, 84, 88, 255], [213, 86, 84, 255], [215, 88, 80, 255], [217, 90, 76, 255], [219, 92, 72, 255],\n      [221, 94, 68, 255], [223, 96, 64, 255], [225, 98, 60, 255], [227, 100, 56, 255], [229, 102, 52, 255],\n      [231, 104, 48, 255], [233, 106, 44, 255], [235, 108, 40, 255], [237, 110, 36, 255], [239, 112, 32, 255],\n      [241, 114, 28, 255], [243, 116, 24, 255], [245, 118, 20, 255], [247, 120, 16, 255], [249, 122, 12, 255],\n      [251, 124, 8, 255], [253, 126, 4, 255], [255, 128, 0, 255], [255, 130, 4, 255], [255, 132, 8, 255],\n      [255, 134, 12, 255], [255, 136, 16, 255], [255, 138, 20, 255], [255, 140, 24, 255], [255, 142, 28, 255],\n      [255, 144, 32, 255], [255, 146, 36, 255], [255, 148, 40, 255], [255, 150, 44, 255], [255, 152, 48, 255],\n      [255, 154, 52, 255], [255, 156, 56, 255], [255, 158, 60, 255], [255, 160, 64, 255], [255, 162, 68, 255],\n      [255, 164, 72, 255], [255, 166, 76, 255], [255, 168, 80, 255], [255, 170, 85, 255], [255, 172, 89, 255],\n      [255, 174, 93, 255], [255, 176, 97, 255], [255, 178, 101, 255], [255, 180, 105, 255], [255, 182, 109, 255],\n      [255, 184, 113, 255], [255, 186, 117, 255], [255, 188, 121, 255], [255, 190, 125, 255], [255, 192, 129, 255],\n      [255, 194, 133, 255], [255, 196, 137, 255], [255, 198, 141, 255], [255, 200, 145, 255], [255, 202, 149, 255],\n      [255, 204, 153, 255], [255, 206, 157, 255], [255, 208, 161, 255], [255, 210, 165, 255], [255, 212, 170, 255],\n      [255, 214, 174, 255], [255, 216, 178, 255], [255, 218, 182, 255], [255, 220, 186, 255], [255, 222, 190, 255],\n      [255, 224, 194, 255], [255, 226, 198, 255], [255, 228, 202, 255], [255, 230, 206, 255], [255, 232, 210, 255],\n      [255, 234, 214, 255], [255, 236, 218, 255], [255, 238, 222, 255], [255, 240, 226, 255], [255, 242, 230, 255],\n      [255, 244, 234, 255], [255, 246, 238, 255], [255, 248, 242, 255], [255, 250, 246, 255], [255, 252, 250, 255],\n      [255, 255, 255, 255]\n    ]\n  },\n  hotMetalBlue: {\n    name: 'Hot Metal Blue',\n    numColors: 256,\n    colors: [\n      [0, 0, 0, 255], [0, 0, 2, 255], [0, 0, 4, 255], [0, 0, 6, 255], [0, 0, 8, 255],\n      [0, 0, 10, 255], [0, 0, 12, 255], [0, 0, 14, 255], [0, 0, 16, 255], [0, 0, 17, 255],\n      [0, 0, 19, 255], [0, 0, 21, 255], [0, 0, 23, 255], [0, 0, 25, 255], [0, 0, 27, 255],\n      [0, 0, 29, 255], [0, 0, 31, 255], [0, 0, 33, 255], [0, 0, 35, 255], [0, 0, 37, 255],\n      [0, 0, 39, 255], [0, 0, 41, 255], [0, 0, 43, 255], [0, 0, 45, 255], [0, 0, 47, 255],\n      [0, 0, 49, 255], [0, 0, 51, 255], [0, 0, 53, 255], [0, 0, 55, 255], [0, 0, 57, 255],\n      [0, 0, 59, 255], [0, 0, 61, 255], [0, 0, 63, 255], [0, 0, 65, 255], [0, 0, 67, 255],\n      [0, 0, 69, 255], [0, 0, 71, 255], [0, 0, 73, 255], [0, 0, 75, 255], [0, 0, 77, 255],\n      [0, 0, 79, 255], [0, 0, 81, 255], [0, 0, 83, 255], [0, 0, 84, 255], [0, 0, 86, 255],\n      [0, 0, 88, 255], [0, 0, 90, 255], [0, 0, 92, 255], [0, 0, 94, 255], [0, 0, 96, 255],\n      [0, 0, 98, 255], [0, 0, 100, 255], [0, 0, 102, 255], [0, 0, 104, 255], [0, 0, 106, 255],\n      [0, 0, 108, 255], [0, 0, 110, 255], [0, 0, 112, 255], [0, 0, 114, 255], [0, 0, 116, 255],\n      [0, 0, 117, 255], [0, 0, 119, 255], [0, 0, 121, 255], [0, 0, 123, 255], [0, 0, 125, 255],\n      [0, 0, 127, 255], [0, 0, 129, 255], [0, 0, 131, 255], [0, 0, 133, 255], [0, 0, 135, 255],\n      [0, 0, 137, 255], [0, 0, 139, 255], [0, 0, 141, 255], [0, 0, 143, 255], [0, 0, 145, 255],\n      [0, 0, 147, 255], [0, 0, 149, 255], [0, 0, 151, 255], [0, 0, 153, 255], [0, 0, 155, 255],\n      [0, 0, 157, 255], [0, 0, 159, 255], [0, 0, 161, 255], [0, 0, 163, 255], [0, 0, 165, 255],\n      [0, 0, 167, 255], [3, 0, 169, 255], [6, 0, 171, 255], [9, 0, 173, 255], [12, 0, 175, 255],\n      [15, 0, 177, 255], [18, 0, 179, 255], [21, 0, 181, 255], [24, 0, 183, 255], [26, 0, 184, 255],\n      [29, 0, 186, 255], [32, 0, 188, 255], [35, 0, 190, 255], [38, 0, 192, 255], [41, 0, 194, 255],\n      [44, 0, 196, 255], [47, 0, 198, 255], [50, 0, 200, 255], [52, 0, 197, 255], [55, 0, 194, 255],\n      [57, 0, 191, 255], [59, 0, 188, 255], [62, 0, 185, 255], [64, 0, 182, 255], [66, 0, 179, 255],\n      [69, 0, 176, 255], [71, 0, 174, 255], [74, 0, 171, 255], [76, 0, 168, 255], [78, 0, 165, 255],\n      [81, 0, 162, 255], [83, 0, 159, 255], [85, 0, 156, 255], [88, 0, 153, 255], [90, 0, 150, 255],\n      [93, 2, 144, 255], [96, 4, 138, 255], [99, 6, 132, 255], [102, 8, 126, 255], [105, 9, 121, 255],\n      [108, 11, 115, 255], [111, 13, 109, 255], [114, 15, 103, 255], [116, 17, 97, 255], [119, 19, 91, 255],\n      [122, 21, 85, 255], [125, 23, 79, 255], [128, 24, 74, 255], [131, 26, 68, 255], [134, 28, 62, 255],\n      [137, 30, 56, 255], [140, 32, 50, 255], [143, 34, 47, 255], [146, 36, 44, 255], [149, 38, 41, 255],\n      [152, 40, 38, 255], [155, 41, 35, 255], [158, 43, 32, 255], [161, 45, 29, 255], [164, 47, 26, 255],\n      [166, 49, 24, 255], [169, 51, 21, 255], [172, 53, 18, 255], [175, 55, 15, 255], [178, 56, 12, 255],\n      [181, 58, 9, 255], [184, 60, 6, 255], [187, 62, 3, 255], [190, 64, 0, 255], [194, 66, 0, 255],\n      [198, 68, 0, 255], [201, 70, 0, 255], [205, 72, 0, 255], [209, 73, 0, 255], [213, 75, 0, 255],\n      [217, 77, 0, 255], [221, 79, 0, 255], [224, 81, 0, 255], [228, 83, 0, 255], [232, 85, 0, 255],\n      [236, 87, 0, 255], [240, 88, 0, 255], [244, 90, 0, 255], [247, 92, 0, 255], [251, 94, 0, 255],\n      [255, 96, 0, 255], [255, 98, 3, 255], [255, 100, 6, 255], [255, 102, 9, 255], [255, 104, 12, 255],\n      [255, 105, 15, 255], [255, 107, 18, 255], [255, 109, 21, 255], [255, 111, 24, 255], [255, 113, 26, 255],\n      [255, 115, 29, 255], [255, 117, 32, 255], [255, 119, 35, 255], [255, 120, 38, 255], [255, 122, 41, 255],\n      [255, 124, 44, 255], [255, 126, 47, 255], [255, 128, 50, 255], [255, 130, 53, 255], [255, 132, 56, 255],\n      [255, 134, 59, 255], [255, 136, 62, 255], [255, 137, 65, 255], [255, 139, 68, 255], [255, 141, 71, 255],\n      [255, 143, 74, 255], [255, 145, 76, 255], [255, 147, 79, 255], [255, 149, 82, 255], [255, 151, 85, 255],\n      [255, 152, 88, 255], [255, 154, 91, 255], [255, 156, 94, 255], [255, 158, 97, 255], [255, 160, 100, 255],\n      [255, 162, 103, 255], [255, 164, 106, 255], [255, 166, 109, 255], [255, 168, 112, 255], [255, 169, 115, 255],\n      [255, 171, 118, 255], [255, 173, 121, 255], [255, 175, 124, 255], [255, 177, 126, 255], [255, 179, 129, 255],\n      [255, 181, 132, 255], [255, 183, 135, 255], [255, 184, 138, 255], [255, 186, 141, 255], [255, 188, 144, 255],\n      [255, 190, 147, 255], [255, 192, 150, 255], [255, 194, 153, 255], [255, 196, 156, 255], [255, 198, 159, 255],\n      [255, 200, 162, 255], [255, 201, 165, 255], [255, 203, 168, 255], [255, 205, 171, 255], [255, 207, 174, 255],\n      [255, 209, 176, 255], [255, 211, 179, 255], [255, 213, 182, 255], [255, 215, 185, 255], [255, 216, 188, 255],\n      [255, 218, 191, 255], [255, 220, 194, 255], [255, 222, 197, 255], [255, 224, 200, 255], [255, 226, 203, 255],\n      [255, 228, 206, 255], [255, 229, 210, 255], [255, 231, 213, 255], [255, 233, 216, 255], [255, 235, 219, 255],\n      [255, 237, 223, 255], [255, 239, 226, 255], [255, 240, 229, 255], [255, 242, 232, 255], [255, 244, 236, 255],\n      [255, 246, 239, 255], [255, 248, 242, 255], [255, 250, 245, 255], [255, 251, 249, 255], [255, 253, 252, 255],\n      [255, 255, 255, 255]\n    ]\n  },\n  pet20Step: {\n    name: 'PET 20 Step',\n    numColors: 256,\n    colors: [\n      [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255],\n      [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255],\n      [0, 0, 0, 255], [0, 0, 0, 255], [0, 0, 0, 255], [96, 0, 80, 255], [96, 0, 80, 255],\n      [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255],\n      [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255], [96, 0, 80, 255],\n      [96, 0, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255],\n      [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255],\n      [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 80, 255], [48, 48, 112, 255],\n      [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255],\n      [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255], [48, 48, 112, 255],\n      [48, 48, 112, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255],\n      [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255],\n      [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [80, 80, 128, 255], [96, 96, 176, 255],\n      [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255],\n      [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255], [96, 96, 176, 255],\n      [96, 96, 176, 255], [96, 96, 176, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255],\n      [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255],\n      [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255], [112, 112, 192, 255],\n      [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255],\n      [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255], [128, 128, 224, 255],\n      [128, 128, 224, 255], [128, 128, 224, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255],\n      [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255],\n      [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255], [48, 96, 48, 255],\n      [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255],\n      [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255],\n      [48, 144, 48, 255], [48, 144, 48, 255], [48, 144, 48, 255], [80, 192, 80, 255], [80, 192, 80, 255],\n      [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255],\n      [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255], [80, 192, 80, 255],\n      [80, 192, 80, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255],\n      [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255],\n      [64, 224, 64, 255], [64, 224, 64, 255], [64, 224, 64, 255], [224, 224, 80, 255], [224, 224, 80, 255],\n      [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255],\n      [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255], [224, 224, 80, 255],\n      [224, 224, 80, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255],\n      [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255],\n      [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 208, 96, 255], [208, 176, 64, 255],\n      [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255],\n      [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255], [208, 176, 64, 255],\n      [208, 176, 64, 255], [208, 176, 64, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255],\n      [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255],\n      [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [208, 144, 0, 255], [192, 96, 0, 255],\n      [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255],\n      [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255], [192, 96, 0, 255],\n      [192, 96, 0, 255], [192, 96, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255],\n      [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255],\n      [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255], [176, 48, 0, 255],\n      [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255],\n      [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255],\n      [255, 0, 0, 255], [255, 0, 0, 255], [255, 0, 0, 255], [255, 255, 255, 255], [255, 255, 255, 255],\n      [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255],\n      [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255], [255, 255, 255, 255],\n      [255, 255, 255, 255]\n    ]\n  },\n  gray: {\n    name: 'Gray',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0, 0], [1, 1, 1]],\n      green: [[0, 0, 0], [1, 1, 1]],\n      blue: [[0, 0, 0], [1, 1, 1]]\n    }\n  },\n  jet: {\n    name: 'Jet',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0, 0], [0.35, 0, 0], [0.66, 1, 1], [0.89, 1, 1], [1, 0.5, 0.5]],\n      green: [[0, 0, 0], [0.125, 0, 0], [0.375, 1, 1], [0.64, 1, 1], [0.91, 0, 0], [1, 0, 0]],\n      blue: [[0, 0.5, 0.5], [0.11, 1, 1], [0.34, 1, 1], [0.65, 0, 0], [1, 0, 0]]\n    }\n  },\n  hsv: {\n    name: 'HSV',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 1, 1], [0.158730, 1, 1], [0.174603, 0.968750, 0.968750],\n        [0.333333, 0.031250, 0.031250], [0.349206, 0, 0], [0.666667, 0, 0],\n        [0.682540, 0.031250, 0.031250], [0.841270, 0.968750, 0.968750],\n        [0.857143, 1, 1], [1, 1, 1]],\n      green: [[0, 0, 0], [0.158730, 0.937500, 0.937500], [0.174603, 1, 1],\n        [0.507937, 1, 1], [0.666667, 0.062500, 0.062500],\n        [0.682540, 0, 0], [1, 0, 0]],\n      blue: [[0, 0, 0], [0.333333, 0, 0], [0.349206, 0.062500, 0.062500],\n        [0.507937, 1, 1], [0.841270, 1, 1], [0.857143, 0.937500, 0.937500],\n        [1, 0.09375, 0.09375]]\n    }\n  },\n  hot: {\n    name: 'Hot',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0.0416, 0.0416], [0.365079, 1, 1], [1, 1, 1]],\n      green: [[0, 0, 0], [0.365079, 0, 0], [0.746032, 1, 1], [1, 1, 1]],\n      blue: [[0, 0, 0], [0.746032, 0, 0], [1, 1, 1]]\n    }\n  },\n  cool: {\n    name: 'Cool',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0, 0], [1, 1, 1]],\n      green: [[0, 1, 1], [1, 0, 0]],\n      blue: [[0, 1, 1], [1, 1, 1]]\n    }\n  },\n  spring: {\n    name: 'Spring',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 1, 1], [1, 1, 1]],\n      green: [[0, 0, 0], [1, 1, 1]],\n      blue: [[0, 1, 1], [1, 0, 0]]\n    }\n  },\n  summer: {\n    name: 'Summer',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0, 0], [1, 1, 1]],\n      green: [[0, 0.5, 0.5], [1, 1, 1]],\n      blue: [[0, 0.4, 0.4], [1, 0.4, 0.4]]\n    }\n  },\n  autumn: {\n    name: 'Autumn',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 1, 1], [1, 1, 1]],\n      green: [[0, 0, 0], [1, 1, 1]],\n      blue: [[0, 0, 0], [1, 0, 0]]\n    }\n  },\n  winter: {\n    name: 'Winter',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0, 0], [1, 0, 0]],\n      green: [[0, 0, 0], [1, 1, 1]],\n      blue: [[0, 1, 1], [1, 0.5, 0.5]]\n    }\n  },\n  bone: {\n    name: 'Bone',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0, 0], [0.746032, 0.652778, 0.652778], [1, 1, 1]],\n      green: [[0, 0, 0], [0.365079, 0.319444, 0.319444], [0.746032, 0.777778, 0.777778], [1, 1, 1]],\n      blue: [[0, 0, 0], [0.365079, 0.444444, 0.444444], [1, 1, 1]]\n    }\n  },\n  copper: {\n    name: 'Copper',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0, 0], [0.809524, 1, 1], [1, 1, 1]],\n      green: [[0, 0, 0], [1, 0.7812, 0.7812]],\n      blue: [[0, 0, 0], [1, 0.4975, 0.4975]]\n    }\n  },\n  spectral: {\n    name: 'Spectral',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0, 0], [0.05, 0.4667, 0.4667], [0.10, 0.5333, 0.5333], [0.15, 0, 0],\n        [0.20, 0, 0], [0.25, 0, 0], [0.30, 0, 0], [0.35, 0, 0],\n        [0.40, 0, 0], [0.45, 0, 0], [0.50, 0, 0], [0.55, 0, 0],\n        [0.60, 0, 0], [0.65, 0.7333, 0.7333], [0.70, 0.9333, 0.9333], [0.75, 1, 1],\n        [0.80, 1, 1], [0.85, 1, 1], [0.90, 0.8667, 0.8667], [0.95, 0.80, 0.80],\n        [1, 0.80, 0.80]],\n      green: [[0, 0, 0], [0.05, 0, 0], [0.10, 0, 0], [0.15, 0, 0],\n        [0.20, 0, 0], [0.25, 0.4667, 0.4667], [0.30, 0.6000, 0.6000],\n        [0.35, 0.6667, 0.6667], [0.40, 0.6667, 0.6667], [0.45, 0.6000, 0.6000],\n        [0.50, 0.7333, 0.7333], [0.55, 0.8667, 0.8667], [0.60, 1, 1], [0.65, 1, 1],\n        [0.70, 0.9333, 0.9333], [0.75, 0.8000, 0.8000],\n        [0.80, 0.6000, 0.6000], [0.85, 0, 0],\n        [0.90, 0, 0], [0.95, 0, 0], [1, 0.80, 0.80]],\n      blue: [[0, 0, 0], [0.05, 0.5333, 0.5333], [0.10, 0.6000, 0.6000], [0.15, 0.6667, 0.6667],\n        [0.20, 0.8667, 0.8667], [0.25, 0.8667, 0.8667], [0.30, 0.8667, 0.8667],\n        [0.35, 0.6667, 0.6667], [0.40, 0.5333, 0.5333], [0.45, 0, 0],\n        [0.5, 0, 0], [0.55, 0, 0], [0.60, 0, 0], [0.65, 0, 0], [0.70, 0, 0], [0.75, 0, 0],\n        [0.80, 0, 0], [0.85, 0, 0], [0.90, 0, 0], [0.95, 0, 0], [1, 0.80, 0.80]]\n    }\n  },\n  coolwarm: {\n    name: 'CoolWarm',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0.2298057, 0.2298057], [0.03125, 0.26623388, 0.26623388],\n        [0.0625, 0.30386891, 0.30386891], [0.09375, 0.342804478, 0.342804478],\n        [0.125, 0.38301334, 0.38301334], [0.15625, 0.424369608, 0.424369608],\n        [0.1875, 0.46666708, 0.46666708], [0.21875, 0.509635204, 0.509635204],\n        [0.25, 0.552953156, 0.552953156], [0.28125, 0.596262162, 0.596262162],\n        [0.3125, 0.639176211, 0.639176211], [0.34375, 0.681291281, 0.681291281],\n        [0.375, 0.722193294, 0.722193294], [0.40625, 0.761464949, 0.761464949],\n        [0.4375, 0.798691636, 0.798691636], [0.46875, 0.833466556, 0.833466556],\n        [0.5, 0.865395197, 0.865395197], [0.53125, 0.897787179, 0.897787179],\n        [0.5625, 0.924127593, 0.924127593], [0.59375, 0.944468518, 0.944468518],\n        [0.625, 0.958852946, 0.958852946], [0.65625, 0.96732803, 0.96732803],\n        [0.6875, 0.969954137, 0.969954137], [0.71875, 0.966811177, 0.966811177],\n        [0.75, 0.958003065, 0.958003065], [0.78125, 0.943660866, 0.943660866],\n        [0.8125, 0.923944917, 0.923944917], [0.84375, 0.89904617, 0.89904617],\n        [0.875, 0.869186849, 0.869186849], [0.90625, 0.834620542, 0.834620542],\n        [0.9375, 0.795631745, 0.795631745], [0.96875, 0.752534934, 0.752534934],\n        [1, 0.705673158, 0.705673158]],\n      green: [[0, 0.298717966, 0.298717966], [0.03125, 0.353094838, 0.353094838],\n        [0.0625, 0.406535296, 0.406535296], [0.09375, 0.458757618, 0.458757618],\n        [0.125, 0.50941904, 0.50941904], [0.15625, 0.558148092, 0.558148092],\n        [0.1875, 0.604562568, 0.604562568], [0.21875, 0.648280772, 0.648280772],\n        [0.25, 0.688929332, 0.688929332], [0.28125, 0.726149107, 0.726149107],\n        [0.3125, 0.759599947, 0.759599947], [0.34375, 0.788964712, 0.788964712],\n        [0.375, 0.813952739, 0.813952739], [0.40625, 0.834302879, 0.834302879],\n        [0.4375, 0.849786142, 0.849786142], [0.46875, 0.860207984, 0.860207984],\n        [0.5, 0.86541021, 0.86541021], [0.53125, 0.848937047, 0.848937047],\n        [0.5625, 0.827384882, 0.827384882], [0.59375, 0.800927443, 0.800927443],\n        [0.625, 0.769767752, 0.769767752], [0.65625, 0.734132809, 0.734132809],\n        [0.6875, 0.694266682, 0.694266682], [0.71875, 0.650421156, 0.650421156],\n        [0.75, 0.602842431, 0.602842431], [0.78125, 0.551750968, 0.551750968],\n        [0.8125, 0.49730856, 0.49730856], [0.84375, 0.439559467, 0.439559467],\n        [0.875, 0.378313092, 0.378313092], [0.90625, 0.312874446, 0.312874446],\n        [0.9375, 0.24128379, 0.24128379], [0.96875, 0.157246067, 0.157246067],\n        [1, 0.01555616, 0.01555616]],\n      blue: [[0, 0.753683153, 0.753683153], [0.03125, 0.801466763, 0.801466763],\n        [0.0625, 0.84495867, 0.84495867], [0.09375, 0.883725899, 0.883725899],\n        [0.125, 0.917387822, 0.917387822], [0.15625, 0.945619588, 0.945619588],\n        [0.1875, 0.968154911, 0.968154911], [0.21875, 0.98478814, 0.98478814],\n        [0.25, 0.995375608, 0.995375608], [0.28125, 0.999836203, 0.999836203],\n        [0.3125, 0.998151185, 0.998151185], [0.34375, 0.990363227, 0.990363227],\n        [0.375, 0.976574709, 0.976574709], [0.40625, 0.956945269, 0.956945269],\n        [0.4375, 0.931688648, 0.931688648], [0.46875, 0.901068838, 0.901068838],\n        [0.5, 0.865395561, 0.865395561], [0.53125, 0.820880546, 0.820880546],\n        [0.5625, 0.774508472, 0.774508472], [0.59375, 0.726736146, 0.726736146],\n        [0.625, 0.678007945, 0.678007945], [0.65625, 0.628751763, 0.628751763],\n        [0.6875, 0.579375448, 0.579375448], [0.71875, 0.530263762, 0.530263762],\n        [0.75, 0.481775914, 0.481775914], [0.78125, 0.434243684, 0.434243684],\n        [0.8125, 0.387970225, 0.387970225], [0.84375, 0.343229596, 0.343229596],\n        [0.875, 0.300267182, 0.300267182], [0.90625, 0.259301199, 0.259301199],\n        [0.9375, 0.220525627, 0.220525627], [0.96875, 0.184115123, 0.184115123],\n        [1, 0.150232812, 0.150232812]]\n    }\n  },\n  blues: {\n    name: 'Blues',\n    numColors: 256,\n    gamma: 1,\n    segmentedData: {\n      red: [[0, 0.9686274528503418, 0.9686274528503418], [0.125, 0.87058824300765991, 0.87058824300765991],\n        [0.25, 0.7764706015586853, 0.7764706015586853], [0.375, 0.61960786581039429, 0.61960786581039429],\n        [0.5, 0.41960784792900085, 0.41960784792900085], [0.625, 0.25882354378700256, 0.25882354378700256],\n        [0.75, 0.12941177189350128, 0.12941177189350128], [0.875, 0.031372550874948502, 0.031372550874948502],\n        [1, 0.031372550874948502, 0.031372550874948502]],\n      green: [[0, 0.9843137264251709, 0.9843137264251709], [0.125, 0.92156863212585449, 0.92156863212585449],\n        [0.25, 0.85882353782653809, 0.85882353782653809], [0.375, 0.7921568751335144, 0.7921568751335144],\n        [0.5, 0.68235296010971069, 0.68235296010971069], [0.625, 0.57254904508590698, 0.57254904508590698],\n        [0.75, 0.44313725829124451, 0.44313725829124451], [0.875, 0.31764706969261169, 0.31764706969261169],\n        [1, 0.18823529779911041, 0.18823529779911041]],\n      blue: [[0, 1, 1], [0.125, 0.9686274528503418, 0.9686274528503418], [0.25, 0.93725490570068359, 0.93725490570068359],\n        [0.375, 0.88235294818878174, 0.88235294818878174], [0.5, 0.83921569585800171, 0.83921569585800171],\n        [0.625, 0.7764706015586853, 0.7764706015586853], [0.75, 0.70980393886566162, 0.70980393886566162],\n        [0.875, 0.61176472902297974, 0.61176472902297974], [1, 0.41960784792900085, 0.41960784792900085]]\n    }\n  }\n};\n\n// Generate linearly spaced vectors\n// http://cens.ioc.ee/local/man/matlab/techdoc/ref/linspace.html\nfunction linspace (a, b, n) {\n  n = n === null ? 100 : n;\n\n  const increment = (b - a) / (n - 1);\n  const vector = [];\n\n  while (n-- > 0) {\n    vector.push(a);\n    a += increment;\n  }\n\n  // Make sure the last item will always be \"b\" because most of the\n  // Time we'll get numbers like 1.0000000000000002 instead of 1.\n  vector[vector.length - 1] = b;\n\n  return vector;\n}\n\n// Return the number of elements smaller than \"elem\" (binary search)\nfunction getRank (array, elem) {\n  let left = 0;\n  let right = array.length - 1;\n\n  while (left <= right) {\n    const mid = left + Math.floor((right - left) / 2);\n    const midElem = array[mid];\n\n    if (midElem === elem) {\n      return mid;\n    } else if (elem < midElem) {\n      right = mid - 1;\n    } else {\n      left = mid + 1;\n    }\n  }\n\n  return left;\n}\n\n// Find the indices into a sorted array a such that, if the corresponding elements\n// In v were inserted before the indices, the order of a would be preserved.\n// http://lagrange.univ-lyon1.fr/docs/numpy/1.11.0/reference/generated/numpy.searchsorted.html\nfunction searchSorted (inputArray, values) {\n  let i;\n  const indexes = [];\n  const len = values.length;\n\n  inputArray.sort(function (a, b) {\n    return a - b;\n  });\n\n  for (i = 0; i < len; i++) {\n    indexes[i] = getRank(inputArray, values[i]);\n  }\n\n  return indexes;\n}\n\n// Create an *N* -element 1-d lookup table\n//\n// *Data* represented by a list of x,y0,y1 mapping correspondences. Each element in this\n// List represents how a value between 0 and 1 (inclusive) represented by x is mapped to\n// A corresponding value between 0 and 1 (inclusive). The two values of y are to allow for\n// Discontinuous mapping functions (say as might be found in a sawtooth) where y0 represents\n// The value of y for values of x <= to that given, and y1 is the value to be used for x >\n// Than that given). The list must start with x=0, end with x=1, and all values of x must be\n// In increasing order. Values between the given mapping points are determined by simple linear\n// Interpolation.\n//\n// The function returns an array \"result\" where result[x*(N-1)] gives the closest value for\n// Values of x between 0 and 1.\nfunction makeMappingArray (N, data, gamma) {\n  let i;\n  const x = [];\n  const y0 = [];\n  const y1 = [];\n  const lut = [];\n\n  gamma = gamma === null ? 1 : gamma;\n\n  for (i = 0; i < data.length; i++) {\n    const element = data[i];\n\n    x.push((N - 1) * element[0]);\n    y0.push(element[1]);\n    y1.push(element[1]);\n  }\n\n  const xLinSpace = linspace(0, 1, N);\n\n  for (i = 0; i < N; i++) {\n    xLinSpace[i] = (N - 1) * Math.pow(xLinSpace[i], gamma);\n  }\n\n  const xLinSpaceIndexes = searchSorted(x, xLinSpace);\n\n  for (i = 1; i < N - 1; i++) {\n    const index = xLinSpaceIndexes[i];\n    const colorPercent = ((xLinSpace[i] - x[index - 1]) / (x[index] - x[index - 1]));\n    const colorDelta = (y0[index] - y1[index - 1]);\n\n    lut[i] = colorPercent * colorDelta + y1[index - 1];\n  }\n\n  lut[0] = y1[0];\n  lut[N - 1] = y0[data.length - 1];\n\n  return lut;\n}\n\n// Colormap based on lookup tables using linear segments.\n//\n// The lookup table is generated using linear interpolation for each\n// Primary color, with the 0-1 domain divided into any number of\n// Segments.\n//\n// https://github.com/stefanv/matplotlib/blob/3f1a23755e86fef97d51e30e106195f34425c9e3/lib/matplotlib/colors.py#L663\nfunction createLinearSegmentedColormap (segmentedData, N, gamma) {\n  let i;\n  const lut = [];\n\n  N = N === null ? 256 : N;\n  gamma = gamma === null ? 1 : gamma;\n\n  const redLut = makeMappingArray(N, segmentedData.red, gamma);\n  const greenLut = makeMappingArray(N, segmentedData.green, gamma);\n  const blueLut = makeMappingArray(N, segmentedData.blue, gamma);\n\n  for (i = 0; i < N; i++) {\n    const red = Math.round(redLut[i] * 255);\n    const green = Math.round(greenLut[i] * 255);\n    const blue = Math.round(blueLut[i] * 255);\n    const rgba = [red, green, blue, 255];\n\n    lut.push(rgba);\n  }\n\n  return lut;\n}\n\n/*\n* Return all colormaps (id and name) available\n*/\nexport function getColormapsList () {\n  const colormaps = [];\n  const keys = Object.keys(colormapsData);\n\n  keys.forEach(function (key) {\n    if (colormapsData.hasOwnProperty(key)) {\n      const colormap = colormapsData[key];\n\n      colormaps.push({\n        id: key,\n        name: colormap.name\n      });\n    }\n  });\n\n  colormaps.sort(function (a, b) {\n    const aName = a.name.toLowerCase();\n    const bName = b.name.toLowerCase();\n\n    if (aName === bName) {\n      return 0;\n    }\n\n    return aName < bName ? -1 : 1;\n  });\n\n  return colormaps;\n}\n\n/**\n * Convert the image of a element to a false color image\n *\n * @param {string} id The ID of the colormap\n * @param {Object} colormapData - An object that can contain a name, numColors, gama, segmentedData and/or colors\n *\n * @returns {*} The Colormap Object\n */\nexport function getColormap (id, colormapData) {\n  let colormap = colormapsData[id];\n\n  if (!colormap) {\n    colormap = colormapsData[id] = colormapData || {\n      name: '',\n      colors: []\n    };\n  }\n\n  if (!colormap.colors && colormap.segmentedData) {\n    colormap.colors = createLinearSegmentedColormap(colormap.segmentedData, colormap.numColors, colormap.gamma);\n  }\n\n  return {\n    getId () {\n      return id;\n    },\n\n    getColorSchemeName () {\n      return colormap.name;\n    },\n\n    setColorSchemeName (name) {\n      colormap.name = name;\n    },\n\n    getNumberOfColors () {\n      return colormap.colors.length;\n    },\n\n    setNumberOfColors (numColors) {\n      while (colormap.colors.length < numColors) {\n        colormap.colors.push(COLOR_TRANSPARENT);\n      }\n\n      colormap.colors.length = numColors;\n    },\n\n    getColor (index) {\n      if (this.isValidIndex(index)) {\n        return colormap.colors[index];\n      }\n\n      return COLOR_TRANSPARENT;\n    },\n\n    getColorRepeating (index) {\n      const numColors = colormap.colors.length;\n\n      index = numColors ? index % numColors : 0;\n\n      return this.getColor(index);\n    },\n\n    setColor (index, rgba) {\n      if (this.isValidIndex(index)) {\n        colormap.colors[index] = rgba;\n      }\n    },\n\n    addColor (rgba) {\n      colormap.colors.push(rgba);\n    },\n\n    insertColor (index, rgba) {\n      if (this.isValidIndex(index)) {\n        colormap.colors.splice(index, 1, rgba);\n      }\n    },\n\n    removeColor (index) {\n      if (this.isValidIndex(index)) {\n        colormap.colors.splice(index, 1);\n      }\n    },\n\n    clearColors () {\n      colormap.colors = [];\n    },\n\n    buildLookupTable (lut) {\n      if (!lut) {\n        return;\n      }\n\n      const numColors = colormap.colors.length;\n\n      lut.setNumberOfTableValues(numColors);\n\n      for (let i = 0; i < numColors; i++) {\n        lut.setTableValue(i, colormap.colors[i]);\n      }\n    },\n\n    createLookupTable () {\n      const lut = new LookupTable();\n\n      this.buildLookupTable(lut);\n\n      return lut;\n    },\n\n    isValidIndex (index) {\n      return (index >= 0) && (index < colormap.colors.length);\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./colors/colormap.js","// This code was created based on vtkLookupTable\n// http://www.vtk.org/doc/release/5.0/html/a01697.html\n// https://github.com/Kitware/VTK/blob/master/Common/Core/vtkLookupTable.cxx\nconst BELOW_RANGE_COLOR_INDEX = 0;\nconst ABOVE_RANGE_COLOR_INDEX = 1;\nconst NAN_COLOR_INDEX = 2;\n\nfunction HSVToRGB (hue, sat, val) {\n  if (hue > 1) {\n    throw new Error('HSVToRGB expects hue < 1');\n  }\n\n  const rgb = [];\n\n  if (sat === 0) {\n    rgb[0] = val;\n    rgb[1] = val;\n    rgb[2] = val;\n\n    return rgb;\n  }\n\n  const hueCase = Math.floor(hue * 6);\n  const frac = 6 * hue - hueCase;\n  const lx = val * (1 - sat);\n  const ly = val * (1 - sat * frac);\n  const lz = val * (1 - sat * (1 - frac));\n\n  switch (hueCase) {\n\n  /* 0<hue<1/6 */\n  case 0:\n  case 6:\n    rgb[0] = val;\n    rgb[1] = lz;\n    rgb[2] = lx;\n    break;\n\n    /* 1/6<hue<2/6 */\n  case 1:\n    rgb[0] = ly;\n    rgb[1] = val;\n    rgb[2] = lx;\n    break;\n\n    /* 2/6<hue<3/6 */\n  case 2:\n    rgb[0] = lx;\n    rgb[1] = val;\n    rgb[2] = lz;\n    break;\n\n    /* 3/6<hue/4/6 */\n  case 3:\n    rgb[0] = lx;\n    rgb[1] = ly;\n    rgb[2] = val;\n    break;\n\n    /* 4/6<hue<5/6 */\n  case 4:\n    rgb[0] = lz;\n    rgb[1] = lx;\n    rgb[2] = val;\n    break;\n\n    /* 5/6<hue<1 */\n  case 5:\n    rgb[0] = val;\n    rgb[1] = lx;\n    rgb[2] = ly;\n    break;\n  }\n\n  return rgb;\n}\n\nfunction linearIndexLookupMain (v, p) {\n  let dIndex;\n\n  // NOTE: Added Math.floor since values were not integers? Check VTK source\n  if (v < p.Range[0]) {\n    dIndex = p.MaxIndex + BELOW_RANGE_COLOR_INDEX + 1.5;\n  } else if (v > p.Range[1]) {\n    dIndex = p.MaxIndex + ABOVE_RANGE_COLOR_INDEX + 1.5;\n  } else {\n    dIndex = (v + p.Shift) * p.Scale;\n  }\n\n  return Math.floor(dIndex);\n}\n\nclass LookupTable {\n  constructor () {\n    this.NumberOfColors = 256;\n    this.Ramp = 'linear';\n    this.TableRange = [0, 255];\n    this.HueRange = [0, 0.66667];\n    this.SaturationRange = [1, 1];\n    this.ValueRange = [1, 1];\n    this.AlphaRange = [1, 1];\n    this.NaNColor = [128, 0, 0, 255];\n    this.BelowRangeColor = [0, 0, 0, 255];\n    this.UseBelowRangeColor = true;\n    this.AboveRangeColor = [255, 255, 255, 255];\n    this.UseAboveRangeColor = true;\n    this.InputRange = [0, 255];\n    this.Table = [];\n  }\n\n  setNumberOfTableValues (number) {\n    this.NumberOfColors = number;\n  }\n\n  setRamp (ramp) {\n    this.Ramp = ramp;\n  }\n\n  setTableRange (start, end) {\n    // Set/Get the minimum/maximum scalar values for scalar mapping.\n    // Scalar values less than minimum range value are clamped to minimum range value.\n    // Scalar values greater than maximum range value are clamped to maximum range value.\n    this.TableRange[0] = start;\n    this.TableRange[1] = end;\n  }\n\n  setHueRange (start, end) {\n    // Set the range in hue (using automatic generation). Hue ranges between [0,1].\n    this.HueRange[0] = start;\n    this.HueRange[1] = end;\n  }\n\n  setSaturationRange (start, end) {\n    // Set the range in saturation (using automatic generation). Saturation ranges between [0,1].\n    this.SaturationRange[0] = start;\n    this.SaturationRange[1] = end;\n  }\n\n  setValueRange (start, end) {\n    // Set the range in value (using automatic generation). Value ranges between [0,1].\n    this.ValueRange[0] = start;\n    this.ValueRange[1] = end;\n  }\n\n  setRange (start, end) {\n    this.InputRange[0] = start;\n    this.InputRange[1] = end;\n  }\n\n  setAlphaRange (start, end) {\n    // Set the range in alpha (using automatic generation). Alpha ranges from [0,1].\n    this.AlphaRange[0] = start;\n    this.AlphaRange[1] = end;\n  }\n\n  getColor (scalar) {\n    // Map one value through the lookup table and return the color as an\n    // RGB array of doubles between 0 and 1.\n    return this.mapValue(scalar);\n  }\n\n  build (force) {\n    if (this.Table.length > 1 && !force) {\n      return;\n    }\n\n    // Clear the table\n    this.Table = [];\n\n    const maxIndex = this.NumberOfColors - 1;\n\n    let hinc, sinc, vinc, ainc;\n\n    if (maxIndex) {\n      hinc = (this.HueRange[1] - this.HueRange[0]) / maxIndex;\n      sinc = (this.SaturationRange[1] - this.SaturationRange[0]) / maxIndex;\n      vinc = (this.ValueRange[1] - this.ValueRange[0]) / maxIndex;\n      ainc = (this.AlphaRange[1] - this.AlphaRange[0]) / maxIndex;\n    } else {\n      hinc = sinc = vinc = ainc = 0.0;\n    }\n\n    for (let i = 0; i <= maxIndex; i++) {\n      const hue = this.HueRange[0] + i * hinc;\n      const sat = this.SaturationRange[0] + i * sinc;\n      const val = this.ValueRange[0] + i * vinc;\n      const alpha = this.AlphaRange[0] + i * ainc;\n\n      const rgb = HSVToRGB(hue, sat, val);\n      const c_rgba = [];\n\n      switch (this.Ramp) {\n      case 'scurve':\n        c_rgba[0] = Math.floor(127.5 * (1.0 + Math.cos((1.0 - rgb[0]) * Math.PI)));\n        c_rgba[1] = Math.floor(127.5 * (1.0 + Math.cos((1.0 - rgb[1]) * Math.PI)));\n        c_rgba[2] = Math.floor(127.5 * (1.0 + Math.cos((1.0 - rgb[2]) * Math.PI)));\n        c_rgba[3] = Math.floor(alpha * 255);\n        break;\n      case 'linear':\n        c_rgba[0] = Math.floor(rgb[0] * 255 + 0.5);\n        c_rgba[1] = Math.floor(rgb[1] * 255 + 0.5);\n        c_rgba[2] = Math.floor(rgb[2] * 255 + 0.5);\n        c_rgba[3] = Math.floor(alpha * 255 + 0.5);\n        break;\n      case 'sqrt':\n        c_rgba[0] = Math.floor(Math.sqrt(rgb[0]) * 255 + 0.5);\n        c_rgba[1] = Math.floor(Math.sqrt(rgb[1]) * 255 + 0.5);\n        c_rgba[2] = Math.floor(Math.sqrt(rgb[2]) * 255 + 0.5);\n        c_rgba[3] = Math.floor(Math.sqrt(alpha) * 255 + 0.5);\n        break;\n      default:\n        throw new Error(`Invalid Ramp value (${this.Ramp})`);\n      }\n\n      this.Table.push(c_rgba);\n    }\n\n    this.buildSpecialColors();\n  }\n\n  buildSpecialColors () {\n    const numberOfColors = this.NumberOfColors;\n    const belowRangeColorIndex = numberOfColors + BELOW_RANGE_COLOR_INDEX;\n    const aboveRangeColorIndex = numberOfColors + ABOVE_RANGE_COLOR_INDEX;\n    const nanColorIndex = numberOfColors + NAN_COLOR_INDEX;\n\n    // Below range color\n    if (this.UseBelowRangeColor || numberOfColors === 0) {\n      this.Table[belowRangeColorIndex] = this.BelowRangeColor;\n    } else {\n      // Duplicate the first color in the table.\n      this.Table[belowRangeColorIndex] = this.Table[0];\n    }\n\n    // Above range color\n    if (this.UseAboveRangeColor || numberOfColors === 0) {\n      this.Table[aboveRangeColorIndex] = this.AboveRangeColor;\n    } else {\n      // Duplicate the last color in the table.\n      this.Table[aboveRangeColorIndex] = this.Table[numberOfColors - 1];\n    }\n\n    // Always use NanColor\n    this.Table[nanColorIndex] = this.NaNColor;\n  }\n\n  // Given a scalar value v, return an rgba color value from lookup table.\n  mapValue (v) {\n    const index = this.getIndex(v);\n\n    if (index < 0) {\n      return this.NaNColor;\n    } else if (index === 0) {\n      if (this.UseBelowRangeColor && v < this.TableRange[0]) {\n        return this.BelowRangeColor;\n      }\n    } else if (index === this.NumberOfColors - 1) {\n      if (this.UseAboveRangeColor && v > this.TableRange[1]) {\n        return this.AboveRangeColor;\n      }\n    }\n\n    return this.Table[index];\n  }\n\n  getIndex (v) {\n    const p = {};\n\n    p.Range = [];\n    p.MaxIndex = this.NumberOfColors - 1;\n\n    // This was LookupShiftAndScale\n    p.Shift = -this.TableRange[0];\n    if (this.TableRange[1] <= this.TableRange[0]) {\n      p.Scale = Number.MAX_VALUE;\n    } else {\n      p.Scale = p.MaxIndex / (this.TableRange[1] - this.TableRange[0]);\n    }\n\n    p.Range[0] = this.TableRange[0];\n    p.Range[1] = this.TableRange[1];\n\n    // First, check whether we have a number...\n    if (isNaN(v)) {\n      // For backwards compatibility\n      return -1;\n    }\n\n    // Map to an index:\n    let index = linearIndexLookupMain(v, p);\n\n    // For backwards compatibility, if the index indicates an\n    // Out-of-range value, truncate to index range for in-range colors.\n    if (index === this.NumberOfColors + BELOW_RANGE_COLOR_INDEX) {\n      index = 0;\n    } else if (index === this.NumberOfColors + ABOVE_RANGE_COLOR_INDEX) {\n      index = this.NumberOfColors - 1;\n    }\n\n    return index;\n  }\n\n  setTableValue (index, rgba) {\n    // Check if it index, red, green, blue and alpha were passed as parameter\n    if (arguments.length === 5) {\n      rgba = Array.prototype.slice.call(arguments, 1);\n    }\n\n    // Check the index to make sure it is valid\n    if (index < 0) {\n      throw new Error(`Can't set the table value for negative index (${index})`);\n    }\n\n    if (index >= this.NumberOfColors) {\n      new Error(`Index ${index} is greater than the number of colors ${this.NumberOfColors}`);\n    }\n\n    this.Table[index] = rgba;\n\n    if ((index === 0) || (index === this.NumberOfColors - 1)) {\n      // This is needed due to the way the special colors are stored in\n      // The internal table. If Above/BelowRangeColors are not used and\n      // The min/max colors are changed in the table with this member\n      // Function, then the colors used for values outside the range may\n      // Be incorrect. Calling this here ensures the out-of-range colors\n      // Are set correctly.\n      this.buildSpecialColors();\n    }\n  }\n}\n\nexport default LookupTable;\n\n\n\n// WEBPACK FOOTER //\n// ./colors/lookupTable.js","import now from './now.js';\n\n/**\n * This function transforms stored pixel values into a canvas image data buffer\n * by using a LUT.\n *\n * @param {Image} image A Cornerstone Image Object\n * @param {Array} lut Lookup table array\n * @param {Uint8ClampedArray} canvasImageDataData canvasImageData.data buffer filled with white pixels\n *\n * @returns {void}\n */\nexport default function (image, lut, canvasImageDataData) {\n  let start = now();\n  const pixelData = image.getPixelData();\n\n  image.stats.lastGetPixelDataTime = now() - start;\n\n  const numPixels = pixelData.length;\n  const minPixelValue = image.minPixelValue;\n  let canvasImageDataIndex = 0;\n  let storedPixelDataIndex = 0;\n  let pixelValue;\n\n  // NOTE: As of Nov 2014, most javascript engines have lower performance when indexing negative indexes.\n  // We have a special code path for this case that improves performance.  Thanks to @jpambrun for this enhancement\n\n  // Added two paths (Int16Array, Uint16Array) to avoid polymorphic deoptimization in chrome.\n  start = now();\n  if (pixelData instanceof Int16Array) {\n    if (minPixelValue < 0) {\n      while (storedPixelDataIndex < numPixels) {\n        pixelValue = lut[pixelData[storedPixelDataIndex++] + (-minPixelValue)];\n        canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n        canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n        canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n        canvasImageDataData[canvasImageDataIndex++] = 255; // Alpha\n      }\n    } else {\n      while (storedPixelDataIndex < numPixels) {\n        pixelValue = lut[pixelData[storedPixelDataIndex++]];\n        canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n        canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n        canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n        canvasImageDataData[canvasImageDataIndex++] = 255; // Alpha\n      }\n    }\n  } else if (pixelData instanceof Uint16Array) {\n    while (storedPixelDataIndex < numPixels) {\n      pixelValue = lut[pixelData[storedPixelDataIndex++]];\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = 255; // Alpha\n    }\n  } else if (minPixelValue < 0) {\n    while (storedPixelDataIndex < numPixels) {\n      pixelValue = lut[pixelData[storedPixelDataIndex++] + (-minPixelValue)];\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = 255; // Alpha\n    }\n  } else {\n    while (storedPixelDataIndex < numPixels) {\n      pixelValue = lut[pixelData[storedPixelDataIndex++]];\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = pixelValue;\n      canvasImageDataData[canvasImageDataIndex++] = 255; // Alpha\n    }\n  }\n\n  image.stats.lastStoredPixelDataToCanvasImageDataTime = now() - start;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./internal/storedPixelDataToCanvasImageDataRGBA.js","// By Simon Sarris\n// Www.simonsarris.com\n// Sarris@acm.org\n//\n// Free to use and distribute at will\n// So long as you are nice to people, etc\n\n// Simple class for keeping track of the current transformation matrix\n\n// For instance:\n//    Var t = new Transform();\n//    T.rotate(5);\n//    Var m = t.m;\n//    Ctx.setTransform(m[0], m[1], m[2], m[3], m[4], m[5]);\n\n// Is equivalent to:\n//    Ctx.rotate(5);\n\n// But now you can retrieve it :)\n\n\n// Remember that this does not account for any CSS transforms applied to the canvas\nexport class Transform {\n  constructor () {\n    this.reset();\n  }\n\n  reset () {\n    this.m = [1, 0, 0, 1, 0, 0];\n  }\n\n  clone () {\n    const transform = new Transform();\n\n    transform.m[0] = this.m[0];\n    transform.m[1] = this.m[1];\n    transform.m[2] = this.m[2];\n    transform.m[3] = this.m[3];\n    transform.m[4] = this.m[4];\n    transform.m[5] = this.m[5];\n\n    return transform;\n  }\n\n  multiply (matrix) {\n    const m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n    const m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n\n    const m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n    const m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n\n    const dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n    const dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n\n    this.m[0] = m11;\n    this.m[1] = m12;\n    this.m[2] = m21;\n    this.m[3] = m22;\n    this.m[4] = dx;\n    this.m[5] = dy;\n  }\n\n  invert () {\n    const d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n    const m0 = this.m[3] * d;\n    const m1 = -this.m[1] * d;\n    const m2 = -this.m[2] * d;\n    const m3 = this.m[0] * d;\n    const m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n    const m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n\n    this.m[0] = m0;\n    this.m[1] = m1;\n    this.m[2] = m2;\n    this.m[3] = m3;\n    this.m[4] = m4;\n    this.m[5] = m5;\n  }\n\n  rotate (rad) {\n    const c = Math.cos(rad);\n    const s = Math.sin(rad);\n    const m11 = this.m[0] * c + this.m[2] * s;\n    const m12 = this.m[1] * c + this.m[3] * s;\n    const m21 = this.m[0] * -s + this.m[2] * c;\n    const m22 = this.m[1] * -s + this.m[3] * c;\n\n    this.m[0] = m11;\n    this.m[1] = m12;\n    this.m[2] = m21;\n    this.m[3] = m22;\n  }\n\n  translate (x, y) {\n    this.m[4] += this.m[0] * x + this.m[2] * y;\n    this.m[5] += this.m[1] * x + this.m[3] * y;\n  }\n\n  scale (sx, sy) {\n    this.m[0] *= sx;\n    this.m[1] *= sx;\n    this.m[2] *= sy;\n    this.m[3] *= sy;\n  }\n\n  transformPoint (px, py) {\n    const x = px;\n    const y = py;\n\n    px = x * this.m[0] + y * this.m[2] + this.m[4];\n    py = x * this.m[1] + y * this.m[3] + this.m[5];\n\n    return {\n      x: px,\n      y: py\n    };\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./internal/transform.js","import lutMatches from './lutMatches.js';\nimport generateLut from '../internal/generateLut.js';\n\nexport default function (image, viewport, invalidated) {\n  // If we have a cached lut and it has the right values, return it immediately\n  if (image.cachedLut !== undefined &&\n    image.cachedLut.windowCenter === viewport.voi.windowCenter &&\n    image.cachedLut.windowWidth === viewport.voi.windowWidth &&\n    lutMatches(image.cachedLut.modalityLUT, viewport.modalityLUT) &&\n    lutMatches(image.cachedLut.voiLUT, viewport.voiLUT) &&\n    image.cachedLut.invert === viewport.invert &&\n    invalidated !== true) {\n    return image.cachedLut.lutArray;\n  }\n\n  // Lut is invalid or not present, regenerate it and cache it\n  generateLut(image, viewport.voi.windowWidth, viewport.voi.windowCenter, viewport.invert, viewport.modalityLUT, viewport.voiLUT);\n\n  image.cachedLut.windowWidth = viewport.voi.windowWidth;\n  image.cachedLut.windowCenter = viewport.voi.windowCenter;\n  image.cachedLut.invert = viewport.invert;\n  image.cachedLut.voiLUT = viewport.voiLUT;\n  image.cachedLut.modalityLUT = viewport.modalityLUT;\n\n  return image.cachedLut.lutArray;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./rendering/getLut.js","import events from '../events.js';\r\nimport triggerEvent from '../triggerEvent.js';\r\n\r\n/**\r\n * This module deals with caching image textures in VRAM for WebGL\r\n */\r\n\r\nconst imageCache = {};\r\n\r\nconst cachedImages = [];\r\n\r\nlet maximumSizeInBytes = 1024 * 1024 * 256; // 256 MB\r\nlet cacheSizeInBytes = 0;\r\n\r\nfunction getCacheInfo () {\r\n  return {\r\n    maximumSizeInBytes,\r\n    cacheSizeInBytes,\r\n    numberOfImagesCached: cachedImages.length\r\n  };\r\n}\r\n\r\nfunction purgeCacheIfNecessary () {\r\n  // If max cache size has not been exceeded, do nothing\r\n  if (cacheSizeInBytes <= maximumSizeInBytes) {\r\n    return;\r\n  }\r\n\r\n  // Cache size has been exceeded, create list of images sorted by timeStamp\r\n  // So we can purge the least recently used image\r\n  function compare (a, b) {\r\n    if (a.timeStamp > b.timeStamp) {\r\n      return -1;\r\n    }\r\n    if (a.timeStamp < b.timeStamp) {\r\n      return 1;\r\n    }\r\n\r\n    return 0;\r\n  }\r\n  cachedImages.sort(compare);\r\n\r\n  // Remove images as necessary\r\n  while (cacheSizeInBytes > maximumSizeInBytes) {\r\n    const lastCachedImage = cachedImages[cachedImages.length - 1];\r\n\r\n    cacheSizeInBytes -= lastCachedImage.sizeInBytes;\r\n    delete imageCache[lastCachedImage.imageId];\r\n    cachedImages.pop();\r\n\r\n    triggerEvent(events, 'CornerstoneWebGLTextureRemoved', { imageId: lastCachedImage.imageId });\r\n  }\r\n\r\n  const cacheInfo = getCacheInfo();\r\n\r\n  triggerEvent(events, 'CornerstoneWebGLTextureCacheFull', cacheInfo);\r\n}\r\n\r\nfunction setMaximumSizeBytes (numBytes) {\r\n  if (numBytes === undefined) {\r\n    throw new Error('setMaximumSizeBytes: parameter numBytes must not be undefined');\r\n  }\r\n  if (numBytes.toFixed === undefined) {\r\n    throw new Error('setMaximumSizeBytes: parameter numBytes must be a number');\r\n  }\r\n\r\n  maximumSizeInBytes = numBytes;\r\n  purgeCacheIfNecessary();\r\n}\r\n\r\nfunction putImageTexture (image, imageTexture) {\r\n  const imageId = image.imageId;\r\n\r\n  if (image === undefined) {\r\n    throw new Error('putImageTexture: image must not be undefined');\r\n  }\r\n\r\n  if (imageId === undefined) {\r\n    throw new Error('putImageTexture: imageId must not be undefined');\r\n  }\r\n\r\n  if (imageTexture === undefined) {\r\n    throw new Error('putImageTexture: imageTexture must not be undefined');\r\n  }\r\n\r\n  if (Object.prototype.hasOwnProperty.call(imageCache, imageId) === true) {\r\n    throw new Error('putImageTexture: imageId already in cache');\r\n  }\r\n\r\n  const cachedImage = {\r\n    imageId,\r\n    imageTexture,\r\n    timeStamp: new Date(),\r\n    sizeInBytes: imageTexture.sizeInBytes\r\n  };\r\n\r\n  imageCache[imageId] = cachedImage;\r\n  cachedImages.push(cachedImage);\r\n\r\n  if (imageTexture.sizeInBytes === undefined) {\r\n    throw new Error('putImageTexture: imageTexture.sizeInBytes must not be undefined');\r\n  }\r\n  if (imageTexture.sizeInBytes.toFixed === undefined) {\r\n    throw new Error('putImageTexture: imageTexture.sizeInBytes is not a number');\r\n  }\r\n  cacheSizeInBytes += cachedImage.sizeInBytes;\r\n  purgeCacheIfNecessary();\r\n}\r\n\r\nfunction getImageTexture (imageId) {\r\n  if (imageId === undefined) {\r\n    throw new Error('getImageTexture: imageId must not be undefined');\r\n  }\r\n  const cachedImage = imageCache[imageId];\r\n\r\n  if (cachedImage === undefined) {\r\n    return;\r\n  }\r\n\r\n  // Bump time stamp for cached image\r\n  cachedImage.timeStamp = new Date();\r\n\r\n  return cachedImage.imageTexture;\r\n}\r\n\r\nfunction removeImageTexture (imageId) {\r\n  if (imageId === undefined) {\r\n    throw new Error('removeImageTexture: imageId must not be undefined');\r\n  }\r\n  const cachedImage = imageCache[imageId];\r\n\r\n  if (cachedImage === undefined) {\r\n    throw new Error('removeImageTexture: imageId must not be undefined');\r\n  }\r\n  cachedImages.splice(cachedImages.indexOf(cachedImage), 1);\r\n  cacheSizeInBytes -= cachedImage.sizeInBytes;\r\n  delete imageCache[imageId];\r\n\r\n  return cachedImage.imageTexture;\r\n}\r\n\r\nfunction purgeCache () {\r\n  while (cachedImages.length > 0) {\r\n    const removedCachedImage = cachedImages.pop();\r\n\r\n    delete imageCache[removedCachedImage.imageId];\r\n  }\r\n  cacheSizeInBytes = 0;\r\n}\r\n\r\nexport default {\r\n  purgeCache,\r\n  getImageTexture,\r\n  putImageTexture,\r\n  removeImageTexture,\r\n  setMaximumSizeBytes\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./webgl/textureCache.js","let $ = window.$;\n\nconst external = {\n  set $ (module) {\n    $ = module;\n  },\n  get $ () {\n    return $;\n  }\n};\n\nexport { external };\n\n\n\n// WEBPACK FOOTER //\n// ./externalModules.js","/**\n * Creates and compiles a shader.\n *\n * @param {!WebGLRenderingContext} gl The WebGL Context.\n * @param {string} shaderSource The GLSL source code for the shader.\n * @param {number} shaderType The type of shader, VERTEX_SHADER or FRAGMENT_SHADER.\n *\n * @return {!WebGLShader} The shader.\n */\nfunction compileShader (gl, shaderSource, shaderType) {\n\n  // Create the shader object\n  const shader = gl.createShader(shaderType);\n\n  // Set the shader source code.\n  gl.shaderSource(shader, shaderSource);\n\n  // Compile the shader\n  gl.compileShader(shader);\n\n  // Check if it compiled\n  const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n\n  if (!success && !gl.isContextLost()) {\n    // Something went wrong during compilation; get the error\n    const infoLog = gl.getShaderInfoLog(shader);\n\n    console.error(`Could not compile shader:\\n${infoLog}`);\n  }\n\n  return shader;\n}\n\n/**\n * Creates a program from 2 shaders.\n *\n * @param {!WebGLRenderingContext} gl The WebGL context.\n * @param {!WebGLShader} vertexShader A vertex shader.\n * @param {!WebGLShader} fragmentShader A fragment shader.\n * @return {!WebGLProgram} A program.\n */\nfunction createProgram (gl, vertexShader, fragmentShader) {\n\n  // Create a program.\n  const program = gl.createProgram();\n\n  // Attach the shaders.\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader);\n\n  // Link the program.\n  gl.linkProgram(program);\n\n  // Check if it linked.\n  const success = gl.getProgramParameter(program, gl.LINK_STATUS);\n\n  if (!success && !gl.isContextLost()) {\n    // Something went wrong with the link\n    const infoLog = gl.getProgramInfoLog(program);\n\n    console.error(`WebGL program filed to link:\\n${infoLog}`);\n  }\n\n  return program;\n}\n\n/**\n * Creates a program from 2 shaders source (Strings)\n * @param  {!WebGLRenderingContext} gl              The WebGL context.\n * @param  {!WebGLShader} vertexShaderSrc   Vertex shader string\n * @param  {!WebGLShader} fragShaderSrc Fragment shader string\n * @return {!WebGLProgram}                 A program\n */\nexport default function (gl, vertexShaderSrc, fragShaderSrc) {\n  const vertexShader = compileShader(gl, vertexShaderSrc, gl.VERTEX_SHADER);\n  const fragShader = compileShader(gl, fragShaderSrc, gl.FRAGMENT_SHADER);\n\n\n  return createProgram(gl, vertexShader, fragShader);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./webgl/createProgramFromString.js","/**\n * This module is responsible for drawing an image to an enabled elements canvas element\n */\nimport setToPixelCoordinateSystem from '../setToPixelCoordinateSystem.js';\nimport { renderColorImage } from './renderColorImage.js';\n\n/**\n * API function to draw a standard web image (PNG, JPG) to an enabledImage\n *\n * @param {EnabledElement} enabledElement The Cornerstone Enabled Element to redraw\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n */\nexport function renderWebImage (enabledElement, invalidated) {\n  if (enabledElement === undefined) {\n    throw new Error('renderWebImage: enabledElement parameter must not be undefined');\n  }\n\n  const image = enabledElement.image;\n\n  if (image === undefined) {\n    throw new Error('renderWebImage: image must be loaded before it can be drawn');\n  }\n\n  // If the viewport ww/wc and invert all match the initial state of the image, we can draw the image\n  // Directly. If any of those are changed, we call renderColorImage() to apply the lut\n  if (enabledElement.viewport.voi.windowWidth === enabledElement.image.windowWidth &&\n        enabledElement.viewport.voi.windowCenter === enabledElement.image.windowCenter &&\n        enabledElement.viewport.invert === false) {\n\n    // Get the canvas context and reset the transform\n    const context = enabledElement.canvas.getContext('2d');\n\n    context.setTransform(1, 0, 0, 1, 0, 0);\n\n    // Clear the canvas\n    context.fillStyle = 'black';\n    context.fillRect(0, 0, enabledElement.canvas.width, enabledElement.canvas.height);\n\n    // Turn off image smooth/interpolation if pixelReplication is set in the viewport\n    context.imageSmoothingEnabled = !enabledElement.viewport.pixelReplication;\n    context.mozImageSmoothingEnabled = context.imageSmoothingEnabled;\n\n    // Save the canvas context state and apply the viewport properties\n    setToPixelCoordinateSystem(enabledElement, context);\n\n    context.drawImage(image.getImage(), 0, 0, image.width, image.height, 0, 0, image.width, image.height);\n  } else {\n    renderColorImage(enabledElement, invalidated);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./rendering/renderWebImage.js","import triggerEvent from './triggerEvent.js';\n\nfunction applyTransform (enabledElement) {\n  console.time('applyTransform');\n  const { element, image, viewport, canvas } = enabledElement;\n\n  // Obtain the translation\n  const { x, y } = viewport.translation;\n  const cssTranslateX = x === 0 ? '-50%' : `calc(${x}px - 50%)`;\n  const cssTranslateY = y === 0 ? '-50%' : `calc(${y}px - 50%)`;\n  const translate = `translate(${cssTranslateX},${cssTranslateY})`;\n\n  // We don't need to translate to center to apply scale/rotation thanks to transform-origin\n  // heavy test for small optimisation ?\n  let rotate = '';\n\n  if (viewport.rotation % 360 !== 0) {\n    rotate = `rotate(${viewport.rotation}deg)`;\n  }\n\n  // Use rotation for flip so we can animate it\n  const vflipDegrees = viewport.vflip ? 180 : 0;\n  const hflipDegrees = viewport.hflip ? 180 : 0;\n  const flipX = `rotateX(${vflipDegrees}deg)`;\n  const flipY = `rotateY(${hflipDegrees}deg)`;\n\n  // Scale\n  let widthScale = viewport.scale;\n  let heightScale = viewport.scale;\n\n  if (image) {\n    if (image.rowPixelSpacing < image.columnPixelSpacing) {\n      widthScale *= image.columnPixelSpacing / image.rowPixelSpacing;\n    } else if (image.columnPixelSpacing < image.rowPixelSpacing) {\n      heightScale *= image.rowPixelSpacing / image.columnPixelSpacing;\n    }\n  }\n\n  const scale = `scale(${widthScale},${heightScale})`;\n\n  canvas.style.transform = `${translate} ${rotate} ${flipX} ${flipY} ${scale}`;\n\n  /*const detail = {\n    viewport,\n    element,\n    image,\n    enabledElement,\n    canvasContext\n  };*/\n\n  //triggerEvent(element, 'cornerstonetransformupdated', detail);\n\n  console.timeEnd('applyTransform');\n}\n\n// module exports\nexport default applyTransform;\n\n\n\n// WEBPACK FOOTER //\n// ./applyTransform.js","import { getEnabledElement } from './enabledElements.js';\r\nimport fitToWindow from './fitToWindow.js';\r\nimport updateImage from './updateImage.js';\r\nimport triggerEvent from './triggerEvent.js';\r\n\r\n/**\r\n * Resizes an enabled element and optionally fits the image to window\r\n *\r\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\r\n * @param {Boolean} fitViewportToWindow true to refit, false to leave viewport parameters as they are\r\n * @returns {void}\r\n */\r\nexport default function (element, fitViewportToWindow) {\r\n\r\n  const enabledElement = getEnabledElement(element);\r\n  const { image, canvas } = enabledElement;\r\n\r\n  if (!image) {\r\n    return;\r\n  }\r\n\r\n  // Avoid setting the same value because it flashes the canvas with IE and Edge\r\n  if (canvas.width !== image.columns) {\r\n    canvas.width = image.columns;\r\n    canvas.style.width = `${image.columns}px`;\r\n  }\r\n  // Avoid setting the same value because it flashes the canvas with IE and Edge\r\n  if (canvas.height !== image.rows) {\r\n    canvas.height = image.rows;\r\n    canvas.style.height = `${image.rows}px`;\r\n  }\r\n\r\n  const eventData = {\r\n    element\r\n  };\r\n\r\n  triggerEvent(element, 'CornerstoneElementResized', eventData);\r\n\r\n  if (fitViewportToWindow === true) {\r\n    fitToWindow(element);\r\n  } else {\r\n    updateImage(element);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./resize.js","import { getEnabledElement } from './enabledElements.js';\nimport updateImage from './updateImage.js';\n\n/**\n * Retrieves the current image dimensions given an enabled element\n *\n * @param {EnabledElement} enabledElement The Cornerstone Enabled Element\n * @return {{width, height}} The Image dimensions\n */\nfunction getImageSize (enabledElement) {\n  if (enabledElement.viewport.rotation === 0 || enabledElement.viewport.rotation === 180) {\n    return {\n      width: enabledElement.image.width,\n      height: enabledElement.image.height\n    };\n  }\n\n  return {\n    width: enabledElement.image.height,\n    height: enabledElement.image.width\n  };\n\n}\n\n/**\n * Adjusts an image's scale and translation so the image is centered and all pixels\n * in the image are viewable.\n *\n * @param {HTMLElement} element The Cornerstone element to update\n * @returns {void}\n */\nexport default function (element) {\n  const enabledElement = getEnabledElement(element);\n  const imageSize = getImageSize(enabledElement);\n\n  const verticalScale = enabledElement.canvas.height / imageSize.height;\n  const horizontalScale = enabledElement.canvas.width / imageSize.width;\n\n  // The new scale is the minimum of the horizontal and vertical scale values\n  enabledElement.viewport.scale = Math.min(horizontalScale, verticalScale);\n\n  enabledElement.viewport.translation.x = 0;\n  enabledElement.viewport.translation.y = 0;\n  updateImage(element);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./fitToWindow.js","import { getEnabledElement } from './enabledElements.js';\n\n/**\n * Retrieves an array of stored pixel values from a rectangular region of an image\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @param {Number} x The x coordinate of the top left corner of the sampling rectangle in image coordinates\n * @param {Number} y The y coordinate of the top left corner of the sampling rectangle in image coordinates\n * @param {Number} width The width of the of the sampling rectangle in image coordinates\n * @param {Number} height The height of the of the sampling rectangle in image coordinates\n * @returns {Array} The stored pixel value of the pixels in the sampling rectangle\n */\nexport default function (element, x, y, width, height) {\n  if (element === undefined) {\n    throw new Error('getStoredPixels: parameter element must not be undefined');\n  }\n\n  x = Math.round(x);\n  y = Math.round(y);\n  const enabledElement = getEnabledElement(element);\n  const storedPixels = [];\n  let index = 0;\n  const pixelData = enabledElement.image.getPixelData();\n\n  for (let row = 0; row < height; row++) {\n    for (let column = 0; column < width; column++) {\n      const spIndex = ((row + y) * enabledElement.image.columns) + (column + x);\n\n      storedPixels[index++] = pixelData[spIndex];\n    }\n  }\n\n  return storedPixels;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./getStoredPixels.js","import events from './events.js';\nimport triggerEvent from './triggerEvent.js';\n\n/**\n * This module deals with caching images\n */\nlet maximumSizeInBytes = 1024 * 1024 * 1024; // 1 GB\nlet cacheSizeInBytes = 0;\n\n// Dictionary of imageId to cachedImage objects\nconst imageCacheDict = {};\n\n// Array of cachedImage objects\nexport const cachedImages = [];\n\nexport function setMaximumSizeBytes (numBytes) {\n  if (numBytes === undefined) {\n    throw new Error('setMaximumSizeBytes: parameter numBytes must not be undefined');\n  }\n  if (numBytes.toFixed === undefined) {\n    throw new Error('setMaximumSizeBytes: parameter numBytes must be a number');\n  }\n\n  maximumSizeInBytes = numBytes;\n\n  triggerEvent(events, 'CornerstoneImageCacheMaximumSizeChanged');\n\n  purgeCacheIfNecessary();\n}\n\nfunction purgeCacheIfNecessary () {\n  // If max cache size has not been exceeded, do nothing\n  if (cacheSizeInBytes <= maximumSizeInBytes) {\n    return;\n  }\n\n  // Cache size has been exceeded, create list of images sorted by timeStamp\n  // So we can purge the least recently used image\n  function compare (a, b) {\n    if (a.timeStamp > b.timeStamp) {\n      return -1;\n    }\n    if (a.timeStamp < b.timeStamp) {\n      return 1;\n    }\n\n    return 0;\n  }\n  cachedImages.sort(compare);\n\n  // Remove images as necessary)\n  while (cacheSizeInBytes > maximumSizeInBytes) {\n    const lastCachedImage = cachedImages[cachedImages.length - 1];\n    const imageId = lastCachedImage.imageId;\n\n    removeImagePromise(imageId);\n\n    triggerEvent(events, 'CornerstoneImageCachePromiseRemoved', { imageId });\n  }\n\n  const cacheInfo = getCacheInfo();\n\n  triggerEvent(events, 'CornerstoneImageCacheFull', cacheInfo);\n}\n\nexport function putImagePromise (imageId, imagePromise) {\n  if (imageId === undefined) {\n    throw new Error('putImagePromise: imageId must not be undefined');\n  }\n  if (imagePromise === undefined) {\n    throw new Error('putImagePromise: imagePromise must not be undefined');\n  }\n  if (imageCacheDict.hasOwnProperty(imageId) === true) {\n    throw new Error('putImagePromise: imageId already in cache');\n  }\n\n  const cachedImage = {\n    loaded: false,\n    imageId,\n    sharedCacheKey: undefined, // The sharedCacheKey for this imageId.  undefined by default\n    imagePromise,\n    timeStamp: Date.now(),\n    sizeInBytes: 0\n  };\n\n  imageCacheDict[imageId] = cachedImage;\n  cachedImages.push(cachedImage);\n\n  imagePromise.then(function (image) {\n    if (cachedImages.indexOf(cachedImage) === -1) {\n      // If the image has been purged before being loaded, we stop here.\n      return;\n    }\n\n    cachedImage.loaded = true;\n    cachedImage.image = image;\n\n    if (image.sizeInBytes === undefined) {\n      throw new Error('putImagePromise: sizeInBytes must not be undefined');\n    }\n    if (image.sizeInBytes.toFixed === undefined) {\n      throw new Error('putImagePromise: image.sizeInBytes is not a number');\n    }\n\n    cachedImage.sizeInBytes = image.sizeInBytes;\n    cacheSizeInBytes += cachedImage.sizeInBytes;\n\n    const eventDetails = {\n      action: 'addImage',\n      image: cachedImage\n    };\n\n    triggerEvent(events, 'CornerstoneImageCacheChanged', eventDetails);\n\n    cachedImage.sharedCacheKey = image.sharedCacheKey;\n\n    purgeCacheIfNecessary();\n  });\n}\n\nexport function getImagePromise (imageId) {\n  if (imageId === undefined) {\n    throw new Error('getImagePromise: imageId must not be undefined');\n  }\n  const cachedImage = imageCacheDict[imageId];\n\n  if (cachedImage === undefined) {\n    return;\n  }\n\n  // Bump time stamp for cached image\n  cachedImage.timeStamp = Date.now();\n\n  return cachedImage.imagePromise;\n}\n\nexport function removeImagePromise (imageId) {\n  if (imageId === undefined) {\n    throw new Error('removeImagePromise: imageId must not be undefined');\n  }\n  const cachedImage = imageCacheDict[imageId];\n\n  if (cachedImage === undefined) {\n    throw new Error('removeImagePromise: imageId was not present in imageCache');\n  }\n\n  cachedImage.imagePromise.reject();\n  cachedImages.splice(cachedImages.indexOf(cachedImage), 1);\n  cacheSizeInBytes -= cachedImage.sizeInBytes;\n\n  const eventDetails = {\n    action: 'deleteImage',\n    image: cachedImage\n  };\n\n  triggerEvent(events, 'CornerstoneImageCacheChanged', eventDetails);\n  decache(cachedImage.imagePromise);\n\n  delete imageCacheDict[imageId];\n}\n\nexport function getCacheInfo () {\n  return {\n    maximumSizeInBytes,\n    cacheSizeInBytes,\n    numberOfImagesCached: cachedImages.length\n  };\n}\n\n// This method should only be called by `removeImagePromise` because it's\n// The one that knows how to deal with shared cache keys and cache size.\nfunction decache (imagePromise) {\n  imagePromise.then(function (image) {\n    if (image.decache) {\n      image.decache();\n    }\n  });\n}\n\nexport function purgeCache () {\n  while (cachedImages.length > 0) {\n    const removedCachedImage = cachedImages[0];\n\n    removeImagePromise(removedCachedImage.imageId);\n  }\n}\n\nexport function changeImageIdCacheSize (imageId, newCacheSize) {\n  const cacheEntry = imageCacheDict[imageId];\n\n  if (cacheEntry) {\n    cacheEntry.imagePromise.then(function (image) {\n      const cacheSizeDifference = newCacheSize - image.sizeInBytes;\n\n      image.sizeInBytes = newCacheSize;\n      cacheEntry.sizeInBytes = newCacheSize;\n      cacheSizeInBytes += cacheSizeDifference;\n\n      const eventDetails = {\n        action: 'changeImageSize',\n        image\n      };\n\n      triggerEvent(events, 'CornerstoneImageCacheChanged', eventDetails);\n    });\n  }\n}\n\nexport default {\n  imageCache: imageCacheDict,\n  cachedImages,\n  setMaximumSizeBytes,\n  putImagePromise,\n  getImagePromise,\n  removeImagePromise,\n  getCacheInfo,\n  purgeCache,\n  changeImageIdCacheSize\n};\n\n\n\n// WEBPACK FOOTER //\n// ./imageCache.js","import colors from './colors/index.js';\n\n/**\n * Converts the image pixel data into a false color data\n *\n * @param {Image} image A Cornerstone Image Object\n * @param {Object} lookupTable A lookup table Object\n *\n * @returns {void}\n */\nexport default function (image, lookupTable) {\n  if (image.color && !image.falseColor) {\n    throw new Error('Color transforms are not implemented yet');\n  }\n\n  const minPixelValue = image.minPixelValue;\n  let canvasImageDataIndex = 0;\n  let storedPixelDataIndex = 0;\n  const numPixels = image.width * image.height;\n  const origPixelData = image.origPixelData || image.getPixelData();\n  const storedColorPixelData = new Uint8Array(numPixels * 4);\n  let sp;\n  let mapped;\n\n  image.color = true;\n  image.falseColor = true;\n  image.origPixelData = origPixelData;\n\n  if (lookupTable instanceof colors.LookupTable) {\n    lookupTable.build();\n\n    while (storedPixelDataIndex < numPixels) {\n      sp = origPixelData[storedPixelDataIndex++];\n      mapped = lookupTable.mapValue(sp);\n      storedColorPixelData[canvasImageDataIndex++] = mapped[0];\n      storedColorPixelData[canvasImageDataIndex++] = mapped[1];\n      storedColorPixelData[canvasImageDataIndex++] = mapped[2];\n      storedColorPixelData[canvasImageDataIndex++] = mapped[3];\n    }\n  } else if (minPixelValue < 0) {\n    while (storedPixelDataIndex < numPixels) {\n      sp = origPixelData[storedPixelDataIndex++];\n      storedColorPixelData[canvasImageDataIndex++] = lookupTable[sp + (-minPixelValue)][0]; // Red\n      storedColorPixelData[canvasImageDataIndex++] = lookupTable[sp + (-minPixelValue)][1]; // Green\n      storedColorPixelData[canvasImageDataIndex++] = lookupTable[sp + (-minPixelValue)][2]; // Blue\n      storedColorPixelData[canvasImageDataIndex++] = lookupTable[sp + (-minPixelValue)][3]; // Alpha\n    }\n  } else {\n    while (storedPixelDataIndex < numPixels) {\n      sp = origPixelData[storedPixelDataIndex++];\n      storedColorPixelData[canvasImageDataIndex++] = lookupTable[sp][0]; // Red\n      storedColorPixelData[canvasImageDataIndex++] = lookupTable[sp][1]; // Green\n      storedColorPixelData[canvasImageDataIndex++] = lookupTable[sp][2]; // Blue\n      storedColorPixelData[canvasImageDataIndex++] = lookupTable[sp][3]; // Alpha\n    }\n  }\n\n  image.rgba = true;\n  image.cachedLut = undefined;\n  image.render = undefined;\n  image.slope = 1;\n  image.intercept = 0;\n  image.minPixelValue = 0;\n  image.maxPixelValue = 255;\n  image.windowWidth = 255;\n  image.windowCenter = 128;\n  image.getPixelData = () => storedColorPixelData;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./pixelDataToFalseColorData.js","// Internal (some of these are from old internal/legacy expose)\nexport { default as drawImage } from './internal/drawImage.js';\nexport { default as generateLut } from './internal/generateLut.js';\nexport { default as getDefaultViewport } from './internal/getDefaultViewport.js';\nexport { default as requestAnimationFrame } from './internal/requestAnimationFrame.js';\nexport { default as storedPixelDataToCanvasImageData } from './internal/storedPixelDataToCanvasImageData.js';\nexport { default as storedColorPixelDataToCanvasImageData } from './internal/storedColorPixelDataToCanvasImageData.js';\nexport { default as storedPixelDataToCanvasImageDataColorLUT } from './internal/storedPixelDataToCanvasImageDataColorLUT.js';\nexport { default as storedPixelDataToCanvasImageDataPseudocolorLUT } from './internal/storedPixelDataToCanvasImageDataPseudocolorLUT.js';\n\nexport { default as internal } from './internal/index.js';\n\n// Rendering\nexport { renderLabelMapImage } from './rendering/renderLabelMapImage.js';\nexport { renderPseudoColorImage } from './rendering/renderPseudoColorImage.js';\nexport { renderColorImage } from './rendering/renderColorImage.js';\nexport { renderGrayscaleImage } from './rendering/renderGrayscaleImage.js';\nexport { renderWebImage } from './rendering/renderWebImage.js';\n\nexport { default as canvasToPixel } from './canvasToPixel.js';\nexport { default as disable } from './disable.js';\nexport { default as displayImage } from './displayImage.js';\nexport { default as draw } from './draw.js';\nexport { default as drawInvalidated } from './drawInvalidated.js';\nexport { default as enable } from './enable.js';\nexport { getElementData, removeElementData } from './enabledElementData.js';\nexport {\n  getEnabledElement,\n  addEnabledElement,\n  getEnabledElementsByImageId,\n  getEnabledElements\n} from './enabledElements.js';\n\nexport {\n  addLayer,\n  removeLayer,\n  getLayer,\n  getLayers,\n  getVisibleLayers,\n  setActiveLayer,\n  getActiveLayer,\n  setLayerImage\n} from './layers.js';\n\nexport { default as fitToWindow } from './fitToWindow.js';\nexport { default as getDefaultViewportForImage } from './getDefaultViewportForImage.js';\nexport { default as getImage } from './getImage.js';\nexport { default as getPixels } from './getPixels.js';\nexport { default as getStoredPixels } from './getStoredPixels.js';\nexport { default as getViewport } from './getViewport.js';\nexport {\n  loadImage,\n  loadAndCacheImage,\n  registerImageLoader,\n  registerUnknownImageLoader\n} from './imageLoader.js';\n\nexport { default as invalidate } from './invalidate.js';\nexport { default as invalidateImageId } from './invalidateImageId.js';\nexport { default as pageToPixel } from './pageToPixel.js';\nexport { default as pixelToCanvas } from './pixelToCanvas.js';\nexport { default as reset } from './reset.js';\nexport { default as resize } from './resize.js';\nexport { default as setToPixelCoordinateSystem } from './setToPixelCoordinateSystem.js';\nexport { default as setViewport } from './setViewport.js';\nexport { default as updateImage } from './updateImage.js';\nexport { default as pixelDataToFalseColorData } from './pixelDataToFalseColorData.js';\n\nexport { default as rendering } from './rendering/index.js';\nexport { default as imageCache } from './imageCache.js';\nexport { default as metaData } from './metaData.js';\nexport { default as webGL } from './webgl/index.js';\nexport { default as colors } from './colors/index.js';\n\nexport { convertImageToFalseColorImage,\n  convertToFalseColorImage,\n  restoreImage } from './falseColorMapping.js';\n\nexport { default as events } from './events.js';\nexport { default as triggerEvent } from './triggerEvent.js';\nexport { external } from './externalModules.js';\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","/* eslint no-bitwise: 0 */\n\n/**\n * Volume of Interest Lookup Table Function\n *\n * @typedef {Function} VOILUTFunction\n *\n * @param {Number} modalityLutValue\n * @returns {Number} transformed value\n */\n\n/**\n *\n * @param {Number} windowWidth Window Width\n * @param {Number} windowCenter Window Center\n * @returns {VOILUTFunction} VOI LUT mapping function\n */\nfunction generateLinearVOILUT (windowWidth, windowCenter) {\n  return function (modalityLutValue) {\n    return ((modalityLutValue - windowCenter) / windowWidth + 0.5) * 255.0;\n  };\n}\n\n/**\n * Generate a non-linear volume of interest lookup table\n *\n * @param {LUT} voiLUT Volume of Interest Lookup Table Object\n *\n * @returns {VOILUTFunction} VOI LUT mapping function\n */\nfunction generateNonLinearVOILUT (voiLUT) {\n  // We don't trust the voiLUT.numBitsPerEntry, mainly thanks to Agfa!\n  const bitsPerEntry = Math.max(...voiLUT.lut).toString(2).length;\n  const shift = bitsPerEntry - 8;\n  const minValue = voiLUT.lut[0] >> shift;\n  const maxValue = voiLUT.lut[voiLUT.lut.length - 1] >> shift;\n  const maxValueMapped = voiLUT.firstValueMapped + voiLUT.lut.length - 1;\n\n  return function (modalityLutValue) {\n    if (modalityLutValue < voiLUT.firstValueMapped) {\n      return minValue;\n    } else if (modalityLutValue >= maxValueMapped) {\n      return maxValue;\n    }\n\n    return voiLUT.lut[modalityLutValue - voiLUT.firstValueMapped] >> shift;\n  };\n}\n\n/**\n * Retrieve a VOI LUT mapping function given the current windowing settings\n * and the VOI LUT for the image\n *\n * @param {Number} windowWidth Window Width\n * @param {Number} windowCenter Window Center\n * @param {LUT} [voiLUT] Volume of Interest Lookup Table Object\n *\n * @return {VOILUTFunction} VOI LUT mapping function\n */\nexport default function (windowWidth, windowCenter, voiLUT) {\n  if (voiLUT) {\n    return generateNonLinearVOILUT(voiLUT);\n  }\n\n  return generateLinearVOILUT(windowWidth, windowCenter);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./internal/getVOILut.js","import drawImage from './drawImage.js';\r\nimport generateLut from './generateLut.js';\r\nimport getDefaultViewport from './getDefaultViewport.js';\r\nimport requestAnimationFrame from './requestAnimationFrame.js';\r\nimport storedPixelDataToCanvasImageData from './storedPixelDataToCanvasImageData.js';\r\nimport storedPixelDataToCanvasImageDataRGBA from './storedPixelDataToCanvasImageDataRGBA.js';\r\nimport storedColorPixelDataToCanvasImageData from './storedColorPixelDataToCanvasImageData.js';\r\nimport storedPixelDataToCanvasImageDataColorLUT from './storedPixelDataToCanvasImageDataColorLUT.js';\r\nimport storedPixelDataToCanvasImageDataPseudocolorLUT from './storedPixelDataToCanvasImageDataPseudocolorLUT.js';\r\nimport getTransform from './getTransform.js';\r\nimport calculateTransform from './calculateTransform.js';\r\nimport { Transform } from './transform.js';\r\n\r\nexport default {\r\n  drawImage,\r\n  generateLut,\r\n  getDefaultViewport,\r\n  requestAnimationFrame,\r\n  storedPixelDataToCanvasImageData,\r\n  storedPixelDataToCanvasImageDataRGBA,\r\n  storedPixelDataToCanvasImageDataColorLUT,\r\n  storedPixelDataToCanvasImageDataPseudocolorLUT,\r\n  storedColorPixelDataToCanvasImageData,\r\n  getTransform,\r\n  calculateTransform,\r\n  Transform\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./internal/index.js","/**\n * Check if two lookup tables match\n *\n * @param {LUT} a A lookup table function\n * @param {LUT} b Another lookup table function\n * @return {boolean} Whether or not they match\n */\nexport default function (a, b) {\n  // If undefined, they are equal\n  if (!a && !b) {\n    return true;\n  }\n  // If one is undefined, not equal\n  if (!a || !b) {\n    return false;\n  }\n\n  // Check the unique ids\n  return (a.id === b.id);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./rendering/lutMatches.js","import now from './now.js';\n\n/**\n * Converts stored RGBA color pixel values to display pixel values using a LUT.\n *\n * @param {Image} image A Cornerstone Image Object\n * @param {Array} lut Lookup table array\n * @param {Uint8ClampedArray} canvasImageDataData canvasImageData.data buffer filled with white pixels\n *\n * @returns {void}\n */\nexport default function (image, lut, canvasImageDataData) {\n\n  let start = now();\n  const pixelData = image.getPixelData();\n\n  image.stats.lastGetPixelDataTime = now() - start;\n\n  const minPixelValue = image.minPixelValue;\n  let canvasImageDataIndex = 0;\n  let storedPixelDataIndex = 0;\n  const numPixels = pixelData.length;\n\n  // NOTE: As of Nov 2014, most javascript engines have lower performance when indexing negative indexes.\n  // We have a special code path for this case that improves performance.  Thanks to @jpambrun for this enhancement\n  start = now();\n  if (minPixelValue < 0) {\n    while (storedPixelDataIndex < numPixels) {\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++] + (-minPixelValue)]; // Red\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++] + (-minPixelValue)]; // Green\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++] + (-minPixelValue)]; // Blue\n      canvasImageDataData[canvasImageDataIndex++] = pixelData[storedPixelDataIndex++];\n    }\n  } else {\n    while (storedPixelDataIndex < numPixels) {\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++]]; // Red\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++]]; // Green\n      canvasImageDataData[canvasImageDataIndex++] = lut[pixelData[storedPixelDataIndex++]]; // Blue\n      canvasImageDataData[canvasImageDataIndex++] = pixelData[storedPixelDataIndex++];\n    }\n  }\n  image.stats.lastStoredPixelDataToCanvasImageDataTime = now() - start;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./internal/storedRGBAPixelDataToCanvasImageData.js","/* eslint no-bitwise: 0 */\n\nimport { shaders, dataUtilities } from './shaders/index.js';\nimport { vertexShader } from './vertexShader.js';\nimport textureCache from './textureCache.js';\nimport createProgramFromString from './createProgramFromString.js';\n\nconst renderCanvas = document.createElement('canvas');\nlet gl;\nlet texCoordBuffer;\nlet positionBuffer;\nlet isWebGLInitialized = false;\n\nexport { isWebGLInitialized };\n\nexport function getRenderCanvas () {\n  return renderCanvas;\n}\n\nfunction initShaders () {\n  for (const id in shaders) {\n    // Console.log(\"WEBGL: Loading shader\", id);\n    const shader = shaders[id];\n\n    shader.attributes = {};\n    shader.uniforms = {};\n    shader.vert = vertexShader;\n\n    shader.program = createProgramFromString(gl, shader.vert, shader.frag);\n\n    shader.attributes.texCoordLocation = gl.getAttribLocation(shader.program, 'a_texCoord');\n    gl.enableVertexAttribArray(shader.attributes.texCoordLocation);\n\n    shader.attributes.positionLocation = gl.getAttribLocation(shader.program, 'a_position');\n    gl.enableVertexAttribArray(shader.attributes.positionLocation);\n\n    shader.uniforms.resolutionLocation = gl.getUniformLocation(shader.program, 'u_resolution');\n  }\n}\n\nexport function initRenderer () {\n  if (isWebGLInitialized === true) {\n    // Console.log(\"WEBGL Renderer already initialized\");\n    return;\n  }\n\n  if (initWebGL(renderCanvas)) {\n    initBuffers();\n    initShaders();\n    // Console.log(\"WEBGL Renderer initialized!\");\n    isWebGLInitialized = true;\n  }\n}\n\nfunction updateRectangle (gl, width, height) {\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n    width, height,\n    0, height,\n    width, 0,\n    0, 0]), gl.STATIC_DRAW);\n}\n\nfunction handleLostContext (event) {\n  event.preventDefault();\n  console.warn('WebGL Context Lost!');\n}\n\nfunction handleRestoredContext (event) {\n  event.preventDefault();\n  isWebGLInitialized = false;\n  textureCache.purgeCache();\n  initRenderer();\n  // Console.log('WebGL Context Restored.');\n}\n\nfunction initWebGL (canvas) {\n\n  gl = null;\n  try {\n    // Try to grab the standard context. If it fails, fallback to experimental.\n    const options = {\n      preserveDrawingBuffer: true // Preserve buffer so we can copy to display canvas element\n    };\n\n    // ---------------- Testing purposes -------------\n    // If (debug === true && WebGLDebugUtils) {\n    //    RenderCanvas = WebGLDebugUtils.makeLostContextSimulatingCanvas(renderCanvas);\n    // }\n    // ---------------- Testing purposes -------------\n\n    gl = canvas.getContext('webgl', options) || canvas.getContext('experimental-webgl', options);\n\n    // Set up event listeners for context lost / context restored\n    canvas.removeEventListener('webglcontextlost', handleLostContext, false);\n    canvas.addEventListener('webglcontextlost', handleLostContext, false);\n\n    canvas.removeEventListener('webglcontextrestored', handleRestoredContext, false);\n    canvas.addEventListener('webglcontextrestored', handleRestoredContext, false);\n\n  } catch (error) {\n    throw new Error('Error creating WebGL context');\n  }\n\n  // If we don't have a GL context, give up now\n  if (!gl) {\n    console.error('Unable to initialize WebGL. Your browser may not support it.');\n    gl = null;\n  }\n\n  return gl;\n}\n\nfunction getImageDataType (image) {\n  if (image.color) {\n    return 'rgb';\n  }\n\n  let datatype = 'int';\n\n  if (image.minPixelValue >= 0) {\n    datatype = `u${datatype}`;\n  }\n\n  if (image.maxPixelValue > 255) {\n    datatype += '16';\n  } else {\n    datatype += '8';\n  }\n\n  return datatype;\n}\n\nfunction getShaderProgram (image) {\n\n  const datatype = getImageDataType(image);\n  // We need a mechanism for\n  // Choosing the shader based on the image datatype\n  // Console.log(\"Datatype: \" + datatype);\n\n  if (shaders.hasOwnProperty(datatype)) {\n    return shaders[datatype];\n  }\n\n  return shaders.rgb;\n}\n\nfunction generateTexture (image) {\n  const TEXTURE_FORMAT = {\n    uint8: gl.LUMINANCE,\n    int8: gl.LUMINANCE_ALPHA,\n    uint16: gl.LUMINANCE_ALPHA,\n    int16: gl.RGB,\n    rgb: gl.RGB\n  };\n\n  const TEXTURE_BYTES = {\n    int8: 1, // Luminance\n    uint16: 2, // Luminance + Alpha\n    int16: 3, // RGB\n    rgb: 3 // RGB\n  };\n\n  const imageDataType = getImageDataType(image);\n  const format = TEXTURE_FORMAT[imageDataType];\n\n  // GL texture configuration\n  const texture = gl.createTexture();\n\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n  gl.pixelStorei(gl.UNPACK_ALIGNMENT, 1);\n\n  const imageData = dataUtilities[imageDataType].storedPixelDataToImageData(image, image.width, image.height);\n\n  gl.texImage2D(gl.TEXTURE_2D, 0, format, image.width, image.height, 0, format, gl.UNSIGNED_BYTE, imageData);\n\n  // Calculate the size in bytes of this image in memory\n  const sizeInBytes = image.width * image.height * TEXTURE_BYTES[imageDataType];\n\n  return {\n    texture,\n    sizeInBytes\n  };\n}\n\nfunction getImageTexture (image) {\n  let imageTexture = textureCache.getImageTexture(image.imageId);\n\n  if (!imageTexture) {\n    // Console.log(\"Generating texture for imageid: \", image.imageId);\n    imageTexture = generateTexture(image);\n    textureCache.putImageTexture(image, imageTexture);\n  }\n\n  return imageTexture.texture;\n}\n\nfunction initBuffers () {\n  positionBuffer = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n    1, 1,\n    0, 1,\n    1, 0,\n    0, 0\n  ]), gl.STATIC_DRAW);\n\n\n  texCoordBuffer = gl.createBuffer();\n  gl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\n    1.0, 1.0,\n    0.0, 1.0,\n    1.0, 0.0,\n    0.0, 0.0\n  ]), gl.STATIC_DRAW);\n}\n\nfunction renderQuad (shader, parameters, texture, width, height) {\n  gl.clearColor(1.0, 0.0, 0.0, 1.0);\n  gl.viewport(0, 0, width, height);\n\n  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n  gl.useProgram(shader.program);\n\n  gl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);\n  gl.vertexAttribPointer(shader.attributes.texCoordLocation, 2, gl.FLOAT, false, 0, 0);\n\n  gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\n  gl.vertexAttribPointer(shader.attributes.positionLocation, 2, gl.FLOAT, false, 0, 0);\n\n  for (const key in parameters) {\n    const uniformLocation = gl.getUniformLocation(shader.program, key);\n\n    if (!uniformLocation) {\n      continue;\n\n      // Disabling this error for now since RGB requires minPixelValue\n      // but the other shaders do not.\n      // throw `Could not access location for uniform: ${key}`;\n    }\n\n    const uniform = parameters[key];\n\n    const type = uniform.type;\n    const value = uniform.value;\n\n    if (type === 'i') {\n      gl.uniform1i(uniformLocation, value);\n    } else if (type === 'f') {\n      gl.uniform1f(uniformLocation, value);\n    } else if (type === '2f') {\n      gl.uniform2f(uniformLocation, value[0], value[1]);\n    }\n  }\n\n  updateRectangle(gl, width, height);\n\n  gl.activeTexture(gl.TEXTURE0);\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n}\n\nexport function render (enabledElement) {\n  // Resize the canvas\n  const image = enabledElement.image;\n\n  renderCanvas.width = image.width;\n  renderCanvas.height = image.height;\n\n  const viewport = enabledElement.viewport;\n\n  // Render the current image\n  const shader = getShaderProgram(image);\n  const texture = getImageTexture(image);\n  const parameters = {\n    u_resolution: { type: '2f',\n      value: [image.width, image.height] },\n    wc: { type: 'f',\n      value: viewport.voi.windowCenter },\n    ww: { type: 'f',\n      value: viewport.voi.windowWidth },\n    slope: { type: 'f',\n      value: image.slope },\n    intercept: { type: 'f',\n      value: image.intercept },\n    minPixelValue: { type: 'f',\n      value: image.minPixelValue },\n    invert: { type: 'i',\n      value: viewport.invert ? 1 : 0 }\n  };\n\n  renderQuad(shader, parameters, texture, image.width, image.height);\n\n  return renderCanvas;\n}\n\nexport function isWebGLAvailable () {\n  // Adapted from\n  // http://stackoverflow.com/questions/9899807/three-js-detect-webgl-support-and-fallback-to-regular-canvas\n\n  const options = {\n    failIfMajorPerformanceCaveat: true\n  };\n\n  try {\n    const canvas = document.createElement('canvas');\n\n\n    return Boolean(window.WebGLRenderingContext) &&\n            (canvas.getContext('webgl', options) || canvas.getContext('experimental-webgl', options));\n  } catch (e) {\n    return false;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./webgl/renderer.js","import { int16Shader, int16DataUtilities } from './int16.js';\nimport { int8Shader, int8DataUtilities } from './int8.js';\nimport { rgbShader, rgbDataUtilities } from './rgb.js';\nimport { uint16Shader, uint16DataUtilities } from './uint16.js';\nimport { uint8Shader, uint8DataUtilities } from './uint8.js';\n\nconst shaders = {\n  int16: int16Shader,\n  int8: int8Shader,\n  rgb: rgbShader,\n  uint16: uint16Shader,\n  uint8: uint8Shader\n};\n\nconst dataUtilities = {\n  int16: int16DataUtilities,\n  int8: int8DataUtilities,\n  rgb: rgbDataUtilities,\n  uint16: uint16DataUtilities,\n  uint8: uint8DataUtilities\n};\n\nexport { shaders, dataUtilities };\n\n\n\n// WEBPACK FOOTER //\n// ./webgl/shaders/index.js","/* eslint no-bitwise: 0 */\n\nconst int16Shader = {};\n\n/**\n * Convert stored pixel data to image data.\n *\n * Pack int16 into three uint8 channels (r, g, b)\n *\n * @param {Image} image A Cornerstone Image Object\n * @returns {Uint8Array} The image data for use by the WebGL shader\n */\nfunction storedPixelDataToImageData (image) {\n\n  // Transfer image data to alpha and luminance channels of WebGL texture\n  // Credit to @jpambrun and @fernandojsg\n\n  // Pack int16 into three uint8 channels (r, g, b)\n  const pixelData = image.getPixelData();\n  const numberOfChannels = 3;\n  const data = new Uint8Array(image.width * image.height * numberOfChannels);\n  let offset = 0;\n\n  for (let i = 0; i < pixelData.length; i++) {\n    const val = Math.abs(pixelData[i]);\n\n    data[offset++] = val & 0xFF;\n    data[offset++] = val >> 8;\n    data[offset++] = pixelData[i] < 0 ? 0 : 1; // 0 For negative, 1 for positive\n  }\n\n  return data;\n}\n\nexport const int16DataUtilities = {\n  storedPixelDataToImageData\n};\n\nint16Shader.frag = 'precision mediump float;' +\n    'uniform sampler2D u_image;' +\n    'uniform float ww;' +\n    'uniform float wc;' +\n    'uniform float slope;' +\n    'uniform float intercept;' +\n    'uniform int invert;' +\n    'varying vec2 v_texCoord;' +\n\n    'void main() {' +\n        // Get texture\n        'vec4 color = texture2D(u_image, v_texCoord);' +\n\n        // Calculate luminance from packed texture\n        'float intensity = color.r*256.0 + color.g*65536.0;' +\n\n        'if (color.b == 0.0)' +\n            'intensity = -intensity;' +\n\n        // Rescale based on slope and window settings\n        'intensity = intensity * slope + intercept;' +\n        'float center0 = wc - 0.5;' +\n        'float width0 = max(ww, 1.0);' +\n        'intensity = (intensity - center0) / width0 + 0.5;' +\n\n        // Clamp intensity\n        'intensity = clamp(intensity, 0.0, 1.0);' +\n\n        // RGBA output\n        'gl_FragColor = vec4(intensity, intensity, intensity, 1.0);' +\n\n        // Apply any inversion necessary\n        'if (invert == 1)' +\n            'gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;' +\n    '}';\n\nexport { int16Shader };\n\n\n\n// WEBPACK FOOTER //\n// ./webgl/shaders/int16.js","const int8Shader = {};\n\n/**\n * Convert stored pixel data to image data.\n *\n * Store data in Uint8Array\n *\n * @param {Image} image A Cornerstone Image Object\n * @returns {Uint8Array} The image data for use by the WebGL shader\n */\nfunction storedPixelDataToImageData (image) {\n  // Transfer image data to alpha channel of WebGL texture\n  // Store data in Uint8Array\n  const pixelData = image.getPixelData();\n  const numberOfChannels = 2;\n  const data = new Uint8Array(image.width * image.height * numberOfChannels);\n  let offset = 0;\n\n  for (let i = 0; i < pixelData.length; i++) {\n    data[offset++] = pixelData[i];\n    data[offset++] = pixelData[i] < 0 ? 0 : 1; // 0 For negative, 1 for positive\n  }\n\n  return data;\n}\n\nexport const int8DataUtilities = {\n  storedPixelDataToImageData\n};\n\nint8Shader.frag = 'precision mediump float;' +\n    'uniform sampler2D u_image;' +\n    'uniform float ww;' +\n    'uniform float wc;' +\n    'uniform float slope;' +\n    'uniform float intercept;' +\n    'uniform int invert;' +\n    'varying vec2 v_texCoord;' +\n\n    'void main() {' +\n        // Get texture\n        'vec4 color = texture2D(u_image, v_texCoord);' +\n\n        // Calculate luminance from packed texture\n        'float intensity = color.r*256.;' +\n\n        'if (color.a == 0.0)' +\n            'intensity = -intensity;' +\n\n        // Rescale based on slope and window settings\n        'intensity = intensity * slope + intercept;' +\n        'float center0 = wc - 0.5;' +\n        'float width0 = max(ww, 1.0);' +\n        'intensity = (intensity - center0) / width0 + 0.5;' +\n\n        // Clamp intensity\n        'intensity = clamp(intensity, 0.0, 1.0);' +\n\n        // RGBA output\n        'gl_FragColor = vec4(intensity, intensity, intensity, 1.0);' +\n\n        // Apply any inversion necessary\n        'if (invert == 1)' +\n            'gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;' +\n    '}';\n\nexport { int8Shader };\n\n\n\n// WEBPACK FOOTER //\n// ./webgl/shaders/int8.js","const rgbShader = {};\n\n/**\n * Convert stored pixel data to image data.\n *\n * Pack RGB images into a 3-channel RGB texture\n *\n * @param {Image} image A Cornerstone Image Object\n * @returns {Uint8Array} The image data for use by the WebGL shader\n */\nfunction storedPixelDataToImageData (image) {\n  const minPixelValue = image.minPixelValue;\n  let canvasImageDataIndex = 0;\n  let storedPixelDataIndex = 0;\n  // Only 3 channels, since we use WebGL's RGB texture format\n  const numStoredPixels = image.width * image.height * 4;\n  const numOutputPixels = image.width * image.height * 3;\n  const storedPixelData = image.getPixelData();\n  const data = new Uint8Array(numOutputPixels);\n\n  // NOTE: As of Nov 2014, most javascript engines have lower performance when indexing negative indexes.\n  // We have a special code path for this case that improves performance.  Thanks to @jpambrun for this enhancement\n  if (minPixelValue < 0) {\n    while (storedPixelDataIndex < numStoredPixels) {\n      data[canvasImageDataIndex++] = storedPixelData[storedPixelDataIndex++] + (-minPixelValue); // Red\n      data[canvasImageDataIndex++] = storedPixelData[storedPixelDataIndex++] + (-minPixelValue); // Green\n      data[canvasImageDataIndex++] = storedPixelData[storedPixelDataIndex++] + (-minPixelValue); // Blue\n      storedPixelDataIndex += 1; // The stored pixel data has 4 channels\n    }\n  } else {\n    while (storedPixelDataIndex < numStoredPixels) {\n      data[canvasImageDataIndex++] = storedPixelData[storedPixelDataIndex++]; // Red\n      data[canvasImageDataIndex++] = storedPixelData[storedPixelDataIndex++]; // Green\n      data[canvasImageDataIndex++] = storedPixelData[storedPixelDataIndex++]; // Blue\n      storedPixelDataIndex += 1; // The stored pixel data has 4 channels\n    }\n  }\n\n  return data;\n}\n\nexport const rgbDataUtilities = {\n  storedPixelDataToImageData\n};\n\nrgbShader.frag = 'precision mediump float;' +\n    'uniform sampler2D u_image;' +\n    'uniform float ww;' +\n    'uniform float wc;' +\n    'uniform float slope;' +\n    'uniform float intercept;' +\n    'uniform float minPixelValue;' +\n    'uniform int invert;' +\n    'varying vec2 v_texCoord;' +\n\n    'void main() {' +\n\n        // Get texture\n        'vec3 color = texture2D(u_image, v_texCoord).xyz;' +\n\n        // Rescale based on slope and intercept\n        'color = color * 256.0 * slope + intercept;' +\n\n        // Apply window settings\n        'float center0 = wc - 0.5 - minPixelValue;' +\n        'float width0 = max(ww, 1.0);' +\n        'color = (color - center0) / width0 + 0.5;' +\n\n        // RGBA output\n        'gl_FragColor = vec4(color, 1);' +\n\n        // Apply any inversion necessary\n        'if (invert == 1)' +\n            'gl_FragColor.rgb = 1. - gl_FragColor.rgb;' +\n    '}';\n\nexport { rgbShader };\n\n\n\n// WEBPACK FOOTER //\n// ./webgl/shaders/rgb.js","/* eslint no-bitwise: 0 */\n\nconst uint16Shader = {};\n\n/**\n * Convert stored pixel data to image data.\n *\n * For uint16 pack uint16 into two uint8 channels (r and a).\n *\n * @param {Image} image A Cornerstone Image Object\n * @returns {Uint8Array} The image data for use by the WebGL shader\n */\nfunction storedPixelDataToImageData (image) {\n\n  // Transfer image data to alpha and luminance channels of WebGL texture\n  // Credit to @jpambrun and @fernandojsg\n\n  // Pack uint16 into two uint8 channels (r and a)\n  const pixelData = image.getPixelData();\n  const numberOfChannels = 2;\n  const data = new Uint8Array(image.width * image.height * numberOfChannels);\n  let offset = 0;\n\n  for (let i = 0; i < pixelData.length; i++) {\n    const val = pixelData[i];\n\n    data[offset++] = val & 0xFF;\n    data[offset++] = val >> 8;\n  }\n\n  return data;\n}\n\nexport const uint16DataUtilities = {\n  storedPixelDataToImageData\n};\n\nuint16Shader.frag = 'precision mediump float;' +\n    'uniform sampler2D u_image;' +\n    'uniform float ww;' +\n    'uniform float wc;' +\n    'uniform float slope;' +\n    'uniform float intercept;' +\n    'uniform int invert;' +\n    'varying vec2 v_texCoord;' +\n\n    'void main() {' +\n        // Get texture\n        'vec4 color = texture2D(u_image, v_texCoord);' +\n\n        // Calculate luminance from packed texture\n        'float intensity = color.r*256.0 + color.a*65536.0;' +\n\n        // Rescale based on slope and window settings\n        'intensity = intensity * slope + intercept;' +\n        'float center0 = wc - 0.5;' +\n        'float width0 = max(ww, 1.0);' +\n        'intensity = (intensity - center0) / width0 + 0.5;' +\n\n        // Clamp intensity\n        'intensity = clamp(intensity, 0.0, 1.0);' +\n\n        // RGBA output\n        'gl_FragColor = vec4(intensity, intensity, intensity, 1.0);' +\n\n        // Apply any inversion necessary\n        'if (invert == 1)' +\n            'gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;' +\n    '}';\n\nexport { uint16Shader };\n\n\n\n// WEBPACK FOOTER //\n// ./webgl/shaders/uint16.js","const uint8Shader = {};\n\n/**\n * Convert stored pixel data to image data. Here we will store\n * all data in the alpha channel.\n *\n * @param {Image} image A Cornerstone Image Object\n * @returns {Uint8Array} The image data for use by the WebGL shader\n */\nfunction storedPixelDataToImageData (image) {\n  // Transfer image data to alpha channel of WebGL texture\n  return image.getPixelData();\n}\n\nexport const uint8DataUtilities = {\n  storedPixelDataToImageData\n};\n\nuint8Shader.frag = 'precision mediump float;' +\n    'uniform sampler2D u_image;' +\n    'uniform float ww;' +\n    'uniform float wc;' +\n    'uniform float slope;' +\n    'uniform float intercept;' +\n    'uniform int invert;' +\n    'varying vec2 v_texCoord;' +\n\n    'void main() {' +\n        // Get texture\n        'vec4 color = texture2D(u_image, v_texCoord);' +\n\n        // Calculate luminance from packed texture\n        'float intensity = color.r*256.0;' +\n\n        // Rescale based on slope and window settings\n        'intensity = intensity * slope + intercept;' +\n        'float center0 = wc - 0.5;' +\n        'float width0 = max(ww, 1.0);' +\n        'intensity = (intensity - center0) / width0 + 0.5;' +\n\n        // Clamp intensity\n        'intensity = clamp(intensity, 0.0, 1.0);' +\n\n        // RGBA output\n        'gl_FragColor = vec4(intensity, intensity, intensity, 1.0);' +\n\n        // Apply any inversion necessary\n        'if (invert == 1)' +\n            'gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;' +\n    '}';\n\nexport { uint8Shader };\n\n\n\n// WEBPACK FOOTER //\n// ./webgl/shaders/uint8.js","export const vertexShader = 'attribute vec2 a_position;' +\n    'attribute vec2 a_texCoord;' +\n    'uniform vec2 u_resolution;' +\n    'varying vec2 v_texCoord;' +\n    'void main() {' +\n        'vec2 zeroToOne = a_position / u_resolution;' +\n        'vec2 zeroToTwo = zeroToOne * 2.0;' +\n        'vec2 clipSpace = zeroToTwo - 1.0;' +\n        'gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);' +\n        'v_texCoord = a_texCoord;' +\n    '}';\n\n\n\n// WEBPACK FOOTER //\n// ./webgl/vertexShader.js","import { getEnabledElement } from './enabledElements.js';\nimport getTransform from './internal/getTransform.js';\n\n/**\n * Converts a point in the canvas coordinate system to the pixel coordinate system\n * system.  This can be used to reset tools' image coordinates after modifications\n * have been made in canvas space (e.g. moving a tool by a few cm, independent of\n * image resolution).\n *\n * @param {HTMLElement} element The Cornerstone element within which the input point lies\n * @param {{x: Number, y: Number}} pt The input point in the canvas coordinate system\n *\n * @returns {{x: Number, y: Number}} The transformed point in the pixel coordinate system\n */\nexport default function (element, pt) {\n  const enabledElement = getEnabledElement(element);\n  const transform = getTransform(enabledElement);\n\n  transform.invert();\n\n  return transform.transformPoint(pt.x, pt.y);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./canvasToPixel.js","import { getEnabledElements } from './enabledElements.js';\r\nimport triggerEvent from './triggerEvent.js';\r\n\r\n\r\n/**\r\n *  Disable an HTML element for further use in Cornerstone\r\n *\r\n * @param {HTMLElement} element An HTML Element enabled for Cornerstone\r\n * @returns {void}\r\n */\r\nexport default function (element) {\r\n  if (element === undefined) {\r\n    throw new Error('disable: element must not be undefined');\r\n  }\r\n\r\n  // Search for this element in this list of enabled elements\r\n  const enabledElements = getEnabledElements();\r\n\r\n  for (let i = 0; i < enabledElements.length; i++) {\r\n    if (enabledElements[i].element === element) {\r\n      // We found it!\r\n\r\n      // Fire an event so dependencies can cleanup\r\n      const eventData = {\r\n        element\r\n      };\r\n\r\n      triggerEvent(element, 'CornerstoneElementDisabled', eventData);\r\n\r\n      // Remove the child DOM elements that we created (e.g.canvas)\r\n      enabledElements[i].element.removeChild(enabledElements[i].canvas);\r\n      enabledElements[i].canvas = undefined;\r\n\r\n      // Remove this element from the list of enabled elements\r\n      enabledElements.splice(i, 1);\r\n\r\n      break;\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./disable.js","import { getEnabledElement } from './enabledElements.js';\nimport getDefaultViewport from './internal/getDefaultViewport.js';\nimport updateImage from './updateImage.js';\nimport now from './internal/now.js';\nimport { setLayerImage } from './layers.js';\nimport triggerEvent from './triggerEvent.js';\nimport applyTransform from './applyTransform.js';\n\n/**\n * Sets a new image object for a given element.\n *\n * Will also apply an optional viewport setting.\n *\n * @param {HTMLElement} element An HTML Element enabled for Cornerstone\n * @param {Object} image An Image loaded by a Cornerstone Image Loader\n * @param {Object} [viewport] A set of Cornerstone viewport parameters\n * @returns {void}\n */\nexport default function (element, image, viewport) {\n  if (element === undefined) {\n    throw new Error('displayImage: parameter element must not be undefined');\n  }\n  if (image === undefined) {\n    throw new Error('displayImage: parameter image must not be undefined');\n  }\n\n  const enabledElement = getEnabledElement(element);\n  const canvas = enabledElement.canvas;\n  const oldImage = enabledElement.image;\n\n  enabledElement.image = image;\n\n  if (enabledElement.layers && enabledElement.layers.length) {\n    setLayerImage(element, image);\n  }\n\n  if (enabledElement.viewport === undefined) {\n    enabledElement.viewport = getDefaultViewport(enabledElement);\n  }\n\n  // Merge viewport\n  if (viewport) {\n    for (const attrname in viewport) {\n      if (viewport[attrname] !== null) {\n        enabledElement.viewport[attrname] = viewport[attrname];\n      }\n    }\n  }\n\n  let frameRate;\n\n  if (enabledElement.lastImageTimeStamp !== undefined) {\n    const timeSinceLastImage = now() - enabledElement.lastImageTimeStamp;\n\n    frameRate = (1000 / timeSinceLastImage).toFixed();\n  }\n\n  enabledElement.lastImageTimeStamp = now();\n\n  const newImageEventData = {\n    viewport: enabledElement.viewport,\n    element: enabledElement.element,\n    image: enabledElement.image,\n    oldImage,\n    enabledElement,\n    frameRate\n  };\n\n  // Avoid setting the same value because it flashes the canvas with IE and Edge\n  if (canvas.width !== image.columns) {\n    canvas.width = image.columns;\n    canvas.style.width = `${image.columns}px`;\n  }\n  // Avoid setting the same value because it flashes the canvas with IE and Edge\n  if (canvas.height !== image.rows) {\n    canvas.height = image.rows;\n    canvas.style.height = `${image.rows}px`;\n  }\n\n  applyTransform(enabledElement);\n\n  triggerEvent(enabledElement.element, 'CornerstoneNewImage', newImageEventData);\n\n  updateImage(element);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./displayImage.js","function s4 () {\n  return Math.floor((1 + Math.random()) * 0x10000).toString(16).\n    substring(1);\n}\n\n/**\n * Generate a unique identifier\n *\n * @return {string} A unique identifier\n */\nexport default function () {\n  return `${s4() + s4()}-${s4()}-${s4()}-${\n    s4()}-${s4()}${s4()}${s4()}`;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./internal/guid.js","/**\n * This module is responsible for immediately drawing an enabled element\n */\n\nimport { getEnabledElement } from './enabledElements.js';\nimport drawImage from './internal/drawImage.js';\n\n/**\n * Immediately draws the enabled element\n *\n * @param {HTMLElement} element An HTML Element enabled for Cornerstone\n * @returns {void}\n */\nexport default function (element) {\n  const enabledElement = getEnabledElement(element);\n\n  if (enabledElement.image === undefined) {\n    throw new Error('draw: image has not been loaded yet');\n  }\n\n  drawImage(enabledElement);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./draw.js","/**\n * This module is responsible for drawing invalidated enabled elements\n */\n\nimport { getEnabledElements } from './enabledElements.js';\nimport drawImage from './internal/drawImage.js';\n\n/**\n * Draws all invalidated enabled elements and clears the invalid flag after drawing it\n *\n * @returns {void}\n */\nexport default function () {\n  const enabledElements = getEnabledElements();\n\n  for (let i = 0; i < enabledElements.length; i++) {\n    const ee = enabledElements[i];\n\n    if (ee.invalid === true) {\n      drawImage(ee, true);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./drawInvalidated.js","import { addEnabledElement } from './enabledElements.js';\r\nimport resize from './resize.js';\r\nimport drawImageSync from './internal/drawImageSync.js';\r\nimport requestAnimationFrame from './internal/requestAnimationFrame.js';\r\nimport webGL from './webgl/index.js';\r\nimport triggerEvent from './triggerEvent.js';\r\n\r\n/**\r\n * This module is responsible for enabling an element to display images with cornerstone\r\n */\r\n\r\nfunction hasImageOrLayers (enabledElement) {\r\n  return enabledElement.image !== undefined || enabledElement.layers.length;\r\n}\r\n\r\n\r\n/**\r\n * Enable an HTML Element for use in Cornerstone\r\n *\r\n * @param {HTMLElement} element An HTML Element enabled for Cornerstone\r\n * @param {Object} options Options for the enabledElement\r\n *\r\n * @return {void}\r\n */\r\nexport default function (element, options) {\r\n  if (element === undefined) {\r\n    throw new Error('enable: parameter element cannot be undefined');\r\n  }\r\n\r\n  // If this enabled element has the option set for WebGL, we should\r\n  // Check if this device actually supports it\r\n  if (options && options.renderer && options.renderer.toLowerCase() === 'webgl') {\r\n    if (webGL.renderer.isWebGLAvailable()) {\r\n      // If WebGL is available on the device, initialize the renderer\r\n      // And return the renderCanvas from the WebGL rendering path\r\n      webGL.renderer.initRenderer();\r\n      options.renderer = 'webgl';\r\n    } else {\r\n      // If WebGL is not available on this device, we will fall back\r\n      // To using the Canvas renderer\r\n      console.error('WebGL not available, falling back to Canvas renderer');\r\n      delete options.renderer;\r\n    }\r\n  }\r\n\r\n  const canvas = document.createElement('canvas');\r\n\r\n  canvas.style.position = 'absolute';\r\n  canvas.style.top = '50%';\r\n  canvas.style.left = '50%';\r\n\r\n  element.appendChild(canvas);\r\n\r\n  const enabledElement = {\r\n    element,\r\n    canvas,\r\n    image: undefined, // Will be set once image is loaded\r\n    invalid: false, // True if image needs to be drawn, false if not\r\n    needsRedraw: true,\r\n    options,\r\n    layers: [],\r\n    data: {},\r\n    renderingTools: {}\r\n  };\r\n\r\n  addEnabledElement(enabledElement);\r\n\r\n  resize(element, true);\r\n\r\n  /**\r\n   * Draw the image immediately\r\n   *\r\n   * @param {DOMHighResTimeStamp} timestamp The current time for when requestAnimationFrame starts to fire callbacks\r\n   * @returns {void}\r\n   */\r\n  function draw (timestamp) {\r\n    if (enabledElement.canvas === undefined) {\r\n      return;\r\n    }\r\n\r\n    const eventDetails = {\r\n      enabledElement,\r\n      timestamp\r\n    };\r\n\r\n    triggerEvent(enabledElement.element, 'CornerstonePreRender', eventDetails);\r\n\r\n    if (enabledElement.needsRedraw && hasImageOrLayers(enabledElement)) {\r\n      drawImageSync(enabledElement, enabledElement.invalid);\r\n    }\r\n\r\n    requestAnimationFrame(draw);\r\n  }\r\n\r\n  draw();\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./enable.js","import now from './now.js';\r\nimport drawCompositeImage from './drawCompositeImage.js';\r\nimport { renderColorImage } from '../rendering/renderColorImage.js';\r\nimport { renderGrayscaleImage } from '../rendering/renderGrayscaleImage.js';\r\nimport { renderPseudoColorImage } from '../rendering/renderPseudoColorImage.js';\r\nimport { renderLabelMapImage } from '../rendering/renderLabelMapImage.js';\r\nimport doesImageNeedToBeRendered from '../rendering/doesImageNeedToBeRendered.js';\r\nimport triggerEvent from '../triggerEvent.js';\r\n\r\n\r\n/**\r\n * Draw an image to a given enabled element synchronously\r\n *\r\n * @param {EnabledElement} enabledElement An enabled element to draw into\r\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\r\n * @returns {void}\r\n */\r\nexport default function (enabledElement, invalidated) {\r\n  const image = enabledElement.image;\r\n  const element = enabledElement.element;\r\n  const layers = enabledElement.layers || [];\r\n\r\n  // Check if enabledElement can be redrawn\r\n  if (!enabledElement.canvas || !(enabledElement.image || layers.length)) {\r\n    return;\r\n  }\r\n\r\n  // Start measuring the time needed to draw the image/layers\r\n  const start = now();\r\n\r\n  image.stats = {\r\n    lastGetPixelDataTime: -1.0,\r\n    lastStoredPixelDataToCanvasImageDataTime: -1.0,\r\n    lastPutImageDataTime: -1.0,\r\n    lastRenderTime: -1.0,\r\n    lastLutGenerateTime: -1.0\r\n  };\r\n\r\n  let imageWasRendered = false;\r\n\r\n  if (layers && layers.length) {\r\n    imageWasRendered = drawCompositeImage(enabledElement, invalidated);\r\n  } else if (image) {\r\n    let render = image.render;\r\n\r\n    if (!render) {\r\n      if (enabledElement.viewport.colormap &&\r\n          enabledElement.viewport.colormap !== '' &&\r\n          enabledElement.image.labelmap === true) {\r\n        render = renderLabelMapImage;\r\n      } else if (enabledElement.viewport.colormap && enabledElement.viewport.colormap !== '') {\r\n        render = renderPseudoColorImage;\r\n      } else if (image.color) {\r\n        render = renderColorImage;\r\n      } else {\r\n        render = renderGrayscaleImage;\r\n      }\r\n    }\r\n\r\n    if (doesImageNeedToBeRendered(enabledElement, image) === true || invalidated === true) {\r\n      console.log('calling Render');\r\n      render(enabledElement, invalidated);\r\n      imageWasRendered = true;\r\n    }\r\n  }\r\n\r\n  if (!imageWasRendered) {\r\n    return;\r\n  }\r\n\r\n  // Calculate how long it took to draw the image/layers\r\n  const renderTimeInMs = now() - start;\r\n\r\n  const eventData = {\r\n    viewport: enabledElement.viewport,\r\n    element,\r\n    image,\r\n    enabledElement,\r\n    canvasContext: enabledElement.canvas.getContext('2d'),\r\n    renderTimeInMs\r\n  };\r\n\r\n  image.stats.lastRenderTime = renderTimeInMs;\r\n\r\n  enabledElement.invalid = false;\r\n  enabledElement.needsRedraw = false;\r\n\r\n  triggerEvent(element, 'CornerstoneImageRendered', eventData);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./internal/drawImageSync.js","import { getLayers, getActiveLayer, getVisibleLayers } from '../layers.js';\nimport { addGrayscaleLayer } from '../rendering/renderGrayscaleImage.js';\nimport { addColorLayer } from '../rendering/renderColorImage.js';\nimport { addPseudoColorLayer } from '../rendering/renderPseudoColorImage.js';\nimport { addLabelMapLayer } from '../rendering/renderLabelMapImage.js';\nimport setToPixelCoordinateSystem from '../setToPixelCoordinateSystem.js';\n\n// This is used to keep each of the layers' viewports in sync with the active layer\nconst originalViewportScale = {};\n\nfunction getViewportRatio (baseLayerId, targetLayerId) {\n  return originalViewportScale[targetLayerId] / originalViewportScale[baseLayerId];\n}\n\n// Sync all viewports based on active layer's viewport\nfunction syncViewports (layers, activeLayer) {\n  // If we intend to keep the viewport's scale, translation and rotation in sync,\n  // loop through the layers\n  layers.forEach((layer) => {\n    // Don't do anything to the active layer\n    // Don't do anything if this layer has no viewport\n    if (layer === activeLayer ||\n        !layer.viewport ||\n        !activeLayer.viewport) {\n      return;\n    }\n\n    if (!originalViewportScale[layer.layerId]) {\n      originalViewportScale[layer.layerId] = layer.viewport.scale;\n    }\n\n    const viewportRatio = getViewportRatio(activeLayer.layerId, layer.layerId);\n\n    // Update the layer's translation and scale to keep them in sync with the first image\n    // based on the ratios between the images\n    layer.viewport.scale = activeLayer.viewport.scale * viewportRatio;\n    layer.viewport.rotation = activeLayer.viewport.rotation;\n    layer.viewport.translation = {\n      x: (activeLayer.viewport.translation.x / viewportRatio),\n      y: (activeLayer.viewport.translation.y / viewportRatio)\n    };\n    layer.viewport.hflip = activeLayer.viewport.hflip;\n    layer.viewport.vflip = activeLayer.viewport.vflip;\n  });\n}\n\n/**\n * Internal function to render all layers for a Cornerstone enabled element\n *\n * @param {CanvasRenderingContext2D} context Canvas context to draw upon\n * @param {EnabledElementLayer[]} layers The array of all layers for this enabled element\n * @param {Boolean} invalidated A boolean whether or not this image has been invalidated and must be redrawn\n * @returns {void}\n */\nfunction renderLayers (context, layers, invalidated) {\n  // Loop through each layer and draw it to the canvas\n  layers.forEach((layer, index) => {\n    if (!layer.image) {\n      return;\n    }\n\n    context.save();\n\n    // Set the layer's canvas to the pixel coordinate system\n    layer.canvas = context.canvas;\n    setToPixelCoordinateSystem(layer, context);\n\n    // Render into the layer's canvas\n    const colormap = layer.viewport.colormap || layer.options.colormap;\n    const labelmap = layer.viewport.labelmap;\n    const isInvalid = layer.invalid || invalidated;\n\n    if (colormap && colormap !== '' && labelmap === true) {\n      addLabelMapLayer(layer, isInvalid);\n    } else if (colormap && colormap !== '') {\n      addPseudoColorLayer(layer, isInvalid);\n    } else if (layer.image.color === true) {\n      addColorLayer(layer, isInvalid);\n    } else {\n      // If this is the base layer, use the alpha channel for rendering of the grayscale image\n      const useAlphaChannel = (index === 0);\n\n      addGrayscaleLayer(layer, isInvalid, useAlphaChannel);\n    }\n\n    // Apply any global opacity settings that have been defined for this layer\n    if (layer.options && layer.options.opacity) {\n      context.globalAlpha = layer.options.opacity;\n    } else {\n      context.globalAlpha = 1;\n    }\n\n    if (layer.options && layer.options.fillStyle) {\n      context.fillStyle = layer.options.fillStyle;\n    }\n\n    // Set the pixelReplication property before drawing from the layer into the\n    // composite canvas\n    context.imageSmoothingEnabled = !layer.viewport.pixelReplication;\n    context.mozImageSmoothingEnabled = context.imageSmoothingEnabled;\n\n    // Draw from the current layer's canvas onto the enabled element's canvas\n    const { width, height } = layer.image;\n\n    context.drawImage(layer.canvas, 0, 0, width, height, 0, 0, width, height);\n    context.restore();\n\n    layer.invalid = false;\n  });\n}\n\n/**\n * Internal API function to draw a composite image to a given enabled element\n *\n * @param {EnabledElement} enabledElement An enabled element to draw into\n * @param {Boolean} invalidated - true if pixel data has been invalidated and cached rendering should not be used\n * @returns {void}\n */\nexport default function (enabledElement, invalidated) {\n  const element = enabledElement.element;\n  const allLayers = getLayers(element);\n  const activeLayer = getActiveLayer(element);\n  const visibleLayers = getVisibleLayers(element);\n  const resynced = !enabledElement.lastSyncViewportsState && enabledElement.syncViewports;\n\n  // This state will help us to determine if the user has re-synced the\n  // layers allowing us to make a new copy of the viewports\n  enabledElement.lastSyncViewportsState = enabledElement.syncViewports;\n\n  // Stores a copy of all viewports if the user has just synced them then we can use the\n  // copies to calculate anything later (ratio, translation offset, rotation offset, etc)\n  if (resynced) {\n    allLayers.forEach(function (layer) {\n      if (layer.viewport) {\n        originalViewportScale[layer.layerId] = layer.viewport.scale;\n      }\n    });\n  }\n\n  // Sync all viewports in case it's activated\n  if (enabledElement.syncViewports === true) {\n    syncViewports(visibleLayers, activeLayer);\n  }\n\n  // Get the enabled element's canvas so we can draw to it\n  const context = enabledElement.canvas.getContext('2d');\n\n  context.setTransform(1, 0, 0, 1, 0, 0);\n\n  // Clear the canvas\n  context.fillStyle = 'black';\n  context.fillRect(0, 0, enabledElement.canvas.width, enabledElement.canvas.height);\n\n  // Render all visible layers\n  renderLayers(context, visibleLayers, invalidated);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./internal/drawCompositeImage.js","import { getEnabledElement } from './enabledElements.js';\n\n/**\n * Retrieves any data for a Cornerstone enabledElement for a specific string\n * dataType\n *\n * @param {HTMLElement} element An HTML Element enabled for Cornerstone\n * @param {string} dataType A string name for an arbitrary set of data\n * @returns {*} Whatever data is stored for this enabled element\n */\nexport function getElementData (element, dataType) {\n  const ee = getEnabledElement(element);\n\n  if (ee.data.hasOwnProperty(dataType) === false) {\n    ee.data[dataType] = {};\n  }\n\n  return ee.data[dataType];\n}\n\n/**\n * Clears any data for a Cornerstone enabledElement for a specific string\n * dataType\n *\n * @param {HTMLElement} element An HTML Element enabled for Cornerstone\n * @param {string} dataType A string name for an arbitrary set of data\n *\n * @returns {void}\n */\nexport function removeElementData (element, dataType) {\n  const ee = getEnabledElement(element);\n\n  delete ee.data[dataType];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./enabledElementData.js","import { getEnabledElement } from './enabledElements.js';\nimport getDefaultViewport from './internal/getDefaultViewport.js';\n\n/**\n * Returns a default viewport for display the specified image on the specified\n * enabled element.  The default viewport is fit to window\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @param {Image} image A Cornerstone Image Object\n *\n * @returns {Viewport} The default viewport for the image\n */\nexport default function (element, image) {\n  const enabledElement = getEnabledElement(element);\n\n  return getDefaultViewport(enabledElement);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./getDefaultViewportForImage.js","import { getEnabledElement } from './enabledElements.js';\n\n/**\n * Returns the currently displayed image for an element or undefined if no image has\n * been displayed yet\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @returns {Image} The Cornerstone Image Object displayed in this element\n */\nexport default function (element) {\n  const enabledElement = getEnabledElement(element);\n\n  return enabledElement.image;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./getImage.js","import { getEnabledElement } from './enabledElements.js';\nimport getStoredPixels from './getStoredPixels.js';\nimport getModalityLUT from './internal/getModalityLUT.js';\n\n/**\n * Retrieves an array of pixels from a rectangular region with modality LUT transformation applied\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @param {Number} x The x coordinate of the top left corner of the sampling rectangle in image coordinates\n * @param {Number} y The y coordinate of the top left corner of the sampling rectangle in image coordinates\n * @param {Number} width The width of the of the sampling rectangle in image coordinates\n * @param {Number} height The height of the of the sampling rectangle in image coordinates\n * @returns {Array} The modality pixel value of the pixels in the sampling rectangle\n */\nexport default function (element, x, y, width, height) {\n  const storedPixels = getStoredPixels(element, x, y, width, height);\n  const ee = getEnabledElement(element);\n  const mlutfn = getModalityLUT(ee.image.slope, ee.image.intercept, ee.viewport.modalityLUT);\n\n  return storedPixels.map(mlutfn);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./getPixels.js","import { getEnabledElement } from './enabledElements.js';\n\n/**\n * Retrieves the viewport for the specified enabled element\n *\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\n * @returns {Viewport|undefined} The Cornerstone Viewport settings for this element, if they exist. Otherwise, undefined\n */\nexport default function (element) {\n  const enabledElement = getEnabledElement(element);\n  const viewport = enabledElement.viewport;\n\n  if (viewport === undefined) {\n    return;\n  }\n\n  // Return a copy of the viewport\n  return Object.assign({}, viewport);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./getViewport.js","import { getImagePromise, putImagePromise } from './imageCache.js';\r\nimport events from './events.js';\r\nimport triggerEvent from './triggerEvent.js';\r\n\r\n/**\r\n * This module deals with ImageLoaders, loading images and caching images\r\n */\r\n\r\n\r\nconst imageLoaders = {};\r\n\r\nlet unknownImageLoader;\r\n\r\n/**\r\n * Load an image using a registered Cornerstone Image Loader.\r\n *\r\n * The image loader that is used will be\r\n * determined by the image loader scheme matching against the imageId.\r\n *\r\n * @param {String} imageId A Cornerstone Image Object's imageId\r\n * @param {Object} [options] Options to be passed to the Image Loader\r\n *\r\n * @returns {Deferred} A jQuery Deferred which can be used to act after an image is loaded or loading fails\r\n */\r\nfunction loadImageFromImageLoader (imageId, options) {\r\n  const colonIndex = imageId.indexOf(':');\r\n  const scheme = imageId.substring(0, colonIndex);\r\n  const loader = imageLoaders[scheme];\r\n  let imagePromise;\r\n\r\n  if (loader === undefined || loader === null) {\r\n    if (unknownImageLoader !== undefined) {\r\n      imagePromise = unknownImageLoader(imageId);\r\n\r\n      return imagePromise;\r\n    }\r\n\r\n    throw new Error('loadImageFromImageLoader: no image loader for imageId');\r\n  }\r\n\r\n  imagePromise = loader(imageId, options);\r\n\r\n  // Broadcast an image loaded event once the image is loaded\r\n  imagePromise.then(function (image) {\r\n    triggerEvent(events, 'CornerstoneImageLoaded', { image });\r\n  });\r\n\r\n  return imagePromise;\r\n}\r\n\r\n/**\r\n * Loads an image given an imageId and optional priority and returns a promise which will resolve to\r\n * the loaded image object or fail if an error occurred.  The loaded image is not stored in the cache.\r\n *\r\n * @param {String} imageId A Cornerstone Image Object's imageId\r\n * @param {Object} [options] Options to be passed to the Image Loader\r\n *\r\n * @returns {Deferred} A jQuery Deferred which can be used to act after an image is loaded or loading fails\r\n */\r\nexport function loadImage (imageId, options) {\r\n  if (imageId === undefined) {\r\n    throw new Error('loadImage: parameter imageId must not be undefined');\r\n  }\r\n\r\n  let imagePromise = getImagePromise(imageId);\r\n\r\n  if (imagePromise !== undefined) {\r\n    return imagePromise;\r\n  }\r\n\r\n  imagePromise = loadImageFromImageLoader(imageId, options);\r\n\r\n  return imagePromise;\r\n}\r\n\r\n//\r\n\r\n/**\r\n * Loads an image given an imageId and optional priority and returns a promise which will resolve to\r\n * the loaded image object or fail if an error occurred. The image is stored in the cache.\r\n *\r\n * @param {String} imageId A Cornerstone Image Object's imageId\r\n * @param {Object} [options] Options to be passed to the Image Loader\r\n *\r\n * @returns {Deferred} A jQuery Deferred which can be used to act after an image is loaded or loading fails\r\n */\r\nexport function loadAndCacheImage (imageId, options) {\r\n  if (imageId === undefined) {\r\n    throw new Error('loadAndCacheImage: parameter imageId must not be undefined');\r\n  }\r\n\r\n  let imagePromise = getImagePromise(imageId);\r\n\r\n  if (imagePromise !== undefined) {\r\n    return imagePromise;\r\n  }\r\n\r\n  imagePromise = loadImageFromImageLoader(imageId, options);\r\n\r\n  putImagePromise(imageId, imagePromise);\r\n\r\n  return imagePromise;\r\n}\r\n\r\n/**\r\n * Registers an imageLoader plugin with cornerstone for the specified scheme\r\n *\r\n * @param {String} scheme The scheme to use for this image loader (e.g. 'dicomweb', 'wadouri', 'http')\r\n * @param {Function} imageLoader A Cornerstone Image Loader function\r\n * @returns {void}\r\n */\r\nexport function registerImageLoader (scheme, imageLoader) {\r\n  imageLoaders[scheme] = imageLoader;\r\n}\r\n\r\n/**\r\n * Registers a new unknownImageLoader and returns the previous one\r\n *\r\n * @param {Function} imageLoader A Cornerstone Image Loader\r\n *\r\n * @returns {Function|Undefined} The previous Unknown Image Loader\r\n */\r\nexport function registerUnknownImageLoader (imageLoader) {\r\n  const oldImageLoader = unknownImageLoader;\r\n\r\n  unknownImageLoader = imageLoader;\r\n\r\n  return oldImageLoader;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./imageLoader.js","import { getEnabledElement } from './enabledElements.js';\r\nimport triggerEvent from './triggerEvent.js';\r\n\r\n/**\r\n * This module contains a function to make an image is invalid\r\n */\r\n\r\n/**\r\n * Sets the invalid flag on the enabled element and fire an event\r\n * @param {HTMLElement} element The DOM element enabled for Cornerstone\r\n * @returns {void}\r\n */\r\nexport default function (element) {\r\n  const enabledElement = getEnabledElement(element);\r\n\r\n  enabledElement.invalid = true;\r\n  enabledElement.needsRedraw = true;\r\n  const eventData = {\r\n    element\r\n  };\r\n\r\n  triggerEvent(element, 'CornerstoneInvalidated', eventData);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./invalidate.js","/**\n * This module contains a function to immediately invalidate an image\n */\n\nimport { getEnabledElementsByImageId } from './enabledElements.js';\nimport drawImage from './internal/drawImage.js';\n\n/**\n * Forces the image to be updated/redrawn for the all enabled elements\n * displaying the specified imageId\n *\n * @param {string} imageId The imageId of the Cornerstone Image Object to redraw\n * @returns {void}\n */\nexport default function (imageId) {\n\n  const enabledElements = getEnabledElementsByImageId(imageId);\n\n  enabledElements.forEach(function (enabledElement) {\n    drawImage(enabledElement, true);\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./invalidateImageId.js","import { getEnabledElement } from './enabledElements.js';\nimport getTransform from './internal/getTransform.js';\n\n/**\n * Converts a point in the page coordinate system to the pixel coordinate\n * system\n *\n * @param {HTMLElement} element The Cornerstone element within which the input point lies\n * @param {Number} pageX The x value in the page coordinate system\n * @param {Number} pageY The y value in the page coordinate system\n *\n * @returns {{x: Number, y: Number}} The transformed point in the pixel coordinate system\n */\nexport default function (element, pageX, pageY) {\n  const enabledElement = getEnabledElement(element);\n\n  if (enabledElement.image === undefined) {\n    throw new Error('image has not been loaded yet');\n  }\n\n  // Convert the pageX and pageY to the canvas client coordinates\n  const rect = element.getBoundingClientRect();\n  const clientX = pageX - rect.left - window.pageXOffset;\n  const clientY = pageY - rect.top - window.pageYOffset;\n\n  const pt = { x: clientX,\n    y: clientY };\n  const transform = getTransform(enabledElement);\n\n  transform.invert();\n\n  return transform.transformPoint(pt.x, pt.y);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./pageToPixel.js","import { getEnabledElement } from './enabledElements.js';\nimport getTransform from './internal/getTransform.js';\n\n/**\n * Converts a point in the pixel coordinate system to the canvas coordinate system\n * system.  This can be used to render using canvas context without having the weird\n * side effects that come from scaling and non square pixels\n *\n * @param {HTMLElement} element An HTML Element enabled for Cornerstone\n * @param {{x: Number, y: Number}} pt The transformed point in the pixel coordinate system\n *\n * @returns {{x: Number, y: Number}} The input point in the canvas coordinate system\n */\nexport default function (element, pt) {\n  const enabledElement = getEnabledElement(element);\n  const transform = getTransform(enabledElement);\n\n\n  return transform.transformPoint(pt.x, pt.y);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./pixelToCanvas.js","import { getEnabledElement } from './enabledElements.js';\nimport getDefaultViewport from './internal/getDefaultViewport.js';\nimport updateImage from './updateImage.js';\n\n/**\n * Resets the viewport to the default settings\n *\n * @param {HTMLElement} element An HTML Element enabled for Cornerstone\n * @returns {void}\n */\nexport default function (element) {\n  const enabledElement = getEnabledElement(element);\n\n  enabledElement.viewport = getDefaultViewport(enabledElement);\n  updateImage(element);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./reset.js","import { getEnabledElement } from './enabledElements.js';\nimport updateImage from './updateImage.js';\nimport applyTransform from \"./applyTransform.js\";\n\nconst MIN_WINDOW_WIDTH = 0.000001;\nconst MIN_VIEWPORT_SCALE = 0.0001;\n\n/**\n * Sets the viewport for an element and corrects invalid values\n *\n * @param {HTMLElement} element - DOM element of the enabled element\n * @param {Viewport} viewport - Object containing the viewport properties\n * @returns {void}\n */\nexport default function (element, viewport) {\n  const enabledElement = getEnabledElement(element);\n\n  enabledElement.viewport.translation.x = viewport.translation.x;\n  enabledElement.viewport.translation.y = viewport.translation.y;\n  enabledElement.viewport.voi.windowCenter = viewport.voi.windowCenter;\n  enabledElement.viewport.invert = viewport.invert;\n  enabledElement.viewport.pixelReplication = viewport.pixelReplication;\n  enabledElement.viewport.rotation = viewport.rotation;\n  enabledElement.viewport.hflip = viewport.hflip;\n  enabledElement.viewport.vflip = viewport.vflip;\n  enabledElement.viewport.modalityLUT = viewport.modalityLUT;\n  enabledElement.viewport.voiLUT = viewport.voiLUT;\n  enabledElement.viewport.colormap = viewport.colormap;\n  enabledElement.viewport.labelmap = viewport.labelmap;\n\n  // Prevent window width from being too small (note that values close to zero are valid and can occur with\n  // PET images in particular)\n  enabledElement.viewport.voi.windowWidth = Math.max(viewport.voi.windowWidth, MIN_WINDOW_WIDTH);\n\n  // Prevent scale from getting too small\n  enabledElement.viewport.scale = Math.max(viewport.scale, MIN_VIEWPORT_SCALE);\n\n  // Normalize the rotation value to a positive rotation in degrees\n  enabledElement.viewport.rotation %= 360;\n  if (enabledElement.viewport.rotation < 0) {\n    enabledElement.viewport.rotation += 360;\n  }\n\n  element.style.background = enabledElement.viewport.invert ? '#fff' : '#000';\n\n  applyTransform(enabledElement);\n\n  // Force the image to be updated since the viewport has been modified\n  updateImage(element);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./setViewport.js","import { renderColorImage } from './renderColorImage.js';\nimport { renderGrayscaleImage } from './renderGrayscaleImage.js';\nimport { renderWebImage } from './renderWebImage.js';\n\nexport default {\n  colorImage: renderColorImage,\n  grayscaleImage: renderGrayscaleImage,\n  webImage: renderWebImage\n};\n\n\n\n// WEBPACK FOOTER //\n// ./rendering/index.js","// This module defines a way to access various metadata about an imageId.  This layer of abstraction exists\n// So metadata can be provided in different ways (e.g. by parsing DICOM P10 or by a WADO-RS document)\n\nconst providers = [];\n\n/**\n * Adds a metadata provider with the specified priority\n * @param {Function} provider Metadata provider function\n * @param {Number} [priority=0] - 0 is default/normal, > 0 is high, < 0 is low\n *\n * @returns {void}\n */\nexport function addProvider (provider, priority = 0) {\n  let i;\n\n  // Find the right spot to insert this provider based on priority\n  for (i = 0; i < providers.length; i++) {\n    if (providers[i].priority <= priority) {\n      break;\n    }\n  }\n\n  // Insert the decode task at position i\n  providers.splice(i, 0, {\n    priority,\n    provider\n  });\n}\n\n/**\n * Removes the specified provider\n *\n * @param {Function} provider Metadata provider function\n *\n * @returns {void}\n */\nexport function removeProvider (provider) {\n  for (let i = 0; i < providers.length; i++) {\n    if (providers[i].provider === provider) {\n      providers.splice(i, 1);\n\n      break;\n    }\n  }\n}\n\n/**\n * Gets metadata from the registered metadata providers.  Will call each one from highest priority to lowest\n * until one responds\n *\n * @param {String} type The type of metadata requested from the metadata store\n * @param {String} imageId The Cornerstone Image Object's imageId\n *\n * @returns {*} The metadata retrieved from the metadata store\n */\nfunction getMetaData (type, imageId) {\n  // Invoke each provider in priority order until one returns something\n  for (let i = 0; i < providers.length; i++) {\n    const result = providers[i].provider(type, imageId);\n\n    if (result !== undefined) {\n      return result;\n    }\n  }\n}\n\nexport default {\n  addProvider,\n  removeProvider,\n  get: getMetaData\n};\n\n\n\n// WEBPACK FOOTER //\n// ./metaData.js","import { getEnabledElement } from './enabledElements.js';\nimport pixelDataToFalseColorData from './pixelDataToFalseColorData.js';\nimport { getColormap } from './colors/colormap.js';\n\n/**\n * Retrieves the minimum and maximum pixel values from an Array of pixel data\n *\n * @param {Array} pixelData The input pixel data array\n *\n * @returns {{minPixelValue: Number, maxPixelValue: Number}} The minimum and maximum pixel values in the input Array\n */\nfunction getPixelValues (pixelData) {\n  let minPixelValue = Number.MAX_VALUE;\n  let maxPixelValue = Number.MIN_VALUE;\n  const len = pixelData.length;\n  let pixel;\n\n  for (let i = 0; i < len; i++) {\n    pixel = pixelData[i];\n    minPixelValue = minPixelValue < pixel ? minPixelValue : pixel;\n    maxPixelValue = maxPixelValue > pixel ? maxPixelValue : pixel;\n  }\n\n  return {\n    minPixelValue,\n    maxPixelValue\n  };\n}\n\n/**\n * Retrieve a function that will allow an image object to be reset to its original form\n * after a false color mapping transformation\n *\n * @param {Image} image A Cornerstone Image Object\n *\n * @return {Function} A function for resetting an Image Object to its original form\n */\nfunction getRestoreImageMethod (image) {\n  if (image.restore) {\n    return image.restore;\n  }\n\n  const color = image.color;\n  const rgba = image.rgba;\n  const cachedLut = image.cachedLut;\n  const slope = image.slope;\n  const windowWidth = image.windowWidth;\n  const windowCenter = image.windowCenter;\n  const minPixelValue = image.minPixelValue;\n  const maxPixelValue = image.maxPixelValue;\n\n  return function () {\n    image.color = color;\n    image.rgba = rgba;\n    image.cachedLut = cachedLut;\n    image.slope = slope;\n    image.windowWidth = windowWidth;\n    image.windowCenter = windowCenter;\n    image.minPixelValue = minPixelValue;\n    image.maxPixelValue = maxPixelValue;\n\n    if (image.origPixelData) {\n      const pixelData = image.origPixelData;\n\n      image.getPixelData = () => pixelData;\n    }\n\n    // Remove some attributes added by false color mapping\n    image.origPixelData = undefined;\n    image.colormapId = undefined;\n    image.falseColor = undefined;\n  };\n}\n\n//\n// Then we need to make sure it will be converted into a colormap object if it's as string.\n\n/**\n * User can pass a colormap or its id as string to some of these public functions.\n * Then we need to make sure it will be converted into a colormap object if it's a string.\n *\n * @param {*} colormap A colormap ID or Object\n * @return {*} The colormap\n */\nfunction ensuresColormap (colormap) {\n  if (colormap && (typeof colormap === 'string')) {\n    colormap = getColormap(colormap);\n  }\n\n  return colormap;\n}\n\n/**\n * Restores a false color image to its original version\n *\n * @param {Image} image A Cornerstone Image Object\n * @returns {Boolean} True if the image object had a valid restore function, which was run. Otherwise, false.\n */\nfunction restoreImage (image) {\n  if (image.restore && (typeof image.restore === 'function')) {\n    image.restore();\n\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * Convert an image to a false color image\n *\n * @param {Image} image A Cornerstone Image Object\n * @param {String|Object} colormap - it can be a colormap object or a colormap id (string)\n *\n * @returns {Boolean} - Whether or not the image has been converted to a false color image\n */\nfunction convertImageToFalseColorImage (image, colormap) {\n  if (image.color && !image.falseColor) {\n    throw new Error('Color transforms are not implemented yet');\n  }\n\n  // User can pass a colormap id or a colormap object\n  colormap = ensuresColormap(colormap);\n\n  const colormapId = colormap.getId();\n\n  // Doesn't do anything if colormapId hasn't changed\n  if (image.colormapId === colormapId) {\n    // It has already being converted into a false color image\n    // Using the colormapId passed as parameter\n    return false;\n  }\n\n  // Restore the image attributes updated when converting to a false color image\n  restoreImage(image);\n\n  // Convert the image to a false color image\n  if (colormapId) {\n    const minPixelValue = image.minPixelValue || 0;\n    const maxPixelValue = image.maxPixelValue || 255;\n\n    image.restore = getRestoreImageMethod(image);\n\n    const lookupTable = colormap.createLookupTable();\n\n    lookupTable.setTableRange(minPixelValue, maxPixelValue);\n\n    // Update the pixel data and render the new image\n    pixelDataToFalseColorData(image, lookupTable);\n\n    // Update min and max pixel values\n    const pixelValues = getPixelValues(image.getPixelData());\n\n    image.minPixelValue = pixelValues.minPixelValue;\n    image.maxPixelValue = pixelValues.maxPixelValue;\n\n    image.windowWidth = 255;\n    image.windowCenter = 128;\n\n    // Cache the last colormapId used for performance\n    // Then it doesn't need to be re-rendered on next\n    // Time if the user hasn't updated it\n    image.colormapId = colormapId;\n  }\n\n  // Return `true` to tell the caller that the image has got updated\n  return true;\n}\n\n/**\n * Convert the image of a element to a false color image\n *\n * @param {HTMLElement} element The Cornerstone element\n * @param {*} colormap - it can be a colormap object or a colormap id (string)\n *\n * @returns {void}\n */\nfunction convertToFalseColorImage (element, colormap) {\n  const enabledElement = getEnabledElement(element);\n\n\n  return convertImageToFalseColorImage(enabledElement.image, colormap);\n}\n\nexport { convertImageToFalseColorImage,\n  convertToFalseColorImage,\n  restoreImage };\n\n\n\n// WEBPACK FOOTER //\n// ./falseColorMapping.js"],"sourceRoot":""}